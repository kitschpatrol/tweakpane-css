var wg=Object.defineProperty;var Cg=(M,k,tt)=>k in M?wg(M,k,{enumerable:!0,configurable:!0,writable:!0,value:tt}):M[k]=tt;var Ms=(M,k,tt)=>(Cg(M,typeof k!="symbol"?k+"":k,tt),tt);(function(){"use strict";function M(){}function k(n,e){for(const t in e)n[t]=e[t];return n}function tt(n){return n()}function Os(){return Object.create(null)}function Ot(n){n.forEach(tt)}function Rs(n){return typeof n=="function"}function ne(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}function iu(n){return Object.keys(n).length===0}function Ti(n,...e){if(n==null){for(const i of e)i(void 0);return M}const t=n.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function an(n,e,t){n.$$.on_destroy.push(Ti(e,t))}function Se(n,e,t,i){if(n){const r=Ts(n,e,t,i);return n[0](r)}}function Ts(n,e,t,i){return n[1]&&i?k(t.ctx.slice(),n[1](i(e))):t.ctx}function Le(n,e,t,i){if(n[2]&&i){const r=n[2](i(t));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],o=Math.max(e.dirty.length,r.length);for(let l=0;l<o;l+=1)s[l]=e.dirty[l]|r[l];return s}return e.dirty|r}return e.dirty}function Ae(n,e,t,i,r,s){if(r){const o=Ts(e,t,i,s);n.p(o,r)}}function Me(n){if(n.ctx.length>32){const e=[],t=n.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}function ke(n){const e={};for(const t in n)t[0]!=="$"&&(e[t]=n[t]);return e}function Z(n,e){const t={};e=new Set(e);for(const i in n)!e.has(i)&&i[0]!=="$"&&(t[i]=n[i]);return t}function ru(n,e,t){return n.set(t),e}const su=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Ds(n,e){n.appendChild(e)}function ou(n,e,t){const i=lu(n);if(!i.getElementById(e)){const r=Ve("style");r.id=e,r.textContent=t,au(i,r)}}function lu(n){if(!n)return document;const e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function au(n,e){return Ds(n.head||n,e),e.sheet}function K(n,e,t){n.insertBefore(e,t||null)}function F(n){n.parentNode&&n.parentNode.removeChild(n)}function uu(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function Ve(n){return document.createElement(n)}function js(n){return document.createTextNode(n)}function Gn(){return js(" ")}function ce(){return js("")}function un(n,e,t,i){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t,i)}function cu(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function du(n){return Array.from(n.childNodes)}function Y(n,e,t,i){t==null?n.style.removeProperty(e):n.style.setProperty(e,t,i?"important":"")}let Wn;function pu(){if(Wn===void 0){Wn=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Wn=!0}}return Wn}function hu(n,e){getComputedStyle(n).position==="static"&&(n.style.position="relative");const i=Ve("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const r=pu();let s;return r?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",s=un(window,"message",o=>{o.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{s=un(i.contentWindow,"resize",e),e()}),Ds(n,i),()=>{(r||s&&i.contentWindow)&&s(),F(i)}}function Yn(n,e,t){n.classList.toggle(e,!!t)}function mu(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}let cn;function dn(n){cn=n}function Rt(){if(!cn)throw new Error("Function called outside component initialization");return cn}function fu(n){Rt().$$.before_update.push(n)}function Tt(n){Rt().$$.on_mount.push(n)}function Dt(n){Rt().$$.on_destroy.push(n)}function vu(){const n=Rt();return(e,t,{cancelable:i=!1}={})=>{const r=n.$$.callbacks[e];if(r){const s=mu(e,t,{cancelable:i});return r.slice().forEach(o=>{o.call(n,s)}),!s.defaultPrevented}return!0}}function Di(n,e){return Rt().$$.context.set(n,e),e}function Ue(n){return Rt().$$.context.get(n)}function bu(n,e){const t=n.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const jt=[],E=[];let Bt=[];const ji=[],_u=Promise.resolve();let Bi=!1;function gu(){Bi||(Bi=!0,_u.then(Bs))}function Xn(n){Bt.push(n)}function S(n){ji.push(n)}const Ni=new Set;let Nt=0;function Bs(){if(Nt!==0)return;const n=cn;do{try{for(;Nt<jt.length;){const e=jt[Nt];Nt++,dn(e),wu(e.$$)}}catch(e){throw jt.length=0,Nt=0,e}for(dn(null),jt.length=0,Nt=0;E.length;)E.pop()();for(let e=0;e<Bt.length;e+=1){const t=Bt[e];Ni.has(t)||(Ni.add(t),t())}Bt.length=0}while(jt.length);for(;ji.length;)ji.pop()();Bi=!1,Ni.clear(),dn(n)}function wu(n){if(n.fragment!==null){n.update(),Ot(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Xn)}}function Cu(n){const e=[],t=[];Bt.forEach(i=>n.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),Bt=e}const Jn=new Set;let vt;function It(){vt={r:0,c:[],p:vt}}function Ft(){vt.r||Ot(vt.c),vt=vt.p}function g(n,e){n&&n.i&&(Jn.delete(n),n.i(e))}function C(n,e,t,i){if(n&&n.o){if(Jn.has(n))return;Jn.add(n),vt.c.push(()=>{Jn.delete(n),i&&(t&&n.d(1),i())}),n.o(e)}else i&&i()}function Ns(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function ge(n,e){const t={},i={},r={$$scope:1};let s=n.length;for(;s--;){const o=n[s],l=e[s];if(l){for(const a in o)a in l||(i[a]=1);for(const a in l)r[a]||(t[a]=l[a],r[a]=1);n[s]=l}else for(const a in o)r[a]=1}for(const o in i)o in t||(t[o]=void 0);return t}function we(n){return typeof n=="object"&&n!==null?n:{}}function L(n,e,t){const i=n.$$.props[e];i!==void 0&&(n.$$.bound[i]=t,t(n.$$.ctx[i]))}function j(n){n&&n.c()}function R(n,e,t){const{fragment:i,after_update:r}=n.$$;i&&i.m(e,t),Xn(()=>{const s=n.$$.on_mount.map(tt).filter(Rs);n.$$.on_destroy?n.$$.on_destroy.push(...s):Ot(s),n.$$.on_mount=[]}),r.forEach(Xn)}function T(n,e){const t=n.$$;t.fragment!==null&&(Cu(t.after_update),Ot(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function yu(n,e){n.$$.dirty[0]===-1&&(jt.push(n),gu(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function re(n,e,t,i,r,s,o=null,l=[-1]){const a=cn;dn(n);const u=n.$$={fragment:null,ctx:[],props:s,update:M,not_equal:r,bound:Os(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Os(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};o&&o(u.root);let c=!1;if(u.ctx=t?t(n,e.props||{},(d,p,...h)=>{const m=h.length?h[0]:p;return u.ctx&&r(u.ctx[d],u.ctx[d]=m)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](m),c&&yu(n,d)),p}):[],u.update(),c=!0,Ot(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const d=du(e.target);u.fragment&&u.fragment.l(d),d.forEach(F)}else u.fragment&&u.fragment.c();e.intro&&g(n.$$.fragment),R(n,e.target,e.anchor),Bs()}dn(a)}class se{constructor(){Ms(this,"$$");Ms(this,"$$set")}$destroy(){T(this,1),this.$destroy=M}$on(e,t){if(!Rs(t))return M;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const r=i.indexOf(t);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!iu(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Pu="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pu);function yg(n){return n}function H(n){return n==null}function Ii(n){return n!==null&&typeof n=="object"}function Fi(n){return n!==null&&typeof n=="object"}function xu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function bt(n,e){return Array.from(new Set([...Object.keys(n),...Object.keys(e)])).reduce((i,r)=>{const s=n[r],o=e[r];return Fi(s)&&Fi(o)?Object.assign(Object.assign({},i),{[r]:bt(s,o)}):Object.assign(Object.assign({},i),{[r]:r in e?o:s})},{})}function Eu(n){return Ii(n)?"target"in n:!1}const ku={alreadydisposed:()=>"View has been already disposed",invalidparams:n=>`Invalid parameters for '${n.name}'`,nomatchingcontroller:n=>`No matching controller for '${n.key}'`,nomatchingview:n=>`No matching view for '${JSON.stringify(n.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:n=>`Not compatible with  plugin '${n.id}'`,propertynotfound:n=>`Property '${n.name}' not found`,shouldneverhappen:()=>"This error should never happen"};let _t=class ln{static alreadyDisposed(){return new ln({type:"alreadydisposed"})}static notBindable(){return new ln({type:"notbindable"})}static notCompatible(e,t){return new ln({type:"notcompatible",context:{id:`${e}.${t}`}})}static propertyNotFound(e){return new ln({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new ln({type:"shouldneverhappen"})}constructor(e){var t;this.message=(t=ku[e.type](e.context))!==null&&t!==void 0?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}},Is=class Qa{constructor(e,t){this.obj_=e,this.key=t}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,t){const i=this.read();if(!Qa.isBindable(i))throw _t.notBindable();if(!(e in i))throw _t.propertyNotFound(e);i[e]=t}},fe=class{constructor(){this.observers_={}}on(e,t){let i=this.observers_[e];return i||(i=this.observers_[e]=[]),i.push({handler:t}),this}off(e,t){const i=this.observers_[e];return i&&(this.observers_[e]=i.filter(r=>r.handler!==t)),this}emit(e,t){const i=this.observers_[e];i&&i.forEach(r=>{r.handler(t)})}},Vu=class{constructor(e,t){var i;this.constraint_=t==null?void 0:t.constraint,this.equals_=(i=t==null?void 0:t.equals)!==null&&i!==void 0?i:(r,s)=>r===s,this.emitter=new fe,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const i=t??{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(e):e,s=this.rawValue_;this.equals_(s,r)&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:i,previousRawValue:s,rawValue:r,sender:this}))}},Su=class{constructor(e){this.emitter=new fe,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const i=t??{forceEmit:!1,last:!0},r=this.value_;r===e&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:i,previousRawValue:r,rawValue:this.value_,sender:this}))}},Lu=class{constructor(e){this.emitter=new fe,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}};function ee(n,e){const t=e==null?void 0:e.constraint,i=e==null?void 0:e.equals;return!t&&!i?new Su(n):new Vu(n,e)}function Au(n){return[new Lu(n),(e,t)=>{n.setRawValue(e,t)}]}let $=class Za{constructor(e){this.emitter=new fe,this.valMap_=e;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",()=>{this.emitter.emit("change",{key:t,sender:this})})}static createCore(e){return Object.keys(e).reduce((i,r)=>Object.assign(i,{[r]:ee(e[r])}),{})}static fromObject(e){const t=this.createCore(e);return new Za(t)}get(e){return this.valMap_[e].rawValue}set(e,t){this.valMap_[e].rawValue=t}value(e){return this.valMap_[e]}},Qn=class{constructor(e){this.values=$.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),i=this.values.get("min");return Math.min(Math.max(e,i),t)}},Mu=class{constructor(e){this.values=$.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),i=this.values.get("min");let r=e;return H(i)||(r=Math.max(r,i)),H(t)||(r=Math.min(r,t)),r}},Ou=class{constructor(e,t=0){this.step=e,this.origin=t}constrain(e){const t=this.origin%this.step,i=Math.round((e-t)/this.step);return t+i*this.step}},Ru=class{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}};const Tu={"**":(n,e)=>Math.pow(n,e),"*":(n,e)=>n*e,"/":(n,e)=>n/e,"%":(n,e)=>n%e,"+":(n,e)=>n+e,"-":(n,e)=>n-e,"<<":(n,e)=>n<<e,">>":(n,e)=>n>>e,">>>":(n,e)=>n>>>e,"&":(n,e)=>n&e,"^":(n,e)=>n^e,"|":(n,e)=>n|e};let Du=class{constructor(e,t,i){this.left=t,this.operator=e,this.right=i}evaluate(){const e=Tu[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}};const ju={"+":n=>n,"-":n=>-n,"~":n=>~n};let Bu=class{constructor(e,t){this.operator=e,this.expression=t}evaluate(){const e=ju[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}};function $i(n){return(e,t)=>{for(let i=0;i<n.length;i++){const r=n[i](e,t);if(r!=="")return r}return""}}function pn(n,e){var t;const i=n.substr(e).match(/^\s+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function Nu(n,e){const t=n.substr(e,1);return t.match(/^[1-9]$/)?t:""}function hn(n,e){var t;const i=n.substr(e).match(/^[0-9]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function Iu(n,e){const t=hn(n,e);if(t!=="")return t;const i=n.substr(e,1);if(e+=1,i!=="-"&&i!=="+")return"";const r=hn(n,e);return r===""?"":i+r}function Ki(n,e){const t=n.substr(e,1);if(e+=1,t.toLowerCase()!=="e")return"";const i=Iu(n,e);return i===""?"":t+i}function Fs(n,e){const t=n.substr(e,1);if(t==="0")return t;const i=Nu(n,e);return e+=i.length,i===""?"":i+hn(n,e)}function Fu(n,e){const t=Fs(n,e);if(e+=t.length,t==="")return"";const i=n.substr(e,1);if(e+=i.length,i!==".")return"";const r=hn(n,e);return e+=r.length,t+i+r+Ki(n,e)}function $u(n,e){const t=n.substr(e,1);if(e+=t.length,t!==".")return"";const i=hn(n,e);return e+=i.length,i===""?"":t+i+Ki(n,e)}function Ku(n,e){const t=Fs(n,e);return e+=t.length,t===""?"":t+Ki(n,e)}const Uu=$i([Fu,$u,Ku]);function zu(n,e){var t;const i=n.substr(e).match(/^[01]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function Hu(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0b")return"";const i=zu(n,e);return i===""?"":t+i}function qu(n,e){var t;const i=n.substr(e).match(/^[0-7]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function Gu(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0o")return"";const i=qu(n,e);return i===""?"":t+i}function Wu(n,e){var t;const i=n.substr(e).match(/^[0-9a-f]+/i);return(t=i&&i[0])!==null&&t!==void 0?t:""}function Yu(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0x")return"";const i=Wu(n,e);return i===""?"":t+i}const Xu=$i([Hu,Gu,Yu]),Ju=$i([Xu,Uu]);function Qu(n,e){const t=Ju(n,e);return e+=t.length,t===""?null:{evaluable:new Ru(t),cursor:e}}function Zu(n,e){const t=n.substr(e,1);if(e+=t.length,t!=="(")return null;const i=Ks(n,e);if(!i)return null;e=i.cursor,e+=pn(n,e).length;const r=n.substr(e,1);return e+=r.length,r!==")"?null:{evaluable:i.evaluable,cursor:e}}function ec(n,e){var t;return(t=Qu(n,e))!==null&&t!==void 0?t:Zu(n,e)}function $s(n,e){const t=ec(n,e);if(t)return t;const i=n.substr(e,1);if(e+=i.length,i!=="+"&&i!=="-"&&i!=="~")return null;const r=$s(n,e);return r?(e=r.cursor,{cursor:e,evaluable:new Bu(i,r.evaluable)}):null}function tc(n,e,t){t+=pn(e,t).length;const i=n.filter(r=>e.startsWith(r,t))[0];return i?(t+=i.length,t+=pn(e,t).length,{cursor:t,operator:i}):null}function nc(n,e){return(t,i)=>{const r=n(t,i);if(!r)return null;i=r.cursor;let s=r.evaluable;for(;;){const o=tc(e,t,i);if(!o)break;i=o.cursor;const l=n(t,i);if(!l)return null;i=l.cursor,s=new Du(o.operator,s,l.evaluable)}return s?{cursor:i,evaluable:s}:null}}const ic=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((n,e)=>nc(n,e),$s);function Ks(n,e){return e+=pn(n,e).length,ic(n,e)}function rc(n){const e=Ks(n,0);return!e||e.cursor+pn(n,e.cursor).length!==n.length?null:e.evaluable}function nt(n){var e;const t=rc(n);return(e=t==null?void 0:t.evaluate())!==null&&e!==void 0?e:null}function Us(n){if(typeof n=="number")return n;if(typeof n=="string"){const e=nt(n);if(!H(e))return e}return 0}function de(n){return e=>e.toFixed(Math.max(Math.min(n,20),0))}function B(n,e,t,i,r){const s=(n-e)/(t-e);return i+s*(r-i)}function zs(n){return String(n.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function J(n,e,t){return Math.min(Math.max(n,e),t)}function Hs(n,e){return(n%e+e)%e}function sc(n,e){return H(n.step)?Math.max(zs(e),2):zs(n.step)}function qs(n){var e;return(e=n.step)!==null&&e!==void 0?e:1}function oc(n,e){var t;const i=Math.abs((t=n.step)!==null&&t!==void 0?t:e);return i===0?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}function Gs(n,e){return H(n.step)?null:new Ou(n.step,e)}function Ws(n){return!H(n.max)&&!H(n.min)?new Qn({max:n.max,min:n.min}):!H(n.max)||!H(n.min)?new Mu({max:n.max,min:n.min}):null}function Ys(n,e){var t,i,r;return{formatter:(t=n.format)!==null&&t!==void 0?t:de(sc(n,e)),keyScale:(i=n.keyScale)!==null&&i!==void 0?i:qs(n),pointerScale:(r=n.pointerScale)!==null&&r!==void 0?r:oc(n,e)}}function Xs(n){return{format:n.optional.function,keyScale:n.optional.number,max:n.optional.number,min:n.optional.number,pointerScale:n.optional.number,step:n.optional.number}}function Ui(n){return{constraint:n.constraint,textProps:$.fromObject(Ys(n.params,n.initialValue))}}let zi=class{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}},Zn=class{constructor(e){this.target=e}},Js=class extends Zn{constructor(e,t,i){super(e),this.value=t,this.last=i??!0}},lc=class extends Zn{constructor(e,t){super(e),this.expanded=t}},ac=class extends Zn{constructor(e,t){super(e),this.index=t}},Hi=class extends zi{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new fe,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const t=this.controller.value;this.emitter_.emit("change",new Js(this,t.binding.target.read(),e.options.last))}};function uc(n,e){const i=Object.keys(e).reduce((r,s)=>{if(r===void 0)return;const o=e[s],l=o(n[s]);return l.succeeded?Object.assign(Object.assign({},r),{[s]:l.value}):void 0},{});return i}function cc(n,e){return n.reduce((t,i)=>{if(t===void 0)return;const r=e(i);if(!(!r.succeeded||r.value===void 0))return[...t,r.value]},[])}function dc(n){return n===null?!1:typeof n=="object"}function ze(n){return e=>t=>{if(!e&&t===void 0)return{succeeded:!1,value:void 0};if(e&&t===void 0)return{succeeded:!0,value:void 0};const i=n(t);return i!==void 0?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function Qs(n){return{custom:e=>ze(e)(n),boolean:ze(e=>typeof e=="boolean"?e:void 0)(n),number:ze(e=>typeof e=="number"?e:void 0)(n),string:ze(e=>typeof e=="string"?e:void 0)(n),function:ze(e=>typeof e=="function"?e:void 0)(n),constant:e=>ze(t=>t===e?e:void 0)(n),raw:ze(e=>e)(n),object:e=>ze(t=>{if(dc(t))return uc(t,e)})(n),array:e=>ze(t=>{if(Array.isArray(t))return cc(t,e)})(n)}}const qi={optional:Qs(!0),required:Qs(!1)};function ie(n,e){const t=e(qi),i=qi.required.object(t)(n);return i.succeeded?i.value:void 0}function Oe(n,e,t,i){if(e&&!e(n))return!1;const r=ie(n,t);return r?i(r):!1}function Re(n,e){var t;return bt((t=n==null?void 0:n())!==null&&t!==void 0?t:{},e)}function ei(n){return"value"in n}function pc(n){if(!Ii(n)||!("binding"in n))return!1;const e=n.binding;return Eu(e)}const Te="http://www.w3.org/2000/svg";function ti(n){n.offsetHeight}function hc(n,e){const t=n.style.transition;n.style.transition="none",e(),n.style.transition=t}function Gi(n){return n.ontouchstart!==void 0}function mc(){return globalThis}function fc(){return mc().document}function vc(n){const e=n.ownerDocument.defaultView;return e&&"document"in e?n.getContext("2d",{willReadFrequently:!0}):null}const bc={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function ni(n,e){const t=n.createElementNS(Te,"svg");return t.innerHTML=bc[e],t}function Zs(n,e,t){n.insertBefore(e,n.children[t])}function Wi(n){n.parentElement&&n.parentElement.removeChild(n)}function eo(n){for(;n.children.length>0;)n.removeChild(n.children[0])}function _c(n){for(;n.childNodes.length>0;)n.removeChild(n.childNodes[0])}function to(n){return n.relatedTarget?n.relatedTarget:"explicitOriginalTarget"in n?n.explicitOriginalTarget:null}function He(n,e){n.emitter.on("change",t=>{e(t.rawValue)}),e(n.rawValue)}function De(n,e,t){He(n.value(e),t)}const gc="tp";function D(n){return(t,i)=>[gc,"-",n,"v",t?`_${t}`:"",i?`-${i}`:""].join("")}const mn=D("lbl");function wc(n,e){const t=n.createDocumentFragment();return e.split(`
`).map(r=>n.createTextNode(r)).forEach((r,s)=>{s>0&&t.appendChild(n.createElement("br")),t.appendChild(r)}),t}let Cc=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(mn()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(mn("l")),De(t.props,"label",s=>{H(s)?this.element.classList.add(mn(void 0,"nol")):(this.element.classList.remove(mn(void 0,"nol")),_c(i),i.appendChild(wc(e,s)))}),this.element.appendChild(i),this.labelElement=i;const r=e.createElement("div");r.classList.add(mn("v")),this.element.appendChild(r),this.valueElement=r}},yc=class{constructor(e,t){this.props=t.props,this.valueController=t.valueController,this.viewProps=t.valueController.viewProps,this.view=new Cc(e,{props:t.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return Oe(e,null,t=>({label:t.optional.string}),t=>(this.props.set("label",t.label),!0))}exportProps(){return Re(null,{label:this.props.get("label")})}};function Pc(){return["veryfirst","first","last","verylast"]}const no=D(""),io={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};let ro=class{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const t=this.view.element;this.blade.value("positions").emitter.on("change",()=>{Pc().forEach(i=>{t.classList.remove(no(void 0,io[i]))}),this.blade.get("positions").forEach(i=>{t.classList.add(no(void 0,io[i]))})}),this.viewProps.handleDispose(()=>{Wi(t)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return Oe(e,null,t=>({disabled:t.required.boolean,hidden:t.required.boolean}),t=>(this.viewProps.importState(t),!0))}exportState(){return Re(null,Object.assign({},this.viewProps.exportState()))}},xc=class extends zi{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,t){const i=t.bind(this);return this.controller.buttonController.emitter.on(e,()=>{i(new Zn(this))}),this}};function Ec(n,e,t){t?n.classList.add(e):n.classList.remove(e)}function $t(n,e){return t=>{Ec(n,e,t)}}function Yi(n,e){He(n,t=>{e.textContent=t??""})}const Xi=D("btn");let kc=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Xi()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("button");i.classList.add(Xi("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const r=e.createElement("div");r.classList.add(Xi("t")),Yi(t.props.value("title"),r),this.buttonElement.appendChild(r)}},Vc=class{constructor(e,t){this.emitter=new fe,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new kc(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return Oe(e,null,t=>({title:t.optional.string}),t=>(this.props.set("title",t.title),!0))}exportProps(){return Re(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}},so=class extends ro{constructor(e,t){const i=new Vc(e,{props:t.buttonProps,viewProps:t.viewProps}),r=new yc(e,{blade:t.blade,props:t.labelProps,valueController:i});super({blade:t.blade,view:r.view,viewProps:t.viewProps}),this.buttonController=i,this.labelController=r}importState(e){return Oe(e,t=>super.importState(t)&&this.buttonController.importProps(t)&&this.labelController.importProps(t),()=>({}),()=>!0)}exportState(){return Re(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}},Sc=class{constructor(e){const[t,i]=e.split("-"),r=t.split(".");this.major=parseInt(r[0],10),this.minor=parseInt(r[1],10),this.patch=parseInt(r[2],10),this.prerelease=i??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}};const Lc=new Sc("2.0.2");function oe(n){return Object.assign({core:Lc},n)}oe({id:"button",type:"blade",accept(n){const e=ie(n,t=>({title:t.required.string,view:t.required.constant("button"),label:t.optional.string}));return e?{params:e}:null},controller(n){return new so(n.document,{blade:n.blade,buttonProps:$.fromObject({title:n.params.title}),labelProps:$.fromObject({label:n.params.label}),viewProps:n.viewProps})},api(n){return n.controller instanceof so?new xc(n.controller):null}});function Ac(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function Mc(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function Oc(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function Rc(n){return Ii(n)?"refresh"in n&&typeof n.refresh=="function":!1}function Tc(n,e){if(!Is.isBindable(n))throw _t.notBindable();return new Is(n,e)}let Dc=class{constructor(e,t){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new fe,this.pool_=t,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,t,i){const r=i??{},s=this.controller_.element.ownerDocument,o=this.pool_.createBinding(s,Tc(e,t),r),l=this.pool_.createBindingApi(o);return this.add(l,r.index)}addFolder(e){return Mc(this,e)}addButton(e){return Ac(this,e)}addTab(e){return Oc(this,e)}add(e,t){const i=e.controller;return this.controller_.rack.add(i,t),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const t=this.controller_.element.ownerDocument,i=this.pool_.createBlade(t,e),r=this.pool_.createApi(i);return this.add(r,e.index)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)}),this}refresh(){this.children.forEach(e=>{Rc(e)&&e.refresh()})}onRackValueChange_(e){const t=e.bladeController,i=this.pool_.createApi(t),r=pc(t.value)?t.value.binding:null;this.emitter_.emit("change",new Js(i,r?r.target.read():t.value.rawValue,e.options.last))}},Ji=class extends zi{constructor(e,t){super(e),this.rackApi_=new Dc(e.rackController,t)}refresh(){this.rackApi_.refresh()}},Qi=class extends ro{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return Oe(e,t=>super.importState(t),t=>({children:t.required.array(t.required.raw)}),t=>this.rackController.rack.children.every((i,r)=>i.importState(t.children[r])))}exportState(){return Re(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}};function Zi(n){return"rackController"in n}let jc=class{constructor(e){this.emitter=new fe,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const t of this.allItems())if(e(t))return t;return null}includes(e){return this.cache_.has(e)}add(e,t){if(this.includes(e))throw _t.shouldNeverHappen();const i=t!==void 0?t:this.items_.length;this.items_.splice(i,0,e),this.cache_.add(e);const r=this.extract_(e);r&&(r.emitter.on("add",this.onSubListAdd_),r.emitter.on("remove",this.onSubListRemove_),r.allItems().forEach(s=>{this.cache_.add(s)})),this.emitter.emit("add",{index:i,item:e,root:this,target:this})}remove(e){const t=this.items_.indexOf(e);if(t<0)return;this.items_.splice(t,1),this.cache_.delete(e);const i=this.extract_(e);i&&(i.allItems().forEach(r=>{this.cache_.delete(r)}),i.emitter.off("add",this.onSubListAdd_),i.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}};function Bc(n,e){for(let t=0;t<n.length;t++){const i=n[t];if(ei(i)&&i.value===e)return i}return null}function Nc(n){return Zi(n)?n.rackController.rack.bcSet_:null}let Ic=class{constructor(e){var t,i;this.emitter=new fe,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(t=e.blade)!==null&&t!==void 0?t:null,(i=this.blade_)===null||i===void 0||i.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new jc(Nc),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,t){var i;(i=e.parent)===null||i===void 0||i.remove(e),e.parent=this,this.bcSet_.add(e,t)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:t,sender:this}),!t)return;const i=e.item;if(i.viewProps.emitter.on("change",this.onChildViewPropsChange_),i.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),i.viewProps.handleDispose(this.onChildDispose_),ei(i))i.value.emitter.on("change",this.onChildValueChange_);else if(Zi(i)){const r=i.rackController.rack;if(r){const s=r.emitter;s.on("layout",this.onRackLayout_),s.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:t,sender:this}),!t)return;const i=e.item;if(ei(i))i.value.emitter.off("change",this.onChildValueChange_);else if(Zi(i)){const r=i.rackController.rack;if(r){const s=r.emitter;s.off("layout",this.onRackLayout_),s.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(r=>!r.viewProps.get("hidden")),t=e[0],i=e[e.length-1];this.bcSet_.items.forEach(r=>{const s=[];r===t&&(s.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&s.push("veryfirst")),r===i&&(s.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&s.push("verylast")),r.blade.set("positions",s)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(t=>t.viewProps.get("disposed")).forEach(t=>{this.bcSet_.remove(t)})}onChildValueChange_(e){const t=Bc(this.find(ei),e.sender);if(!t)throw _t.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:t,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}},er=class{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const t=new Ic({blade:e.root?void 0:e.blade,viewProps:e.viewProps});t.emitter.on("add",this.onRackAdd_),t.emitter.on("remove",this.onRackRemove_),this.rack=t,this.viewProps.handleDispose(()=>{for(let i=this.rack.children.length-1;i>=0;i--)this.rack.children[i].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&Zs(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&Wi(e.bladeController.view.element)}};function oo(){return new $({positions:ee([],{equals:xu})})}let tr=class eu extends ${constructor(e){super(e)}static create(e){const t={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},i=$.createCore(t);return new eu(i)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!H(e)?`${e}px`:"auto"}bindExpandedClass(e,t){const i=()=>{this.styleExpanded?e.classList.add(t):e.classList.remove(t)};De(this,"expanded",i),De(this,"temporaryExpanded",i)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}};function Fc(n,e){let t=0;return hc(e,()=>{n.set("expandedHeight",null),n.set("temporaryExpanded",!0),ti(e),t=e.clientHeight,n.set("temporaryExpanded",null),ti(e)}),t}function lo(n,e){e.style.height=n.styleHeight}function nr(n,e){n.value("expanded").emitter.on("beforechange",()=>{if(n.set("completed",!1),H(n.get("expandedHeight"))){const t=Fc(n,e);t>0&&n.set("expandedHeight",t)}n.set("shouldFixHeight",!0),ti(e)}),n.emitter.on("change",()=>{lo(n,e)}),lo(n,e),e.addEventListener("transitionend",t=>{t.propertyName==="height"&&n.cleanUpTransition()})}let $c=class extends Ji{constructor(e,t){super(e,t),this.emitter_=new fe,this.controller.foldable.value("expanded").emitter.on("change",i=>{this.emitter_.emit("fold",new lc(this,i.sender.rawValue))}),this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,t,i){return this.rackApi_.addBinding(e,t,i)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){return this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)}),this}};const ao=D("cnt");let Kc=class{constructor(e,t){var i;this.className_=D((i=t.viewName)!==null&&i!==void 0?i:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),ao()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),De(this.foldable_,"completed",$t(this.element,this.className_(void 0,"cpl")));const r=e.createElement("button");r.classList.add(this.className_("b")),De(t.props,"title",u=>{H(u)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const s=e.createElement("div");s.classList.add(this.className_("i")),this.element.appendChild(s);const o=e.createElement("div");o.classList.add(this.className_("t")),Yi(t.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const l=e.createElement("div");l.classList.add(this.className_("m")),this.buttonElement.appendChild(l);const a=e.createElement("div");a.classList.add(this.className_("c")),this.element.appendChild(a),this.containerElement=a}},uo=class extends Qi{constructor(e,t){var i;const r=tr.create((i=t.expanded)!==null&&i!==void 0?i:!0),s=new Kc(e,{foldable:r,props:t.props,viewName:t.root?"rot":void 0,viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new er({blade:t.blade,element:s.containerElement,root:t.root,viewProps:t.viewProps}),view:s})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=t.props,this.foldable=r,nr(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return Oe(e,t=>super.importState(t),t=>({expanded:t.required.boolean,title:t.optional.string}),t=>(this.foldable.set("expanded",t.expanded),this.props.set("title",t.title),!0))}exportState(){return Re(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}};oe({id:"folder",type:"blade",accept(n){const e=ie(n,t=>({title:t.required.string,view:t.required.constant("folder"),expanded:t.optional.boolean}));return e?{params:e}:null},controller(n){return new uo(n.document,{blade:n.blade,expanded:n.params.expanded,props:$.fromObject({title:n.params.title}),viewProps:n.viewProps})},api(n){return n.controller instanceof uo?new $c(n.controller,n.pool):null}});const Uc=D("");function co(n,e){return $t(n,Uc(void 0,e))}let ir=class tu extends ${constructor(e){var t;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Au(ee(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var t,i,r;const s=e??{};return new tu($.createCore({disabled:(t=s.disabled)!==null&&t!==void 0?t:!1,disposed:!1,hidden:(i=s.hidden)!==null&&i!==void 0?i:!1,parent:(r=s.parent)!==null&&r!==void 0?r:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){He(this.globalDisabled_,co(e,"disabled")),De(this,"hidden",co(e,"hidden"))}bindDisabled(e){He(this.globalDisabled_,t=>{e.disabled=t})}bindTabIndex(e){He(this.globalDisabled_,t=>{e.tabIndex=t?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",t=>{t&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var t;const i=e.previousRawValue;i==null||i.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}};const po=D("tbp");let zc=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(po()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(po("c")),this.element.appendChild(i),this.containerElement=i}};const fn=D("tbi");let Hc=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(fn()),t.viewProps.bindClassModifiers(this.element),De(t.props,"selected",s=>{s?this.element.classList.add(fn(void 0,"sel")):this.element.classList.remove(fn(void 0,"sel"))});const i=e.createElement("button");i.classList.add(fn("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const r=e.createElement("div");r.classList.add(fn("t")),Yi(t.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r}},qc=class{constructor(e,t){this.emitter=new fe,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new Hc(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}},rr=class extends Qi{constructor(e,t){const i=new zc(e,{viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new er({blade:t.blade,element:i.containerElement,viewProps:t.viewProps}),view:i})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new qc(e,{props:t.itemProps,viewProps:ir.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=t.props,De(this.props,"selected",r=>{this.itemController.props.set("selected",r),this.viewProps.set("hidden",!r)})}get itemController(){return this.ic_}importState(e){return Oe(e,t=>super.importState(t),t=>({selected:t.required.boolean,title:t.required.string}),t=>(this.ic_.props.set("selected",t.selected),this.ic_.props.set("title",t.title),!0))}exportState(){return Re(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}},Gc=class extends Ji{constructor(e,t){super(e,t),this.emitter_=new fe,this.onSelect_=this.onSelect_.bind(this),this.pool_=t,this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const t=this.controller.view.element.ownerDocument,i=new rr(t,{blade:oo(),itemProps:$.fromObject({selected:!1,title:e.title}),props:$.fromObject({selected:!1}),viewProps:ir.create()}),r=this.pool_.createApi(i);return this.rackApi_.add(r,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)}),this}onSelect_(e){this.emitter_.emit("select",new ac(this,e.rawValue))}},Wc=class extends Ji{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBinding(e,t,i){return this.rackApi_.addBinding(e,t,i)}addBlade(e){return this.rackApi_.addBlade(e)}};const ho=-1;let Yc=class{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=ee(!0),this.selectedIndex=ee(ho),this.items_=[]}add(e,t){const i=t??this.items_.length;this.items_.splice(i,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=ho,this.empty.rawValue=!0;return}const e=this.items_.findIndex(t=>t.rawValue);e<0?(this.items_.forEach((t,i)=>{t.rawValue=i===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((t,i)=>{t.rawValue=i===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const t=this.items_.findIndex(i=>i===e.sender);this.items_.forEach((i,r)=>{i.rawValue=r===t}),this.selectedIndex.rawValue=t}else this.keepSelection_()}};const vn=D("tab");let Xc=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(vn(),ao()),t.viewProps.bindClassModifiers(this.element),He(t.empty,$t(this.element,vn(void 0,"nop")));const i=e.createElement("div");i.classList.add(vn("t")),this.element.appendChild(i),this.itemsElement=i;const r=e.createElement("div");r.classList.add(vn("i")),this.element.appendChild(r);const s=e.createElement("div");s.classList.add(vn("c")),this.element.appendChild(s),this.contentsElement=s}},mo=class extends Qi{constructor(e,t){const i=new Yc,r=new Xc(e,{empty:i.empty,viewProps:t.viewProps});super({blade:t.blade,rackController:new er({blade:t.blade,element:r.contentsElement,viewProps:t.viewProps}),view:r}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const s=this.rackController.rack;s.emitter.on("add",this.onRackAdd_),s.emitter.on("remove",this.onRackRemove_),this.tab=i}add(e,t){this.rackController.rack.add(e,t)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const t=e.bladeController;Zs(this.view.itemsElement,t.itemController.view.element,e.index),t.itemController.viewProps.set("parent",this.viewProps),this.tab.add(t.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const t=e.bladeController;Wi(t.itemController.view.element),t.itemController.viewProps.set("parent",null),this.tab.remove(t.props.value("selected"))}};oe({id:"tab",type:"blade",accept(n){const e=ie(n,t=>({pages:t.required.array(t.required.object({title:t.required.string})),view:t.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(n){const e=new mo(n.document,{blade:n.blade,viewProps:n.viewProps});return n.params.pages.forEach(t=>{const i=new rr(n.document,{blade:oo(),itemProps:$.fromObject({selected:!1,title:t.title}),props:$.fromObject({selected:!1}),viewProps:ir.create()});e.add(i)}),e},api(n){return n.controller instanceof mo?new Gc(n.controller,n.pool):n.controller instanceof rr?new Wc(n.controller,n.pool):null}});let sr=class extends Hi{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}},bn=class{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((t,i)=>i.constrain(t),e)}};function ii(n,e){if(n instanceof e)return n;if(n instanceof bn){const t=n.constraints.reduce((i,r)=>i||(r instanceof e?r:null),null);if(t)return t}return null}let ri=class{constructor(e){this.values=$.fromObject({options:e})}constrain(e){const t=this.values.get("options");return t.length===0||t.filter(r=>r.value===e).length>0?e:t[0].value}};function si(n){var e;const t=qi;if(Array.isArray(n))return(e=ie({items:n},i=>({items:i.required.array(i.required.object({text:i.required.string,value:i.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof n=="object")return t.required.raw(n).value}function fo(n){if(Array.isArray(n))return n;const e=[];return Object.keys(n).forEach(t=>{e.push({text:t,value:n[t]})}),e}function or(n){return H(n)?null:new ri(fo(n))}const lr=D("lst");let Jc=class{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add(lr()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("select");i.classList.add(lr("s")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.selectElement=i;const r=e.createElement("div");r.classList.add(lr("m")),r.appendChild(ni(e,"dropdown")),this.element.appendChild(r),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,De(this.props_,"options",s=>{eo(this.selectElement),s.forEach(o=>{const l=e.createElement("option");l.textContent=o.text,this.selectElement.appendChild(l)}),this.update_()})}update_(){const e=this.props_.get("options").map(t=>t.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}},Kt=class{constructor(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new Jc(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const t=e.currentTarget;this.value.rawValue=this.props.get("options")[t.selectedIndex].value}importProps(e){return Oe(e,null,t=>({options:t.required.custom(si)}),t=>(this.props.set("options",fo(t.options)),!0))}exportProps(){return Re(null,{options:this.props.get("options")})}};const vo=D("pop");let Qc=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(vo()),t.viewProps.bindClassModifiers(this.element),He(t.shows,$t(this.element,vo(void 0,"v")))}},bo=class{constructor(e,t){this.shows=ee(!1),this.viewProps=t.viewProps,this.view=new Qc(e,{shows:this.shows,viewProps:this.viewProps})}};const _o=D("txt");let Zc=class{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(_o()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);const i=e.createElement("input");i.classList.add(_o("i")),i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}},ar=class{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new Zc(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const i=e.currentTarget.value,r=this.parser_(i);H(r)||(this.value.rawValue=r),this.view.refresh()}};function ed(n){return String(n)}function go(n){return n==="false"?!1:!!n}function wo(n){return ed(n)}function td(n){return e=>n.reduce((t,i)=>t!==null?t:i(e),null)}const nd=de(0);function oi(n){return nd(n)+"%"}function Co(n){return String(n)}function ur(n){return n}function Ut({primary:n,secondary:e,forward:t,backward:i}){let r=!1;function s(o){r||(r=!0,o(),r=!1)}n.emitter.on("change",o=>{s(()=>{e.setRawValue(t(n.rawValue,e.rawValue),o.options)})}),e.emitter.on("change",o=>{s(()=>{n.setRawValue(i(n.rawValue,e.rawValue),o.options)}),s(()=>{e.setRawValue(t(n.rawValue,e.rawValue),o.options)})}),s(()=>{e.setRawValue(t(n.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function pe(n,e){const t=n*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+t:e.downKey?-t:0}function _n(n){return{altKey:n.altKey,downKey:n.key==="ArrowDown",shiftKey:n.shiftKey,upKey:n.key==="ArrowUp"}}function qe(n){return{altKey:n.altKey,downKey:n.key==="ArrowLeft",shiftKey:n.shiftKey,upKey:n.key==="ArrowRight"}}function id(n){return n==="ArrowUp"||n==="ArrowDown"}function yo(n){return id(n)||n==="ArrowLeft"||n==="ArrowRight"}function cr(n,e){var t,i;const r=e.ownerDocument.defaultView,s=e.getBoundingClientRect();return{x:n.pageX-(((t=r&&r.scrollX)!==null&&t!==void 0?t:0)+s.left),y:n.pageY-(((i=r&&r.scrollY)!==null&&i!==void 0?i:0)+s.top)}}let gt=class{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new fe,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var t;e.preventDefault(),(t=e.currentTarget)===null||t===void 0||t.focus();const i=this.elem_.ownerDocument;i.addEventListener("mousemove",this.onDocumentMouseMove_),i.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(cr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(cr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(cr(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const t=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchMove_(e){const t=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchEnd_(e){var t;const i=(t=e.targetTouches.item(0))!==null&&t!==void 0?t:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(i?{x:i.clientX-r.left,y:i.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey})}};const Ce=D("txt");let rd=class{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Ce(),Ce(void 0,"num")),t.arrayPosition&&this.element.classList.add(Ce(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(Ce("i")),i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Ce()),this.inputElement.classList.add(Ce("i"));const r=e.createElement("div");r.classList.add(Ce("k")),this.element.appendChild(r),this.knobElement=r;const s=e.createElementNS(Te,"svg");s.classList.add(Ce("g")),this.knobElement.appendChild(s);const o=e.createElementNS(Te,"path");o.classList.add(Ce("gb")),s.appendChild(o),this.guideBodyElem_=o;const l=e.createElementNS(Te,"path");l.classList.add(Ce("gh")),s.appendChild(l),this.guideHeadElem_=l;const a=e.createElement("div");a.classList.add(D("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(Ce(void 0,"drg"));return}this.element.classList.add(Ce(void 0,"drg"));const t=e.rawValue/this.props_.get("pointerScale"),i=t+(t>0?-1:t<0?1:0),r=J(-i,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${i+r},0 L${i},4 L${i+r},8`,`M ${t},-1 L${t},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${t},4`);const s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left=`${t}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}},gn=class{constructor(e,t){var i;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=t.parser,this.props=t.props,this.sliderProps_=(i=t.sliderProps)!==null&&i!==void 0?i:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=ee(null),this.view=new rd(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const r=new gt(this.view.knobElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var t,i;const r=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("min"),s=(i=this.sliderProps_)===null||i===void 0?void 0:i.get("max");let o=e;return r!==void 0&&(o=Math.max(o,r)),s!==void 0&&(o=Math.min(o,s)),o}onInputChange_(e){const i=e.currentTarget.value,r=this.parser_(i);H(r)||(this.value.rawValue=this.constrainValue_(r)),this.view.refresh()}onInputKeyDown_(e){const t=pe(this.props.get("keyScale"),_n(e));t!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})}onInputKeyUp_(e){pe(this.props.get("keyScale"),_n(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("pointerScale"))}onPointerMove_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}};const dr=D("sld");let sd=class{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(dr()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(dr("t")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.trackElement=i;const r=e.createElement("div");r.classList.add(dr("k")),this.trackElement.appendChild(r),this.knobElement=r,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}update_(){const e=J(B(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}},od=class{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new sd(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new gt(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){e.point&&this.value.setRawValue(B(J(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),t)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=pe(this.props.get("keyScale"),qe(e));t!==0&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})}onKeyUp_(e){pe(this.props.get("keyScale"),qe(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const pr=D("sldtxt");let ld=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(pr());const i=e.createElement("div");i.classList.add(pr("s")),this.sliderView_=t.sliderView,i.appendChild(this.sliderView_.element),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(pr("t")),this.textView_=t.textView,r.appendChild(this.textView_.element),this.element.appendChild(r)}},Po=class{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new od(e,{props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new gn(e,{parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new ld(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return Oe(e,null,t=>({max:t.required.number,min:t.required.number}),t=>{const i=this.sliderC_.props;return i.set("max",t.max),i.set("min",t.min),!0})}exportProps(){const e=this.sliderC_.props;return Re(null,{max:e.get("max"),min:e.get("min")})}};function ad(n){return{sliderProps:new $({keyScale:n.keyScale,max:n.max,min:n.min}),textProps:new $({formatter:ee(n.formatter),keyScale:n.keyScale,pointerScale:ee(n.pointerScale)})}}const ud={containerUnitSize:"cnt-usz"};function xo(n){return`--${ud[n]}`}function wn(n){return Xs(n)}function it(n){if(Fi(n))return ie(n,wn)}function Ge(n,e){if(!n)return;const t=[],i=Gs(n,e);i&&t.push(i);const r=Ws(n);return r&&t.push(r),new bn(t)}function Eo(n){if(n==="inline"||n==="popup")return n}function Cn(n,e){n.write(e)}const li=D("ckb");let cd=class{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(li()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("label");i.classList.add(li("l")),this.element.appendChild(i);const r=e.createElement("input");r.classList.add(li("i")),r.type="checkbox",i.appendChild(r),this.inputElement=r,t.viewProps.bindDisabled(this.inputElement);const s=e.createElement("div");s.classList.add(li("w")),i.appendChild(s);const o=ni(e,"check");s.appendChild(o),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}},dd=class{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new cd(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const t=e.currentTarget;this.value.rawValue=t.checked}};function pd(n){const e=[],t=or(n.options);return t&&e.push(t),new bn(e)}oe({id:"input-bool",type:"input",accept:(n,e)=>{if(typeof n!="boolean")return null;const t=ie(e,i=>({options:i.optional.custom(si),readonly:i.optional.constant(!1)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>go,constraint:n=>pd(n.params),writer:n=>Cn},controller:n=>{const e=n.document,t=n.value,i=n.constraint,r=i&&ii(i,ri);return r?new Kt(e,{props:new $({options:r.values.value("options")}),value:t,viewProps:n.viewProps}):new dd(e,{value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="boolean"?null:n.controller.valueController instanceof Kt?new sr(n.controller):null}});const wt=D("col");let hd=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(wt()),t.foldable.bindExpandedClass(this.element,wt(void 0,"expanded")),De(t.foldable,"completed",$t(this.element,wt(void 0,"cpl")));const i=e.createElement("div");i.classList.add(wt("h")),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(wt("s")),i.appendChild(r),this.swatchElement=r;const s=e.createElement("div");if(s.classList.add(wt("t")),i.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(wt("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}};function md(n,e,t){const i=J(n/255,0,1),r=J(e/255,0,1),s=J(t/255,0,1),o=Math.max(i,r,s),l=Math.min(i,r,s),a=o-l;let u=0,c=0;const d=(l+o)/2;return a!==0&&(c=a/(1-Math.abs(o+l-1)),i===o?u=(r-s)/a:r===o?u=2+(s-i)/a:u=4+(i-r)/a,u=u/6+(u<0?1:0)),[u*360,c*100,d*100]}function fd(n,e,t){const i=(n%360+360)%360,r=J(e/100,0,1),s=J(t/100,0,1),o=(1-Math.abs(2*s-1))*r,l=o*(1-Math.abs(i/60%2-1)),a=s-o/2;let u,c,d;return i>=0&&i<60?[u,c,d]=[o,l,0]:i>=60&&i<120?[u,c,d]=[l,o,0]:i>=120&&i<180?[u,c,d]=[0,o,l]:i>=180&&i<240?[u,c,d]=[0,l,o]:i>=240&&i<300?[u,c,d]=[l,0,o]:[u,c,d]=[o,0,l],[(u+a)*255,(c+a)*255,(d+a)*255]}function vd(n,e,t){const i=J(n/255,0,1),r=J(e/255,0,1),s=J(t/255,0,1),o=Math.max(i,r,s),l=Math.min(i,r,s),a=o-l;let u;a===0?u=0:o===i?u=60*(((r-s)/a%6+6)%6):o===r?u=60*((s-i)/a+2):u=60*((i-r)/a+4);const c=o===0?0:a/o,d=o;return[u,c*100,d*100]}function ko(n,e,t){const i=Hs(n,360),r=J(e/100,0,1),s=J(t/100,0,1),o=s*r,l=o*(1-Math.abs(i/60%2-1)),a=s-o;let u,c,d;return i>=0&&i<60?[u,c,d]=[o,l,0]:i>=60&&i<120?[u,c,d]=[l,o,0]:i>=120&&i<180?[u,c,d]=[0,o,l]:i>=180&&i<240?[u,c,d]=[0,l,o]:i>=240&&i<300?[u,c,d]=[l,0,o]:[u,c,d]=[o,0,l],[(u+a)*255,(c+a)*255,(d+a)*255]}function bd(n,e,t){const i=t+e*(100-Math.abs(2*t-100))/200;return[n,i!==0?e*(100-Math.abs(2*t-100))/i:0,t+e*(100-Math.abs(2*t-100))/(2*100)]}function _d(n,e,t){const i=100-Math.abs(t*(200-e)/100-100);return[n,i!==0?e*t/i:0,t*(200-e)/(2*100)]}function je(n){return[n[0],n[1],n[2]]}function ai(n,e){return[n[0],n[1],n[2],e]}const gd={hsl:{hsl:(n,e,t)=>[n,e,t],hsv:bd,rgb:fd},hsv:{hsl:_d,hsv:(n,e,t)=>[n,e,t],rgb:ko},rgb:{hsl:md,hsv:vd,rgb:(n,e,t)=>[n,e,t]}};function zt(n,e){return[e==="float"?1:n==="rgb"?255:360,e==="float"?1:n==="rgb"?255:100,e==="float"?1:n==="rgb"?255:100]}function wd(n,e){return n===e?e:Hs(n,e)}function Vo(n,e,t){var i;const r=zt(e,t);return[e==="rgb"?J(n[0],0,r[0]):wd(n[0],r[0]),J(n[1],0,r[1]),J(n[2],0,r[2]),J((i=n[3])!==null&&i!==void 0?i:1,0,1)]}function So(n,e,t,i){const r=zt(e,t),s=zt(e,i);return n.map((o,l)=>o/r[l]*s[l])}function Lo(n,e,t){const i=So(n,e.mode,e.type,"int"),r=gd[e.mode][t.mode](...i);return So(r,t.mode,"int",t.type)}let N=class nu{static black(){return new nu([0,0,0],"rgb")}constructor(e,t){this.type="int",this.mode=t,this.comps_=Vo(e,t,this.type)}getComponents(e){return ai(Lo(je(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const rt=D("colp");let Cd=class{constructor(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(rt()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(rt("hsv"));const r=e.createElement("div");r.classList.add(rt("sv")),this.svPaletteView_=t.svPaletteView,r.appendChild(this.svPaletteView_.element),i.appendChild(r);const s=e.createElement("div");s.classList.add(rt("h")),this.hPaletteView_=t.hPaletteView,s.appendChild(this.hPaletteView_.element),i.appendChild(s),this.element.appendChild(i);const o=e.createElement("div");if(o.classList.add(rt("rgb")),this.textsView_=t.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};const l=e.createElement("div");l.classList.add(rt("a"));const a=e.createElement("div");a.classList.add(rt("ap")),a.appendChild(this.alphaViews_.palette.element),l.appendChild(a);const u=e.createElement("div");u.classList.add(rt("at")),u.appendChild(this.alphaViews_.text.element),l.appendChild(u),this.element.appendChild(l)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(t=>t.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}};function yd(n){return n==="int"?"int":n==="float"?"float":void 0}function hr(n){return ie(n,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(yd)}),expanded:e.optional.boolean,picker:e.optional.custom(Eo),readonly:e.optional.constant(!1)}))}function Ct(n){return n?.1:1}function Ao(n){var e;return(e=n.color)===null||e===void 0?void 0:e.type}let mr=class{constructor(e,t){this.type="float",this.mode=t,this.comps_=Vo(e,t,this.type)}getComponents(e){return ai(Lo(je(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const Pd={int:(n,e)=>new N(n,e),float:(n,e)=>new mr(n,e)};function fr(n,e,t){return Pd[t](n,e)}function xd(n){return n.type==="float"}function Ed(n){return n.type==="int"}function kd(n){const e=n.getComponents(),t=zt(n.mode,"int");return new N([Math.round(B(e[0],0,1,0,t[0])),Math.round(B(e[1],0,1,0,t[1])),Math.round(B(e[2],0,1,0,t[2])),e[3]],n.mode)}function Vd(n){const e=n.getComponents(),t=zt(n.mode,"int");return new mr([B(e[0],0,t[0],0,1),B(e[1],0,t[1],0,1),B(e[2],0,t[2],0,1),e[3]],n.mode)}function le(n,e){if(n.type===e)return n;if(Ed(n)&&e==="float")return Vd(n);if(xd(n)&&e==="int")return kd(n);throw _t.shouldNeverHappen()}function Sd(n,e){return n.alpha===e.alpha&&n.mode===e.mode&&n.notation===e.notation&&n.type===e.type}function ye(n,e){const t=n.match(/^(.+)%$/);return Math.min(t?parseFloat(t[1])*.01*e:parseFloat(n),e)}const Ld={deg:n=>n,grad:n=>n*360/400,rad:n=>n*360/(2*Math.PI),turn:n=>n*360};function Mo(n){const e=n.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(n);const t=parseFloat(e[1]),i=e[2];return Ld[i](t)}function Oo(n){const e=n.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[ye(e[1],255),ye(e[2],255),ye(e[3],255)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function Ad(n){const e=Oo(n);return e?new N(e,"rgb"):null}function Ro(n){const e=n.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[ye(e[1],255),ye(e[2],255),ye(e[3],255),ye(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function Md(n){const e=Ro(n);return e?new N(e,"rgb"):null}function To(n){const e=n.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Mo(e[1]),ye(e[2],100),ye(e[3],100)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function Od(n){const e=To(n);return e?new N(e,"hsl"):null}function Do(n){const e=n.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[Mo(e[1]),ye(e[2],100),ye(e[3],100),ye(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function Rd(n){const e=Do(n);return e?new N(e,"hsl"):null}function jo(n){const e=n.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const t=n.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}function Td(n){const e=jo(n);return e?new N(e,"rgb"):null}function Bo(n){const e=n.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),B(parseInt(e[4]+e[4],16),0,255,0,1)];const t=n.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),B(parseInt(t[4],16),0,255,0,1)]:null}function Dd(n){const e=Bo(n);return e?new N(e,"rgb"):null}function No(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function Io(n){return e=>{const t=No(e);return t?fr(t,"rgb",n):null}}function Fo(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function $o(n){return e=>{const t=Fo(e);return t?fr(t,"rgb",n):null}}const jd=[{parser:jo,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:Bo,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Oo,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Ro,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:To,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Do,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:No,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Fo,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Bd(n){return jd.reduce((e,{parser:t,result:i})=>e||(t(n)?i:null),null)}function Nd(n,e="int"){const t=Bd(n);return t?t.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},t),{type:"int"}):t.notation==="func"?Object.assign(Object.assign({},t),{type:e}):null:null}function yn(n){const e=[Td,Dd,Ad,Md,Od,Rd];n==="int"&&e.push(Io("int"),$o("int")),n==="float"&&e.push(Io("float"),$o("float"));const t=td(e);return i=>{const r=t(i);return r?le(r,n):null}}function Id(n){const e=yn("int");if(typeof n!="string")return N.black();const t=e(n);return t??N.black()}function Ko(n){const e=J(Math.floor(n),0,255).toString(16);return e.length===1?`0${e}`:e}function vr(n,e="#"){const t=je(n.getComponents("rgb")).map(Ko).join("");return`${e}${t}`}function br(n,e="#"){const t=n.getComponents("rgb"),i=[t[0],t[1],t[2],t[3]*255].map(Ko).join("");return`${e}${i}`}function Uo(n){const e=de(0),t=le(n,"int");return`rgb(${je(t.getComponents("rgb")).map(r=>e(r)).join(", ")})`}function ui(n){const e=de(2),t=de(0);return`rgba(${le(n,"int").getComponents("rgb").map((s,o)=>(o===3?e:t)(s)).join(", ")})`}function Fd(n){const e=[de(0),oi,oi],t=le(n,"int");return`hsl(${je(t.getComponents("hsl")).map((r,s)=>e[s](r)).join(", ")})`}function $d(n){const e=[de(0),oi,oi,de(2)];return`hsla(${le(n,"int").getComponents("hsl").map((r,s)=>e[s](r)).join(", ")})`}function zo(n,e){const t=de(e==="float"?2:0),i=["r","g","b"],r=le(n,e);return`{${je(r.getComponents("rgb")).map((o,l)=>`${i[l]}: ${t(o)}`).join(", ")}}`}function Kd(n){return e=>zo(e,n)}function Ho(n,e){const t=de(2),i=de(e==="float"?2:0),r=["r","g","b","a"];return`{${le(n,e).getComponents("rgb").map((l,a)=>{const u=a===3?t:i;return`${r[a]}: ${u(l)}`}).join(", ")}}`}function Ud(n){return e=>Ho(e,n)}const zd=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:vr},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:br},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Uo},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:ui},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:Fd},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:$d},...["int","float"].reduce((n,e)=>[...n,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:Kd(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:Ud(e)}],[])];function qo(n){return zd.reduce((e,t)=>e||(Sd(t.format,n)?t.stringifier:null),null)}const Pn=D("apl");let Hd=class{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Pn()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(Pn("b")),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(Pn("c")),i.appendChild(r),this.colorElem_=r;const s=e.createElement("div");s.classList.add(Pn("m")),this.element.appendChild(s),this.markerElem_=s;const o=e.createElement("div");o.classList.add(Pn("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const e=this.value.rawValue,t=e.getComponents("rgb"),i=new N([t[0],t[1],t[2],0],"rgb"),r=new N([t[0],t[1],t[2],255],"rgb"),s=["to right",ui(i),ui(r)];this.colorElem_.style.background=`linear-gradient(${s.join(",")})`,this.previewElem_.style.backgroundColor=ui(e);const o=B(t[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}},qd=class{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Hd(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new gt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=e.point.x/e.bounds.width,r=this.value.rawValue,[s,o,l]=r.getComponents("hsv");this.value.setRawValue(new N([s,o,l,i],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=pe(Ct(!0),qe(e));if(t===0)return;const i=this.value.rawValue,[r,s,o,l]=i.getComponents("hsv");this.value.setRawValue(new N([r,s,o,l+t],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){pe(Ct(!0),qe(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const Ht=D("coltxt");function Gd(n){const e=n.createElement("select"),t=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(t.reduce((i,r)=>{const s=n.createElement("option");return s.textContent=r.text,s.value=r.value,i.appendChild(s),i},n.createDocumentFragment())),e}let Wd=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ht()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Ht("m")),this.modeElem_=Gd(e),this.modeElem_.classList.add(Ht("ms")),i.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);const r=e.createElement("div");r.classList.add(Ht("mm")),r.appendChild(ni(e,"dropdown")),i.appendChild(r),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(Ht("w")),this.element.appendChild(s),this.inputsElem_=s,this.inputViews_=t.inputViews,this.applyInputViews_(),He(t.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){eo(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(t=>{const i=e.createElement("div");i.classList.add(Ht("c")),i.appendChild(t.element),this.inputsElem_.appendChild(i)})}};function Yd(n){return de(n==="float"?2:0)}function Xd(n,e,t){const i=zt(n,e)[t];return new Qn({min:0,max:i})}function Jd(n,e,t){return new gn(n,{arrayPosition:t===0?"fst":t===2?"lst":"mid",parser:e.parser,props:$.fromObject({formatter:Yd(e.colorType),keyScale:Ct(!1),pointerScale:e.colorType==="float"?.01:1}),value:ee(0,{constraint:Xd(e.colorMode,e.colorType,t)}),viewProps:e.viewProps})}function Qd(n,e){const t={colorMode:e.colorMode,colorType:e.colorType,parser:nt,viewProps:e.viewProps};return[0,1,2].map(i=>{const r=Jd(n,t,i);return Ut({primary:e.value,secondary:r.value,forward(s){return le(s,e.colorType).getComponents(e.colorMode)[i]},backward(s,o){const l=e.colorMode,u=le(s,e.colorType).getComponents(l);u[i]=o;const c=fr(ai(je(u),u[3]),l,e.colorType);return le(c,"int")}}),r})}function Zd(n,e){const t=new ar(n,{parser:yn("int"),props:$.fromObject({formatter:vr}),value:ee(N.black()),viewProps:e.viewProps});return Ut({primary:e.value,secondary:t.value,forward:i=>new N(je(i.getComponents()),i.mode),backward:(i,r)=>new N(ai(je(r.getComponents(i.mode)),i.getComponents()[3]),i.mode)}),[t]}function ep(n){return n!=="hex"}let tp=class{constructor(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=ee(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new Wd(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const t=this.colorMode.rawValue;return ep(t)?Qd(e,{colorMode:t,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):Zd(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(i=>i.view)}};const _r=D("hpl");let np=class{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(_r()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(_r("c")),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(_r("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const e=this.value.rawValue,[t]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=Uo(new N([t,100,100],"hsv"));const i=B(t,0,360,0,100);this.markerElem_.style.left=`${i}%`}onValueChange_(){this.update_()}},ip=class{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new np(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new gt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=B(J(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),r=this.value.rawValue,[,s,o,l]=r.getComponents("hsv");this.value.setRawValue(new N([i,s,o,l],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=pe(Ct(!1),qe(e));if(t===0)return;const i=this.value.rawValue,[r,s,o,l]=i.getComponents("hsv");this.value.setRawValue(new N([r+t,s,o,l],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){pe(Ct(!1),qe(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const gr=D("svp"),Go=64;let rp=class{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(gr()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("canvas");i.height=Go,i.width=Go,i.classList.add(gr("c")),this.element.appendChild(i),this.canvasElement=i;const r=e.createElement("div");r.classList.add(gr("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const e=vc(this.canvasElement);if(!e)return;const i=this.value.rawValue.getComponents("hsv"),r=this.canvasElement.width,s=this.canvasElement.height,o=e.getImageData(0,0,r,s),l=o.data;for(let c=0;c<s;c++)for(let d=0;d<r;d++){const p=B(d,0,r,0,100),h=B(c,0,s,100,0),m=ko(i[0],p,h),b=(c*r+d)*4;l[b]=m[0],l[b+1]=m[1],l[b+2]=m[2],l[b+3]=255}e.putImageData(o,0,0);const a=B(i[1],0,100,0,100);this.markerElem_.style.left=`${a}%`;const u=B(i[2],0,100,100,0);this.markerElem_.style.top=`${u}%`}onValueChange_(){this.update_()}},sp=class{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new rp(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new gt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=B(e.point.x,0,e.bounds.width,0,100),r=B(e.point.y,0,e.bounds.height,100,0),[s,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new N([s,i,r,o],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){yo(e.key)&&e.preventDefault();const[t,i,r,s]=this.value.rawValue.getComponents("hsv"),o=Ct(!1),l=pe(o,qe(e)),a=pe(o,_n(e));l===0&&a===0||this.value.setRawValue(new N([t,i+l,r+a,s],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const t=Ct(!1),i=pe(t,qe(e)),r=pe(t,_n(e));i===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},op=class{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new ip(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new sp(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new qd(e,{value:this.value,viewProps:this.viewProps}),text:new gn(e,{parser:nt,props:$.fromObject({pointerScale:.01,keyScale:.1,formatter:de(2)}),value:ee(0,{constraint:new Qn({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Ut({primary:this.value,secondary:this.alphaIcs_.text.value,forward:i=>i.getComponents()[3],backward:(i,r)=>{const s=i.getComponents();return s[3]=r,new N(s,i.mode)}}),this.textsC_=new tp(e,{colorType:t.colorType,value:this.value,viewProps:this.viewProps}),this.view=new Cd(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}};const wr=D("colsw");let lp=class{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(wr()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(wr("sw")),this.element.appendChild(i),this.swatchElem_=i;const r=e.createElement("button");r.classList.add(wr("b")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=br(e)}onValueChange_(){this.update_()}},ap=class{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new lp(e,{value:this.value,viewProps:this.viewProps})}},Cr=class{constructor(e,t){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=tr.create(t.expanded),this.swatchC_=new ap(e,{value:this.value,viewProps:this.viewProps});const i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new ar(e,{parser:t.parser,props:$.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new hd(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=t.pickerLayout==="popup"?new bo(e,{viewProps:this.viewProps}):null;const r=new op(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(s=>{s.addEventListener("blur",this.onPopupChildBlur_),s.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(r.view.element),Ut({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:s=>s,backward:(s,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),nr(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=to(e);i&&t.contains(i)||i&&i===this.swatchC_.view.buttonElement&&!Gi(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}};function up(n){return je(n.getComponents("rgb")).reduce((e,t)=>e<<8|Math.floor(t)&255,0)}function cp(n){return n.getComponents("rgb").reduce((e,t,i)=>{const r=Math.floor(i===3?t*255:t)&255;return e<<8|r},0)>>>0}function dp(n){return new N([n>>16&255,n>>8&255,n&255],"rgb")}function pp(n){return new N([n>>24&255,n>>16&255,n>>8&255,B(n&255,0,255,0,1)],"rgb")}function hp(n){return typeof n!="number"?N.black():dp(n)}function mp(n){return typeof n!="number"?N.black():pp(n)}function ci(n,e){return typeof n!="object"||H(n)?!1:e in n&&typeof n[e]=="number"}function yr(n){return ci(n,"r")&&ci(n,"g")&&ci(n,"b")}function Pr(n){return yr(n)&&ci(n,"a")}function Wo(n){return yr(n)}function xr(n,e){if(n.mode!==e.mode||n.type!==e.type)return!1;const t=n.getComponents(),i=e.getComponents();for(let r=0;r<t.length;r++)if(t[r]!==i[r])return!1;return!0}function Yo(n){return"a"in n?[n.r,n.g,n.b,n.a]:[n.r,n.g,n.b]}function fp(n){const e=qo(n);return e?(t,i)=>{Cn(t,e(i))}:null}function vp(n){const e=n?cp:up;return(t,i)=>{Cn(t,e(i))}}function bp(n,e,t){const r=le(e,t).toRgbaObject();n.writeProperty("r",r.r),n.writeProperty("g",r.g),n.writeProperty("b",r.b),n.writeProperty("a",r.a)}function _p(n,e,t){const r=le(e,t).toRgbaObject();n.writeProperty("r",r.r),n.writeProperty("g",r.g),n.writeProperty("b",r.b)}function gp(n,e){return(t,i)=>{n?bp(t,i,e):_p(t,i,e)}}function wp(n){var e;return!!(!((e=n==null?void 0:n.color)===null||e===void 0)&&e.alpha)}function Cp(n){return n?e=>br(e,"0x"):e=>vr(e,"0x")}function yp(n){return"color"in n||n.view==="color"}oe({id:"input-color-number",type:"input",accept:(n,e)=>{if(typeof n!="number"||!yp(e))return null;const t=hr(e);return t?{initialValue:n,params:Object.assign(Object.assign({},t),{supportsAlpha:wp(e)})}:null},binding:{reader:n=>n.params.supportsAlpha?mp:hp,equals:xr,writer:n=>vp(n.params.supportsAlpha)},controller:n=>{var e,t;return new Cr(n.document,{colorType:"int",expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:Cp(n.params.supportsAlpha),parser:yn("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n.params.supportsAlpha,value:n.value,viewProps:n.viewProps})}});function Pp(n,e){if(!Wo(n))return le(N.black(),e);if(e==="int"){const t=Yo(n);return new N(t,"rgb")}if(e==="float"){const t=Yo(n);return new mr(t,"rgb")}return le(N.black(),"int")}function xp(n){return Pr(n)}function Ep(n){return e=>{const t=Pp(e,n);return le(t,"int")}}function kp(n,e){return t=>n?Ho(t,e):zo(t,e)}oe({id:"input-color-object",type:"input",accept:(n,e)=>{var t;if(!Wo(n))return null;const i=hr(e);return i?{initialValue:n,params:Object.assign(Object.assign({},i),{colorType:(t=Ao(e))!==null&&t!==void 0?t:"int"})}:null},binding:{reader:n=>Ep(n.params.colorType),equals:xr,writer:n=>gp(xp(n.initialValue),n.params.colorType)},controller:n=>{var e,t;const i=Pr(n.initialValue);return new Cr(n.document,{colorType:n.params.colorType,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:kp(i,n.params.colorType),parser:yn("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:i,value:n.value,viewProps:n.viewProps})}}),oe({id:"input-color-string",type:"input",accept:(n,e)=>{if(typeof n!="string"||e.view==="text")return null;const t=Nd(n,Ao(e));if(!t)return null;const i=qo(t);if(!i)return null;const r=hr(e);return r?{initialValue:n,params:Object.assign(Object.assign({},r),{format:t,stringifier:i})}:null},binding:{reader:()=>Id,equals:xr,writer:n=>{const e=fp(n.params.format);if(!e)throw _t.notBindable();return e}},controller:n=>{var e,t;return new Cr(n.document,{colorType:n.params.format.type,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:n.params.stringifier,parser:yn("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n.params.format.alpha,value:n.value,viewProps:n.viewProps})}});let Er=class{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const t=this.asm_.toComponents(e).map((i,r)=>{var s,o;return(o=(s=this.components[r])===null||s===void 0?void 0:s.constrain(i))!==null&&o!==void 0?o:i});return this.asm_.fromComponents(t)}};const Xo=D("pndtxt");let Vp=class{constructor(e,t){this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(Xo()),this.textViews.forEach(i=>{const r=e.createElement("div");r.classList.add(Xo("a")),r.appendChild(i.element),this.element.appendChild(r)})}};function Sp(n,e,t){return new gn(n,{arrayPosition:t===0?"fst":t===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[t].textProps,value:ee(0,{constraint:e.axes[t].constraint}),viewProps:e.viewProps})}let kr=class{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map((i,r)=>Sp(e,t,r)),this.acs_.forEach((i,r)=>{Ut({primary:this.value,secondary:i.value,forward:s=>t.assembly.toComponents(s)[r],backward:(s,o)=>{const l=t.assembly.toComponents(s);return l[r]=o,t.assembly.fromComponents(l)}})}),this.view=new Vp(e,{textViews:this.acs_.map(i=>i.view)})}get textControllers(){return this.acs_}},Lp=class extends Hi{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}};function Ap(n,e){const t=[],i=Gs(n,e);i&&t.push(i);const r=Ws(n);r&&t.push(r);const s=or(n.options);return s&&t.push(s),new bn(t)}oe({id:"input-number",type:"input",accept:(n,e)=>{if(typeof n!="number")return null;const t=ie(e,i=>Object.assign(Object.assign({},Xs(i)),{options:i.optional.custom(si),readonly:i.optional.constant(!1)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Us,constraint:n=>Ap(n.params,n.initialValue),writer:n=>Cn},controller:n=>{const e=n.value,t=n.constraint,i=t&&ii(t,ri);if(i)return new Kt(n.document,{props:new $({options:i.values.value("options")}),value:e,viewProps:n.viewProps});const r=Ys(n.params,e.rawValue),s=t&&ii(t,Qn);return s?new Po(n.document,Object.assign(Object.assign({},ad(Object.assign(Object.assign({},r),{keyScale:ee(r.keyScale),max:s.values.value("max"),min:s.values.value("min")}))),{parser:nt,value:e,viewProps:n.viewProps})):new gn(n.document,{parser:nt,props:$.fromObject(r),value:e,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="number"?null:n.controller.valueController instanceof Po?new Lp(n.controller):n.controller.valueController instanceof Kt?new sr(n.controller):null}});let st=class{constructor(e=0,t=0){this.x=e,this.y=t}getComponents(){return[this.x,this.y]}static isObject(e){if(H(e))return!1;const t=e.x,i=e.y;return!(typeof t!="number"||typeof i!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y}toObject(){return{x:this.x,y:this.y}}};const Jo={toComponents:n=>n.getComponents(),fromComponents:n=>new st(...n)},qt=D("p2d");let Mp=class{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(qt()),t.viewProps.bindClassModifiers(this.element),He(t.expanded,$t(this.element,qt(void 0,"expanded")));const i=e.createElement("div");i.classList.add(qt("h")),this.element.appendChild(i);const r=e.createElement("button");r.classList.add(qt("b")),r.appendChild(ni(e,"p2dpad")),t.viewProps.bindDisabled(r),i.appendChild(r),this.buttonElement=r;const s=e.createElement("div");if(s.classList.add(qt("t")),i.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(qt("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}};const ot=D("p2dp");let Op=class{constructor(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(ot()),t.layout==="popup"&&this.element.classList.add(ot(void 0,"p")),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(ot("p")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.padElement=i;const r=e.createElementNS(Te,"svg");r.classList.add(ot("g")),this.padElement.appendChild(r),this.svgElem_=r;const s=e.createElementNS(Te,"line");s.classList.add(ot("ax")),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","50%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(s);const o=e.createElementNS(Te,"line");o.classList.add(ot("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const l=e.createElementNS(Te,"line");l.classList.add(ot("l")),l.setAttributeNS(null,"x1","50%"),l.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(l),this.lineElem_=l;const a=e.createElement("div");a.classList.add(ot("m")),this.padElement.appendChild(a),this.markerElem_=a,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,t]=this.value.rawValue.getComponents(),i=this.props_.get("max"),r=B(e,-i,+i,0,100),s=B(t,-i,+i,0,100),o=this.props_.get("invertsY")?100-s:s;this.lineElem_.setAttributeNS(null,"x2",`${r}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${r}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}};function Qo(n,e,t){return[pe(e[0],qe(n)),pe(e[1],_n(n))*(t?1:-1)]}let Rp=class{constructor(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new Op(e,{layout:t.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new gt(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=this.props.get("max"),r=B(e.point.x,0,e.bounds.width,-i,+i),s=B(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-i,+i);this.value.setRawValue(new st(r,s),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){yo(e.key)&&e.preventDefault();const[t,i]=Qo(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&i===0||this.value.setRawValue(new st(this.value.rawValue.x+t,this.value.rawValue.y+i),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[t,i]=Qo(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},Tp=class{constructor(e,t){var i,r;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=tr.create(t.expanded),this.popC_=t.pickerLayout==="popup"?new bo(e,{viewProps:this.viewProps}):null;const s=new Rp(e,{layout:t.pickerLayout,props:new $({invertsY:ee(t.invertsY),max:ee(t.max),xKeyScale:t.axes[0].textProps.value("keyScale"),yKeyScale:t.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.textC_=new kr(e,{assembly:Jo,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new Mp(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("blur",this.onPadButtonBlur_),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Ut({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,l)=>l})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),nr(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=to(e);i&&t.contains(i)||i&&i===this.view.buttonElement&&!Gi(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}};function Dp(n){return st.isObject(n)?new st(n.x,n.y):new st}function jp(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y)}function Bp(n,e){return new Er({assembly:Jo,components:[Ge(Object.assign(Object.assign({},n),n.x),e.x),Ge(Object.assign(Object.assign({},n),n.y),e.y)]})}function Zo(n,e){var t,i;if(!H(n.min)||!H(n.max))return Math.max(Math.abs((t=n.min)!==null&&t!==void 0?t:0),Math.abs((i=n.max)!==null&&i!==void 0?i:0));const r=qs(n);return Math.max(Math.abs(r)*10,Math.abs(e)*10)}function Np(n,e){var t,i;const r=Zo(bt(n,(t=n.x)!==null&&t!==void 0?t:{}),e.x),s=Zo(bt(n,(i=n.y)!==null&&i!==void 0?i:{}),e.y);return Math.max(r,s)}function Ip(n){if(!("y"in n))return!1;const e=n.y;return e&&"inverted"in e?!!e.inverted:!1}oe({id:"input-point2d",type:"input",accept:(n,e)=>{if(!st.isObject(n))return null;const t=ie(e,i=>Object.assign(Object.assign({},wn(i)),{expanded:i.optional.boolean,picker:i.optional.custom(Eo),readonly:i.optional.constant(!1),x:i.optional.custom(it),y:i.optional.object(Object.assign(Object.assign({},wn(i)),{inverted:i.optional.boolean}))}));return t?{initialValue:n,params:t}:null},binding:{reader:()=>Dp,constraint:n=>Bp(n.params,n.initialValue),equals:st.equals,writer:()=>jp},controller:n=>{var e,t;const i=n.document,r=n.value,s=n.constraint,o=[n.params.x,n.params.y];return new Tp(i,{axes:r.rawValue.getComponents().map((l,a)=>{var u;return Ui({constraint:s.components[a],initialValue:l,params:bt(n.params,(u=o[a])!==null&&u!==void 0?u:{})})}),expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,invertsY:Ip(n.params),max:Np(n.params,r.rawValue),parser:nt,pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",value:r,viewProps:n.viewProps})}});let Gt=class{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(H(e))return!1;const t=e.x,i=e.y,r=e.z;return!(typeof t!="number"||typeof i!="number"||typeof r!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}toObject(){return{x:this.x,y:this.y,z:this.z}}};const el={toComponents:n=>n.getComponents(),fromComponents:n=>new Gt(...n)};function Fp(n){return Gt.isObject(n)?new Gt(n.x,n.y,n.z):new Gt}function $p(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z)}function Kp(n,e){return new Er({assembly:el,components:[Ge(Object.assign(Object.assign({},n),n.x),e.x),Ge(Object.assign(Object.assign({},n),n.y),e.y),Ge(Object.assign(Object.assign({},n),n.z),e.z)]})}oe({id:"input-point3d",type:"input",accept:(n,e)=>{if(!Gt.isObject(n))return null;const t=ie(e,i=>Object.assign(Object.assign({},wn(i)),{readonly:i.optional.constant(!1),x:i.optional.custom(it),y:i.optional.custom(it),z:i.optional.custom(it)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Fp,constraint:n=>Kp(n.params,n.initialValue),equals:Gt.equals,writer:n=>$p},controller:n=>{const e=n.value,t=n.constraint,i=[n.params.x,n.params.y,n.params.z];return new kr(n.document,{assembly:el,axes:e.rawValue.getComponents().map((r,s)=>{var o;return Ui({constraint:t.components[s],initialValue:r,params:bt(n.params,(o=i[s])!==null&&o!==void 0?o:{})})}),parser:nt,value:e,viewProps:n.viewProps})}});let Wt=class{constructor(e=0,t=0,i=0,r=0){this.x=e,this.y=t,this.z=i,this.w=r}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(H(e))return!1;const t=e.x,i=e.y,r=e.z,s=e.w;return!(typeof t!="number"||typeof i!="number"||typeof r!="number"||typeof s!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}};const tl={toComponents:n=>n.getComponents(),fromComponents:n=>new Wt(...n)};function Up(n){return Wt.isObject(n)?new Wt(n.x,n.y,n.z,n.w):new Wt}function zp(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z),n.writeProperty("w",e.w)}function Hp(n,e){return new Er({assembly:tl,components:[Ge(Object.assign(Object.assign({},n),n.x),e.x),Ge(Object.assign(Object.assign({},n),n.y),e.y),Ge(Object.assign(Object.assign({},n),n.z),e.z),Ge(Object.assign(Object.assign({},n),n.w),e.w)]})}oe({id:"input-point4d",type:"input",accept:(n,e)=>{if(!Wt.isObject(n))return null;const t=ie(e,i=>Object.assign(Object.assign({},wn(i)),{readonly:i.optional.constant(!1),w:i.optional.custom(it),x:i.optional.custom(it),y:i.optional.custom(it),z:i.optional.custom(it)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Up,constraint:n=>Hp(n.params,n.initialValue),equals:Wt.equals,writer:n=>zp},controller:n=>{const e=n.value,t=n.constraint,i=[n.params.x,n.params.y,n.params.z,n.params.w];return new kr(n.document,{assembly:tl,axes:e.rawValue.getComponents().map((r,s)=>{var o;return Ui({constraint:t.components[s],initialValue:r,params:bt(n.params,(o=i[s])!==null&&o!==void 0?o:{})})}),parser:nt,value:e,viewProps:n.viewProps})}});function qp(n){const e=[],t=or(n.options);return t&&e.push(t),new bn(e)}oe({id:"input-string",type:"input",accept:(n,e)=>{if(typeof n!="string")return null;const t=ie(e,i=>({readonly:i.optional.constant(!1),options:i.optional.custom(si)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Co,constraint:n=>qp(n.params),writer:n=>Cn},controller:n=>{const e=n.document,t=n.value,i=n.constraint,r=i&&ii(i,ri);return r?new Kt(e,{props:new $({options:r.values.value("options")}),value:t,viewProps:n.viewProps}):new ar(e,{parser:s=>s,props:$.fromObject({formatter:ur}),value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="string"?null:n.controller.valueController instanceof Kt?new sr(n.controller):null}});const di={monitor:{defaultInterval:200,defaultRows:3}},nl=D("mll");let Gp=class{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(nl()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("textarea");i.classList.add(nl("i")),i.style.height=`calc(var(${xo("containerUnitSize")}) * ${t.rows})`,i.readOnly=!0,t.viewProps.bindDisabled(i),this.element.appendChild(i),this.textareaElem_=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.textareaElem_,t=e.scrollTop===e.scrollHeight-e.clientHeight,i=[];this.value.rawValue.forEach(r=>{r!==void 0&&i.push(this.formatter_(r))}),e.textContent=i.join(`
`),t&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}},Vr=class{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Gp(e,{formatter:t.formatter,rows:t.rows,value:this.value,viewProps:this.viewProps})}};const il=D("sgl");let Wp=class{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(il()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(il("i")),i.readOnly=!0,i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=t!==void 0?this.formatter_(t):""}onValueUpdate_(){this.update_()}},Sr=class{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Wp(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}};oe({id:"monitor-bool",type:"monitor",accept:(n,e)=>{if(typeof n!="boolean")return null;const t=ie(e,i=>({readonly:i.required.constant(!0),rows:i.optional.number}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>go},controller:n=>{var e;return n.value.rawValue.length===1?new Sr(n.document,{formatter:wo,value:n.value,viewProps:n.viewProps}):new Vr(n.document,{formatter:wo,rows:(e=n.params.rows)!==null&&e!==void 0?e:di.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}});let Yp=class extends Hi{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}};const lt=D("grl");let Xp=class{constructor(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(lt()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const i=e.createElementNS(Te,"svg");i.classList.add(lt("g")),i.style.height=`calc(var(${xo("containerUnitSize")}) * ${t.rows})`,this.element.appendChild(i),this.svgElem_=i;const r=e.createElementNS(Te,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;const s=e.createElement("div");s.classList.add(lt("t"),D("tt")()),this.element.appendChild(s),this.tooltipElem_=s,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:t}=this.element,i=this.value.rawValue.length-1,r=this.props_.get("min"),s=this.props_.get("max"),o=[];this.value.rawValue.forEach((d,p)=>{if(d===void 0)return;const h=B(p,0,i,0,e),m=B(d,r,s,t,0);o.push([h,m].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const l=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(a===void 0){l.classList.remove(lt("t","a"));return}const u=B(this.cursor_.rawValue,0,i,0,e),c=B(a,r,s,t,0);l.style.left=`${u}px`,l.style.top=`${c}px`,l.textContent=`${this.formatter_(a)}`,l.classList.contains(lt("t","a"))||(l.classList.add(lt("t","a"),lt("t","in")),ti(l),l.classList.remove(lt("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}},rl=class{constructor(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=ee(-1),this.view=new Xp(e,{cursor:this.cursor_,formatter:t.formatter,rows:t.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!Gi(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const i=new gt(this.view.element);i.emitter.on("down",this.onGraphPointerDown_),i.emitter.on("move",this.onGraphPointerMove_),i.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return Oe(e,null,t=>({max:t.required.number,min:t.required.number}),t=>(this.props.set("max",t.max),this.props.set("min",t.min),!0))}exportProps(){return Re(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:t}=this.view.element;this.cursor_.rawValue=Math.floor(B(e.offsetX,0,t,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(B(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}};function Lr(n){return H(n.format)?de(2):n.format}function Jp(n){var e;return n.value.rawValue.length===1?new Sr(n.document,{formatter:Lr(n.params),value:n.value,viewProps:n.viewProps}):new Vr(n.document,{formatter:Lr(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:di.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}function Qp(n){var e,t,i;return new rl(n.document,{formatter:Lr(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:di.monitor.defaultRows,props:$.fromObject({max:(t=n.params.max)!==null&&t!==void 0?t:100,min:(i=n.params.min)!==null&&i!==void 0?i:0}),value:n.value,viewProps:n.viewProps})}function sl(n){return n.view==="graph"}oe({id:"monitor-number",type:"monitor",accept:(n,e)=>{if(typeof n!="number")return null;const t=ie(e,i=>({format:i.optional.function,max:i.optional.number,min:i.optional.number,readonly:i.required.constant(!0),rows:i.optional.number,view:i.optional.string}));return t?{initialValue:n,params:t}:null},binding:{defaultBufferSize:n=>sl(n)?64:1,reader:n=>Us},controller:n=>sl(n.params)?Qp(n):Jp(n),api:n=>n.controller.valueController instanceof rl?new Yp(n.controller):null}),oe({id:"monitor-string",type:"monitor",accept:(n,e)=>{if(typeof n!="string")return null;const t=ie(e,i=>({multiline:i.optional.boolean,readonly:i.required.constant(!0),rows:i.optional.number}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Co},controller:n=>{var e;const t=n.value;return t.rawValue.length>1||n.params.multiline?new Vr(n.document,{formatter:ur,rows:(e=n.params.rows)!==null&&e!==void 0?e:di.monitor.defaultRows,value:t,viewProps:n.viewProps}):new Sr(n.document,{formatter:ur,value:t,viewProps:n.viewProps})}});const pi={baseBackgroundColor:"hsl(230, 7%, 17%)",baseBorderRadius:"6px",baseFontFamily:"Roboto Mono, Source Code Pro, Menlo, Courier, monospace",baseShadowColor:"rgba(0, 0, 0, 0.2)",bladeBorderRadius:"2px",bladeHorizontalPadding:"4px",bladeValueWidth:"160px",buttonBackgroundColor:"hsl(230, 7%, 70%)",buttonBackgroundColorActive:"#d6d7db",buttonBackgroundColorFocus:"#c8cad0",buttonBackgroundColorHover:"#bbbcc4",buttonForegroundColor:"hsl(230, 7%, 17%)",containerBackgroundColor:"rgba(187, 188, 196, 0.1)",containerBackgroundColorActive:"rgba(187, 188, 196, 0.25)",containerBackgroundColorFocus:"rgba(187, 188, 196, 0.2)",containerBackgroundColorHover:"rgba(187, 188, 196, 0.15)",containerForegroundColor:"hsl(230, 7%, 75%)",containerHorizontalPadding:"4px",containerUnitSize:"20px",containerUnitSpacing:"4px",containerVerticalPadding:"4px",grooveForegroundColor:"rgba(187, 188, 196, 0.1)",inputBackgroundColor:"rgba(187, 188, 196, 0.1)",inputBackgroundColorActive:"rgba(187, 188, 196, 0.25)",inputBackgroundColorFocus:"rgba(187, 188, 196, 0.2)",inputBackgroundColorHover:"rgba(187, 188, 196, 0.15)",inputForegroundColor:"hsl(230, 7%, 75%)",labelForegroundColor:"rgba(187, 188, 196, 0.7)",monitorBackgroundColor:"rgba(0, 0, 0, 0.2)",monitorForegroundColor:"rgba(187, 188, 196, 0.7)",pluginImageDraggingColor:"hsla(230, 100%, 66%, 1)"};Object.keys(pi).reduce((n,e)=>(n[e]=e,n),{});const Zp=new Map([["baseBackgroundColor","--tp-base-background-color"],["baseBorderRadius","--tp-base-border-radius"],["baseFontFamily","--tp-base-font-family"],["baseShadowColor","--tp-base-shadow-color"],["bladeBorderRadius","--tp-blade-border-radius"],["bladeHorizontalPadding","--tp-blade-horizontal-padding"],["bladeValueWidth","--tp-blade-value-width"],["buttonBackgroundColor","--tp-button-background-color"],["buttonBackgroundColorActive","--tp-button-background-color-active"],["buttonBackgroundColorFocus","--tp-button-background-color-focus"],["buttonBackgroundColorHover","--tp-button-background-color-hover"],["buttonForegroundColor","--tp-button-foreground-color"],["containerBackgroundColor","--tp-container-background-color"],["containerBackgroundColorActive","--tp-container-background-color-active"],["containerBackgroundColorFocus","--tp-container-background-color-focus"],["containerBackgroundColorHover","--tp-container-background-color-hover"],["containerForegroundColor","--tp-container-foreground-color"],["containerHorizontalPadding","--tp-container-horizontal-padding"],["containerUnitSize","--tp-container-unit-size"],["containerUnitSpacing","--tp-container-unit-spacing"],["containerVerticalPadding","--tp-container-vertical-padding"],["grooveForegroundColor","--tp-groove-foreground-color"],["inputBackgroundColor","--tp-input-background-color"],["inputBackgroundColorActive","--tp-input-background-color-active"],["inputBackgroundColorFocus","--tp-input-background-color-focus"],["inputBackgroundColorHover","--tp-input-background-color-hover"],["inputForegroundColor","--tp-input-foreground-color"],["labelForegroundColor","--tp-label-foreground-color"],["monitorBackgroundColor","--tp-monitor-background-color"],["monitorForegroundColor","--tp-monitor-foreground-color"],["pluginImageDraggingColor","--tp-plugin-image-dragging-color"]]);function Ar(n){if(n!==void 0){if(typeof n=="string")return n;if(Pr(n))return`rgba(${n.r}, ${n.g}, ${n.b}, ${n.a})`;if(yr(n))return`rgb(${n.r}, ${n.g}, ${n.b})`;throw new Error(`Unknown CSS theme value object: ${n}`)}}function ol(n){if(n.startsWith("--tp-"))return n;{const e=Zp.get(n);if(e)return e;throw new Error(`Unknown Tweakpane CSS theme map variable key: "${n}"`)}}function ll(n,e){return n===void 0||n[e]===void 0?Ar(pi[e]):Ar(n[e])}function eh(n,e){const t=fc().documentElement;if(e===void 0)for(const i of Object.keys(pi)){const r=ol(i);n.style.getPropertyValue(r).length>0&&n.style.removeProperty(r)}else for(const[i,r]of Object.entries(e)){const s=ol(i),o=Ar(r),l=pi[i]||void 0,a=t.style.getPropertyValue(s)||void 0;e!==void 0&&o!==void 0&&(a&&o!==a||!1||!a&&(l&&o!==l||!1))?n.style.setProperty(s,o):n.style.getPropertyValue(s).length>0&&n.style.removeProperty(s)}}function al(n){let e,t=`${n[0]}px`;return{c(){e=Ve("div"),Y(e,"background",null),Y(e,"height",t)},m(i,r){K(i,e,r)},p(i,r){r&1&&t!==(t=`${i[0]}px`)&&Y(e,"height",t)},d(i){i&&F(e)}}}function th(n){let e,t=n[0]>0&&al(n);return{c(){t&&t.c(),e=ce()},m(i,r){t&&t.m(i,r),K(i,e,r)},p(i,[r]){i[0]>0?t?t.p(i,r):(t=al(i),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:M,o:M,d(i){i&&F(e),t&&t.d(i)}}}function ul(n){return Number.parseFloat(n.replace("px",""))}function nh(n,e,t){let i,{theme:r=void 0}=e,{keysAdd:s=[]}=e,{keysSubtract:o=[]}=e,{extra:l=void 0}=e;function a(u,c,d=0){return u.reduce((p,h)=>p+=ul(ll(r,h)),0)-c.reduce((p,h)=>p+=ul(ll(r,h)),0)+d}return n.$$set=u=>{"theme"in u&&t(1,r=u.theme),"keysAdd"in u&&t(2,s=u.keysAdd),"keysSubtract"in u&&t(3,o=u.keysSubtract),"extra"in u&&t(4,l=u.extra)},n.$$.update=()=>{n.$$.dirty&28&&t(0,i=a(s,o,l))},[i,r,s,o,l]}class yt extends se{constructor(e){super(),re(this,e,nh,th,ne,{theme:1,keysAdd:2,keysSubtract:3,extra:4})}}function Mr(n){return n.constructor.name==="Pane"}function Or(n,e,t){return Math.min(Math.max(n,e),t)}function Rr(n){let e=0,t=n;for(;(t=t.previousElementSibling)!==null;)e++;return e}function at(n,...e){for(const t of e)t in n&&delete n[t];return n}function cl(n){console.log(n.detail),n.isTrusted&&n.stopPropagation()}function ih(n,e,t,i){if(e){const r=e.querySelector(`.${t}`);if(r!==void 0){const s=i?e.querySelector(`.${i}`):void 0;n?(r.removeEventListener("click",cl,{capture:!0}),r.style.cursor="pointer",s&&(s.style.display="block")):(r.addEventListener("click",cl,{capture:!0}),r.style.cursor="default",s&&(s.style.display="none"))}}else console.warn(`Title bar element not found with class "${t}"`)}function rh(n){var e,t,i,r;return(r=(i=(t=(e=n.controller.valueController)==null?void 0:e.foldable_)==null?void 0:t.valMap_)==null?void 0:i.expanded)==null?void 0:r.value_}function sh(n){var t,i,r,s,o,l,a;return((s=(r=(i=(t=n.controller)==null?void 0:t.valueController)==null?void 0:i.view)==null?void 0:r.swatchElement)==null?void 0:s.querySelector("button"))??((a=(l=(o=n.controller)==null?void 0:o.valueController)==null?void 0:l.view)==null?void 0:a.buttonElement)}const Yt=[];function dl(n,e=M){let t;const i=new Set;function r(l){if(ne(n,l)&&(n=l,t)){const a=!Yt.length;for(const u of i)u[1](),Yt.push(u,n);if(a){for(let u=0;u<Yt.length;u+=2)Yt[u][0](Yt[u+1]);Yt.length=0}}}function s(l){r(l(n))}function o(l,a=M){const u=[l,a];return i.add(u),i.size===1&&(t=e(r,s)||M),l(n),()=>{i.delete(u),i.size===0&&t&&(t(),t=null)}}return{set:r,update:s,subscribe:o}}/*! Tweakpane 4.0.2 (c) 2016 cocopon, licensed under the MIT license. */function Pg(n){return n}function U(n){return n==null}function Tr(n){return n!==null&&typeof n=="object"}function Dr(n){return n!==null&&typeof n=="object"}function oh(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function Pt(n,e){return Array.from(new Set([...Object.keys(n),...Object.keys(e)])).reduce((i,r)=>{const s=n[r],o=e[r];return Dr(s)&&Dr(o)?Object.assign(Object.assign({},i),{[r]:Pt(s,o)}):Object.assign(Object.assign({},i),{[r]:r in e?o:s})},{})}function jr(n){return Tr(n)?"target"in n:!1}const lh={alreadydisposed:()=>"View has been already disposed",invalidparams:n=>`Invalid parameters for '${n.name}'`,nomatchingcontroller:n=>`No matching controller for '${n.key}'`,nomatchingview:n=>`No matching view for '${JSON.stringify(n.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:n=>`Not compatible with  plugin '${n.id}'`,propertynotfound:n=>`Property '${n.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class G{static alreadyDisposed(){return new G({type:"alreadydisposed"})}static notBindable(){return new G({type:"notbindable"})}static notCompatible(e,t){return new G({type:"notcompatible",context:{id:`${e}.${t}`}})}static propertyNotFound(e){return new G({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new G({type:"shouldneverhappen"})}constructor(e){var t;this.message=(t=lh[e.type](e.context))!==null&&t!==void 0?t:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class hi{constructor(e,t){this.obj_=e,this.key=t}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,t){const i=this.read();if(!hi.isBindable(i))throw G.notBindable();if(!(e in i))throw G.propertyNotFound(e);i[e]=t}}class X{constructor(){this.observers_={}}on(e,t){let i=this.observers_[e];return i||(i=this.observers_[e]=[]),i.push({handler:t}),this}off(e,t){const i=this.observers_[e];return i&&(this.observers_[e]=i.filter(r=>r.handler!==t)),this}emit(e,t){const i=this.observers_[e];i&&i.forEach(r=>{r.handler(t)})}}class ah{constructor(e,t){var i;this.constraint_=t==null?void 0:t.constraint,this.equals_=(i=t==null?void 0:t.equals)!==null&&i!==void 0?i:(r,s)=>r===s,this.emitter=new X,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const i=t??{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(e):e,s=this.rawValue_;this.equals_(s,r)&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:i,previousRawValue:s,rawValue:r,sender:this}))}}class uh{constructor(e){this.emitter=new X,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,t){const i=t??{forceEmit:!1,last:!0},r=this.value_;r===e&&!i.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:i,previousRawValue:r,rawValue:this.value_,sender:this}))}}class ch{constructor(e){this.emitter=new X,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function z(n,e){const t=e==null?void 0:e.constraint,i=e==null?void 0:e.equals;return!t&&!i?new uh(n):new ah(n,e)}function dh(n){return[new ch(n),(e,t)=>{n.setRawValue(e,t)}]}class V{constructor(e){this.emitter=new X,this.valMap_=e;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",()=>{this.emitter.emit("change",{key:t,sender:this})})}static createCore(e){return Object.keys(e).reduce((i,r)=>Object.assign(i,{[r]:z(e[r])}),{})}static fromObject(e){const t=this.createCore(e);return new V(t)}get(e){return this.valMap_[e].rawValue}set(e,t){this.valMap_[e].rawValue=t}value(e){return this.valMap_[e]}}class xn{constructor(e){this.values=V.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),i=this.values.get("min");return Math.min(Math.max(e,i),t)}}class ph{constructor(e){this.values=V.fromObject({max:e.max,min:e.min})}constrain(e){const t=this.values.get("max"),i=this.values.get("min");let r=e;return U(i)||(r=Math.max(r,i)),U(t)||(r=Math.min(r,t)),r}}class hh{constructor(e,t=0){this.step=e,this.origin=t}constrain(e){const t=this.origin%this.step,i=Math.round((e-t)/this.step);return t+i*this.step}}class mh{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const fh={"**":(n,e)=>Math.pow(n,e),"*":(n,e)=>n*e,"/":(n,e)=>n/e,"%":(n,e)=>n%e,"+":(n,e)=>n+e,"-":(n,e)=>n-e,"<<":(n,e)=>n<<e,">>":(n,e)=>n>>e,">>>":(n,e)=>n>>>e,"&":(n,e)=>n&e,"^":(n,e)=>n^e,"|":(n,e)=>n|e};class vh{constructor(e,t,i){this.left=t,this.operator=e,this.right=i}evaluate(){const e=fh[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const bh={"+":n=>n,"-":n=>-n,"~":n=>~n};class _h{constructor(e,t){this.operator=e,this.expression=t}evaluate(){const e=bh[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Br(n){return(e,t)=>{for(let i=0;i<n.length;i++){const r=n[i](e,t);if(r!=="")return r}return""}}function En(n,e){var t;const i=n.substr(e).match(/^\s+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function gh(n,e){const t=n.substr(e,1);return t.match(/^[1-9]$/)?t:""}function kn(n,e){var t;const i=n.substr(e).match(/^[0-9]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function wh(n,e){const t=kn(n,e);if(t!=="")return t;const i=n.substr(e,1);if(e+=1,i!=="-"&&i!=="+")return"";const r=kn(n,e);return r===""?"":i+r}function Nr(n,e){const t=n.substr(e,1);if(e+=1,t.toLowerCase()!=="e")return"";const i=wh(n,e);return i===""?"":t+i}function pl(n,e){const t=n.substr(e,1);if(t==="0")return t;const i=gh(n,e);return e+=i.length,i===""?"":i+kn(n,e)}function Ch(n,e){const t=pl(n,e);if(e+=t.length,t==="")return"";const i=n.substr(e,1);if(e+=i.length,i!==".")return"";const r=kn(n,e);return e+=r.length,t+i+r+Nr(n,e)}function yh(n,e){const t=n.substr(e,1);if(e+=t.length,t!==".")return"";const i=kn(n,e);return e+=i.length,i===""?"":t+i+Nr(n,e)}function Ph(n,e){const t=pl(n,e);return e+=t.length,t===""?"":t+Nr(n,e)}const xh=Br([Ch,yh,Ph]);function Eh(n,e){var t;const i=n.substr(e).match(/^[01]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function kh(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0b")return"";const i=Eh(n,e);return i===""?"":t+i}function Vh(n,e){var t;const i=n.substr(e).match(/^[0-7]+/);return(t=i&&i[0])!==null&&t!==void 0?t:""}function Sh(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0o")return"";const i=Vh(n,e);return i===""?"":t+i}function Lh(n,e){var t;const i=n.substr(e).match(/^[0-9a-f]+/i);return(t=i&&i[0])!==null&&t!==void 0?t:""}function Ah(n,e){const t=n.substr(e,2);if(e+=t.length,t.toLowerCase()!=="0x")return"";const i=Lh(n,e);return i===""?"":t+i}const Mh=Br([kh,Sh,Ah]),Oh=Br([Mh,xh]);function Rh(n,e){const t=Oh(n,e);return e+=t.length,t===""?null:{evaluable:new mh(t),cursor:e}}function Th(n,e){const t=n.substr(e,1);if(e+=t.length,t!=="(")return null;const i=ml(n,e);if(!i)return null;e=i.cursor,e+=En(n,e).length;const r=n.substr(e,1);return e+=r.length,r!==")"?null:{evaluable:i.evaluable,cursor:e}}function Dh(n,e){var t;return(t=Rh(n,e))!==null&&t!==void 0?t:Th(n,e)}function hl(n,e){const t=Dh(n,e);if(t)return t;const i=n.substr(e,1);if(e+=i.length,i!=="+"&&i!=="-"&&i!=="~")return null;const r=hl(n,e);return r?(e=r.cursor,{cursor:e,evaluable:new _h(i,r.evaluable)}):null}function jh(n,e,t){t+=En(e,t).length;const i=n.filter(r=>e.startsWith(r,t))[0];return i?(t+=i.length,t+=En(e,t).length,{cursor:t,operator:i}):null}function Bh(n,e){return(t,i)=>{const r=n(t,i);if(!r)return null;i=r.cursor;let s=r.evaluable;for(;;){const o=jh(e,t,i);if(!o)break;i=o.cursor;const l=n(t,i);if(!l)return null;i=l.cursor,s=new vh(o.operator,s,l.evaluable)}return s?{cursor:i,evaluable:s}:null}}const Nh=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((n,e)=>Bh(n,e),hl);function ml(n,e){return e+=En(n,e).length,Nh(n,e)}function Ih(n){const e=ml(n,0);return!e||e.cursor+En(n,e.cursor).length!==n.length?null:e.evaluable}function We(n){var e;const t=Ih(n);return(e=t==null?void 0:t.evaluate())!==null&&e!==void 0?e:null}function fl(n){if(typeof n=="number")return n;if(typeof n=="string"){const e=We(n);if(!U(e))return e}return 0}function Fh(n){return String(n)}function he(n){return e=>e.toFixed(Math.max(Math.min(n,20),0))}function I(n,e,t,i,r){const s=(n-e)/(t-e);return i+s*(r-i)}function vl(n){return String(n.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Q(n,e,t){return Math.min(Math.max(n,e),t)}function bl(n,e){return(n%e+e)%e}function $h(n,e){return U(n.step)?Math.max(vl(e),2):vl(n.step)}function _l(n){var e;return(e=n.step)!==null&&e!==void 0?e:1}function gl(n,e){var t;const i=Math.abs((t=n.step)!==null&&t!==void 0?t:e);return i===0?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}function wl(n,e){return U(n.step)?null:new hh(n.step,e)}function Cl(n){return!U(n.max)&&!U(n.min)?new xn({max:n.max,min:n.min}):!U(n.max)||!U(n.min)?new ph({max:n.max,min:n.min}):null}function yl(n,e){var t,i,r;return{formatter:(t=n.format)!==null&&t!==void 0?t:he($h(n,e)),keyScale:(i=n.keyScale)!==null&&i!==void 0?i:_l(n),pointerScale:(r=n.pointerScale)!==null&&r!==void 0?r:gl(n,e)}}function Pl(n){return{format:n.optional.function,keyScale:n.optional.number,max:n.optional.number,min:n.optional.number,pointerScale:n.optional.number,step:n.optional.number}}function Ir(n){return{constraint:n.constraint,textProps:V.fromObject(yl(n.params,n.initialValue))}}class xt{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class mi{constructor(e){this.target=e}}class Vn extends mi{constructor(e,t,i){super(e),this.value=t,this.last=i??!0}}class Kh extends mi{constructor(e,t){super(e),this.expanded=t}}class Uh extends mi{constructor(e,t){super(e),this.index=t}}class Sn extends xt{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new X,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const t=this.controller.value;this.emitter_.emit("change",new Vn(this,t.binding.target.read(),e.options.last))}}class zh{constructor(e,t){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=t,this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new X}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,t){this.value_.setRawValue(e,t)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function Hh(n){if(!("binding"in n))return!1;const e=n.binding;return jr(e)&&"read"in e&&"write"in e}function qh(n,e){const i=Object.keys(e).reduce((r,s)=>{if(r===void 0)return;const o=e[s],l=o(n[s]);return l.succeeded?Object.assign(Object.assign({},r),{[s]:l.value}):void 0},{});return i}function Gh(n,e){return n.reduce((t,i)=>{if(t===void 0)return;const r=e(i);if(!(!r.succeeded||r.value===void 0))return[...t,r.value]},[])}function Wh(n){return n===null?!1:typeof n=="object"}function Ye(n){return e=>t=>{if(!e&&t===void 0)return{succeeded:!1,value:void 0};if(e&&t===void 0)return{succeeded:!0,value:void 0};const i=n(t);return i!==void 0?{succeeded:!0,value:i}:{succeeded:!1,value:void 0}}}function xl(n){return{custom:e=>Ye(e)(n),boolean:Ye(e=>typeof e=="boolean"?e:void 0)(n),number:Ye(e=>typeof e=="number"?e:void 0)(n),string:Ye(e=>typeof e=="string"?e:void 0)(n),function:Ye(e=>typeof e=="function"?e:void 0)(n),constant:e=>Ye(t=>t===e?e:void 0)(n),raw:Ye(e=>e)(n),object:e=>Ye(t=>{if(Wh(t))return qh(t,e)})(n),array:e=>Ye(t=>{if(Array.isArray(t))return Gh(t,e)})(n)}}const Fr={optional:xl(!0),required:xl(!1)};function q(n,e){const t=e(Fr),i=Fr.required.object(t)(n);return i.succeeded?i.value:void 0}function ve(n,e,t,i){if(e&&!e(n))return!1;const r=q(n,t);return r?i(r):!1}function be(n,e){var t;return Pt((t=n==null?void 0:n())!==null&&t!==void 0?t:{},e)}function Et(n){return"value"in n}function El(n){if(!Tr(n)||!("binding"in n))return!1;const e=n.binding;return jr(e)}const Be="http://www.w3.org/2000/svg";function fi(n){n.offsetHeight}function Yh(n,e){const t=n.style.transition;n.style.transition="none",e(),n.style.transition=t}function $r(n){return n.ontouchstart!==void 0}function Xh(){return globalThis}function Jh(){return Xh().document}function Qh(n){const e=n.ownerDocument.defaultView;return e&&"document"in e?n.getContext("2d",{willReadFrequently:!0}):null}const Zh={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function vi(n,e){const t=n.createElementNS(Be,"svg");return t.innerHTML=Zh[e],t}function kl(n,e,t){n.insertBefore(e,n.children[t])}function Kr(n){n.parentElement&&n.parentElement.removeChild(n)}function Vl(n){for(;n.children.length>0;)n.removeChild(n.children[0])}function em(n){for(;n.childNodes.length>0;)n.removeChild(n.childNodes[0])}function Sl(n){return n.relatedTarget?n.relatedTarget:"explicitOriginalTarget"in n?n.explicitOriginalTarget:null}function Xe(n,e){n.emitter.on("change",t=>{e(t.rawValue)}),e(n.rawValue)}function Ne(n,e,t){Xe(n.value(e),t)}const tm="tp";function A(n){return(t,i)=>[tm,"-",n,"v",t?`_${t}`:"",i?`-${i}`:""].join("")}const Ln=A("lbl");function nm(n,e){const t=n.createDocumentFragment();return e.split(`
`).map(r=>n.createTextNode(r)).forEach((r,s)=>{s>0&&t.appendChild(n.createElement("br")),t.appendChild(r)}),t}class Ll{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Ln()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Ln("l")),Ne(t.props,"label",s=>{U(s)?this.element.classList.add(Ln(void 0,"nol")):(this.element.classList.remove(Ln(void 0,"nol")),em(i),i.appendChild(nm(e,s)))}),this.element.appendChild(i),this.labelElement=i;const r=e.createElement("div");r.classList.add(Ln("v")),this.element.appendChild(r),this.valueElement=r}}class Al{constructor(e,t){this.props=t.props,this.valueController=t.valueController,this.viewProps=t.valueController.viewProps,this.view=new Ll(e,{props:t.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return ve(e,null,t=>({label:t.optional.string}),t=>(this.props.set("label",t.label),!0))}exportProps(){return be(null,{label:this.props.get("label")})}}function im(){return["veryfirst","first","last","verylast"]}const Ml=A(""),Ol={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class bi{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const t=this.view.element;this.blade.value("positions").emitter.on("change",()=>{im().forEach(i=>{t.classList.remove(Ml(void 0,Ol[i]))}),this.blade.get("positions").forEach(i=>{t.classList.add(Ml(void 0,Ol[i]))})}),this.viewProps.handleDispose(()=>{Kr(t)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return ve(e,null,t=>({disabled:t.required.boolean,hidden:t.required.boolean}),t=>(this.viewProps.importState(t),!0))}exportState(){return be(null,Object.assign({},this.viewProps.exportState()))}}class kt extends bi{constructor(e,t){if(t.value!==t.valueController.value)throw G.shouldNeverHappen();const i=t.valueController.viewProps,r=new Al(e,{blade:t.blade,props:t.props,valueController:t.valueController});super(Object.assign(Object.assign({},t),{view:new Ll(e,{props:t.props,viewProps:i}),viewProps:i})),this.labelController=r,this.value=t.value,this.valueController=t.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return ve(e,t=>{var i,r,s;return super.importState(t)&&this.labelController.importProps(t)&&((s=(r=(i=this.valueController).importProps)===null||r===void 0?void 0:r.call(i,e))!==null&&s!==void 0?s:!0)},t=>({value:t.optional.raw}),t=>(t.value&&(this.value.rawValue=t.value),!0))}exportState(){var e,t,i;return be(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(i=(t=(e=this.valueController).exportProps)===null||t===void 0?void 0:t.call(e))!==null&&i!==void 0?i:{}))}}function Rl(n){const e=Object.assign({},n);return delete e.value,e}class Tl extends kt{constructor(e,t){super(e,t),this.tag=t.tag}importState(e){return ve(e,t=>super.importState(Rl(e)),t=>({tag:t.optional.string}),t=>(this.tag=t.tag,!0))}exportState(){return be(()=>Rl(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function rm(n){return Et(n)&&El(n.value)}class sm extends Tl{importState(e){return ve(e,t=>super.importState(t),t=>({binding:t.required.object({value:t.required.raw})}),t=>(this.value.binding.inject(t.binding.value),this.value.fetch(),!0))}}function om(n){return Et(n)&&Hh(n.value)}function Dl(n,e){for(;n.length<e;)n.push(void 0)}function lm(n){const e=[];return Dl(e,n),e}function am(n){const e=n.indexOf(void 0);return e<0?n:n.slice(0,e)}function um(n,e){const t=[...am(n),e];return t.length>n.length?t.splice(0,t.length-n.length):Dl(t,n.length),t}class cm{constructor(e){this.emitter=new X,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e.binding,this.value_=z(lm(e.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,t){this.value_.setRawValue(e,t)}fetch(){this.value_.rawValue=um(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function dm(n){if(!("binding"in n))return!1;const e=n.binding;return jr(e)&&"read"in e&&!("write"in e)}class pm extends Tl{exportState(){return be(()=>super.exportState(),{binding:{readonly:!0}})}}function hm(n){return Et(n)&&dm(n.value)}class mm extends xt{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,t){const i=t.bind(this);return this.controller.buttonController.emitter.on(e,()=>{i(new mi(this))}),this}}function fm(n,e,t){t?n.classList.add(e):n.classList.remove(e)}function Xt(n,e){return t=>{fm(n,e,t)}}function Ur(n,e){Xe(n,t=>{e.textContent=t??""})}const zr=A("btn");class vm{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(zr()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("button");i.classList.add(zr("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const r=e.createElement("div");r.classList.add(zr("t")),Ur(t.props.value("title"),r),this.buttonElement.appendChild(r)}}class bm{constructor(e,t){this.emitter=new X,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new vm(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return ve(e,null,t=>({title:t.optional.string}),t=>(this.props.set("title",t.title),!0))}exportProps(){return be(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}}class jl extends bi{constructor(e,t){const i=new bm(e,{props:t.buttonProps,viewProps:t.viewProps}),r=new Al(e,{blade:t.blade,props:t.labelProps,valueController:i});super({blade:t.blade,view:r.view,viewProps:t.viewProps}),this.buttonController=i,this.labelController=r}importState(e){return ve(e,t=>super.importState(t)&&this.buttonController.importProps(t)&&this.labelController.importProps(t),()=>({}),()=>!0)}exportState(){return be(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class Bl{constructor(e){const[t,i]=e.split("-"),r=t.split(".");this.major=parseInt(r[0],10),this.minor=parseInt(r[1],10),this.patch=parseInt(r[2],10),this.prerelease=i??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const Jt=new Bl("2.0.2");function ae(n){return Object.assign({core:Jt},n)}const _m=ae({id:"button",type:"blade",accept(n){const e=q(n,t=>({title:t.required.string,view:t.required.constant("button"),label:t.optional.string}));return e?{params:e}:null},controller(n){return new jl(n.document,{blade:n.blade,buttonProps:V.fromObject({title:n.params.title}),labelProps:V.fromObject({label:n.params.label}),viewProps:n.viewProps})},api(n){return n.controller instanceof jl?new mm(n.controller):null}});function gm(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function wm(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function Cm(n,e){return n.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function ym(n){return Tr(n)?"refresh"in n&&typeof n.refresh=="function":!1}function Pm(n,e){if(!hi.isBindable(n))throw G.notBindable();return new hi(n,e)}class xm{constructor(e,t){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new X,this.pool_=t,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,t,i){const r=i??{},s=this.controller_.element.ownerDocument,o=this.pool_.createBinding(s,Pm(e,t),r),l=this.pool_.createBindingApi(o);return this.add(l,r.index)}addFolder(e){return wm(this,e)}addButton(e){return gm(this,e)}addTab(e){return Cm(this,e)}add(e,t){const i=e.controller;return this.controller_.rack.add(i,t),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const t=this.controller_.element.ownerDocument,i=this.pool_.createBlade(t,e),r=this.pool_.createApi(i);return this.add(r,e.index)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)}),this}refresh(){this.children.forEach(e=>{ym(e)&&e.refresh()})}onRackValueChange_(e){const t=e.bladeController,i=this.pool_.createApi(t),r=El(t.value)?t.value.binding:null;this.emitter_.emit("change",new Vn(i,r?r.target.read():t.value.rawValue,e.options.last))}}class Hr extends xt{constructor(e,t){super(e),this.rackApi_=new xm(e.rackController,t)}refresh(){this.rackApi_.refresh()}}class qr extends bi{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return ve(e,t=>super.importState(t),t=>({children:t.required.array(t.required.raw)}),t=>this.rackController.rack.children.every((i,r)=>i.importState(t.children[r])))}exportState(){return be(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function Gr(n){return"rackController"in n}class Em{constructor(e){this.emitter=new X,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const t of this.allItems())if(e(t))return t;return null}includes(e){return this.cache_.has(e)}add(e,t){if(this.includes(e))throw G.shouldNeverHappen();const i=t!==void 0?t:this.items_.length;this.items_.splice(i,0,e),this.cache_.add(e);const r=this.extract_(e);r&&(r.emitter.on("add",this.onSubListAdd_),r.emitter.on("remove",this.onSubListRemove_),r.allItems().forEach(s=>{this.cache_.add(s)})),this.emitter.emit("add",{index:i,item:e,root:this,target:this})}remove(e){const t=this.items_.indexOf(e);if(t<0)return;this.items_.splice(t,1),this.cache_.delete(e);const i=this.extract_(e);i&&(i.allItems().forEach(r=>{this.cache_.delete(r)}),i.emitter.off("add",this.onSubListAdd_),i.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:t,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function km(n,e){for(let t=0;t<n.length;t++){const i=n[t];if(Et(i)&&i.value===e)return i}return null}function Vm(n){return Gr(n)?n.rackController.rack.bcSet_:null}class Sm{constructor(e){var t,i;this.emitter=new X,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(t=e.blade)!==null&&t!==void 0?t:null,(i=this.blade_)===null||i===void 0||i.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new Em(Vm),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,t){var i;(i=e.parent)===null||i===void 0||i.remove(e),e.parent=this,this.bcSet_.add(e,t)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:t,sender:this}),!t)return;const i=e.item;if(i.viewProps.emitter.on("change",this.onChildViewPropsChange_),i.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),i.viewProps.handleDispose(this.onChildDispose_),Et(i))i.value.emitter.on("change",this.onChildValueChange_);else if(Gr(i)){const r=i.rackController.rack;if(r){const s=r.emitter;s.on("layout",this.onRackLayout_),s.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const t=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:t,sender:this}),!t)return;const i=e.item;if(Et(i))i.value.emitter.off("change",this.onChildValueChange_);else if(Gr(i)){const r=i.rackController.rack;if(r){const s=r.emitter;s.off("layout",this.onRackLayout_),s.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(r=>!r.viewProps.get("hidden")),t=e[0],i=e[e.length-1];this.bcSet_.items.forEach(r=>{const s=[];r===t&&(s.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&s.push("veryfirst")),r===i&&(s.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&s.push("verylast")),r.blade.set("positions",s)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(t=>t.viewProps.get("disposed")).forEach(t=>{this.bcSet_.remove(t)})}onChildValueChange_(e){const t=km(this.find(Et),e.sender);if(!t)throw G.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:t,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Wr{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const t=new Sm({blade:e.root?void 0:e.blade,viewProps:e.viewProps});t.emitter.on("add",this.onRackAdd_),t.emitter.on("remove",this.onRackRemove_),this.rack=t,this.viewProps.handleDispose(()=>{for(let i=this.rack.children.length-1;i>=0;i--)this.rack.children[i].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&kl(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&Kr(e.bladeController.view.element)}}function Qt(){return new V({positions:z([],{equals:oh})})}class An extends V{constructor(e){super(e)}static create(e){const t={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},i=V.createCore(t);return new An(i)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!U(e)?`${e}px`:"auto"}bindExpandedClass(e,t){const i=()=>{this.styleExpanded?e.classList.add(t):e.classList.remove(t)};Ne(this,"expanded",i),Ne(this,"temporaryExpanded",i)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function Lm(n,e){let t=0;return Yh(e,()=>{n.set("expandedHeight",null),n.set("temporaryExpanded",!0),fi(e),t=e.clientHeight,n.set("temporaryExpanded",null),fi(e)}),t}function Nl(n,e){e.style.height=n.styleHeight}function Yr(n,e){n.value("expanded").emitter.on("beforechange",()=>{if(n.set("completed",!1),U(n.get("expandedHeight"))){const t=Lm(n,e);t>0&&n.set("expandedHeight",t)}n.set("shouldFixHeight",!0),fi(e)}),n.emitter.on("change",()=>{Nl(n,e)}),Nl(n,e),e.addEventListener("transitionend",t=>{t.propertyName==="height"&&n.cleanUpTransition()})}class Il extends Hr{constructor(e,t){super(e,t),this.emitter_=new X,this.controller.foldable.value("expanded").emitter.on("change",i=>{this.emitter_.emit("fold",new Kh(this,i.sender.rawValue))}),this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,t,i){return this.rackApi_.addBinding(e,t,i)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){return this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)}),this}}const Fl=A("cnt");class Am{constructor(e,t){var i;this.className_=A((i=t.viewName)!==null&&i!==void 0?i:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),Fl()),t.viewProps.bindClassModifiers(this.element),this.foldable_=t.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Ne(this.foldable_,"completed",Xt(this.element,this.className_(void 0,"cpl")));const r=e.createElement("button");r.classList.add(this.className_("b")),Ne(t.props,"title",u=>{U(u)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const s=e.createElement("div");s.classList.add(this.className_("i")),this.element.appendChild(s);const o=e.createElement("div");o.classList.add(this.className_("t")),Ur(t.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o;const l=e.createElement("div");l.classList.add(this.className_("m")),this.buttonElement.appendChild(l);const a=e.createElement("div");a.classList.add(this.className_("c")),this.element.appendChild(a),this.containerElement=a}}class Xr extends qr{constructor(e,t){var i;const r=An.create((i=t.expanded)!==null&&i!==void 0?i:!0),s=new Am(e,{foldable:r,props:t.props,viewName:t.root?"rot":void 0,viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new Wr({blade:t.blade,element:s.containerElement,root:t.root,viewProps:t.viewProps}),view:s})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=t.props,this.foldable=r,Yr(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return ve(e,t=>super.importState(t),t=>({expanded:t.required.boolean,title:t.optional.string}),t=>(this.foldable.set("expanded",t.expanded),this.props.set("title",t.title),!0))}exportState(){return be(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const Mm=ae({id:"folder",type:"blade",accept(n){const e=q(n,t=>({title:t.required.string,view:t.required.constant("folder"),expanded:t.optional.boolean}));return e?{params:e}:null},controller(n){return new Xr(n.document,{blade:n.blade,expanded:n.params.expanded,props:V.fromObject({title:n.params.title}),viewProps:n.viewProps})},api(n){return n.controller instanceof Xr?new Il(n.controller,n.pool):null}}),Om=A("");function $l(n,e){return Xt(n,Om(void 0,e))}class Je extends V{constructor(e){var t;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=dh(z(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var t,i,r;const s=e??{};return new Je(V.createCore({disabled:(t=s.disabled)!==null&&t!==void 0?t:!1,disposed:!1,hidden:(i=s.hidden)!==null&&i!==void 0?i:!1,parent:(r=s.parent)!==null&&r!==void 0?r:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){Xe(this.globalDisabled_,$l(e,"disabled")),Ne(this,"hidden",$l(e,"hidden"))}bindDisabled(e){Xe(this.globalDisabled_,t=>{e.disabled=t})}bindTabIndex(e){Xe(this.globalDisabled_,t=>{e.tabIndex=t?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",t=>{t&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var t;const i=e.previousRawValue;i==null||i.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(t=this.get("parent"))===null||t===void 0||t.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const Kl=A("tbp");class Rm{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Kl()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(Kl("c")),this.element.appendChild(i),this.containerElement=i}}const Mn=A("tbi");class Tm{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Mn()),t.viewProps.bindClassModifiers(this.element),Ne(t.props,"selected",s=>{s?this.element.classList.add(Mn(void 0,"sel")):this.element.classList.remove(Mn(void 0,"sel"))});const i=e.createElement("button");i.classList.add(Mn("b")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const r=e.createElement("div");r.classList.add(Mn("t")),Ur(t.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r}}class Dm{constructor(e,t){this.emitter=new X,this.onClick_=this.onClick_.bind(this),this.props=t.props,this.viewProps=t.viewProps,this.view=new Tm(e,{props:t.props,viewProps:t.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class Jr extends qr{constructor(e,t){const i=new Rm(e,{viewProps:t.viewProps});super(Object.assign(Object.assign({},t),{rackController:new Wr({blade:t.blade,element:i.containerElement,viewProps:t.viewProps}),view:i})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new Dm(e,{props:t.itemProps,viewProps:Je.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=t.props,Ne(this.props,"selected",r=>{this.itemController.props.set("selected",r),this.viewProps.set("hidden",!r)})}get itemController(){return this.ic_}importState(e){return ve(e,t=>super.importState(t),t=>({selected:t.required.boolean,title:t.required.string}),t=>(this.ic_.props.set("selected",t.selected),this.ic_.props.set("title",t.title),!0))}exportState(){return be(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class jm extends Hr{constructor(e,t){super(e,t),this.emitter_=new X,this.onSelect_=this.onSelect_.bind(this),this.pool_=t,this.rackApi_.on("change",i=>{this.emitter_.emit("change",i)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const t=this.controller.view.element.ownerDocument,i=new Jr(t,{blade:Qt(),itemProps:V.fromObject({selected:!1,title:e.title}),props:V.fromObject({selected:!1}),viewProps:Je.create()}),r=this.pool_.createApi(i);return this.rackApi_.add(r,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)}),this}onSelect_(e){this.emitter_.emit("select",new Uh(this,e.rawValue))}}class Bm extends Hr{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,t){this.rackApi_.add(e,t)}remove(e){this.rackApi_.remove(e)}addBinding(e,t,i){return this.rackApi_.addBinding(e,t,i)}addBlade(e){return this.rackApi_.addBlade(e)}}const Ul=-1;class Nm{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=z(!0),this.selectedIndex=z(Ul),this.items_=[]}add(e,t){const i=t??this.items_.length;this.items_.splice(i,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const t=this.items_.indexOf(e);t<0||(this.items_.splice(t,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Ul,this.empty.rawValue=!0;return}const e=this.items_.findIndex(t=>t.rawValue);e<0?(this.items_.forEach((t,i)=>{t.rawValue=i===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((t,i)=>{t.rawValue=i===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const t=this.items_.findIndex(i=>i===e.sender);this.items_.forEach((i,r)=>{i.rawValue=r===t}),this.selectedIndex.rawValue=t}else this.keepSelection_()}}const On=A("tab");class Im{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(On(),Fl()),t.viewProps.bindClassModifiers(this.element),Xe(t.empty,Xt(this.element,On(void 0,"nop")));const i=e.createElement("div");i.classList.add(On("t")),this.element.appendChild(i),this.itemsElement=i;const r=e.createElement("div");r.classList.add(On("i")),this.element.appendChild(r);const s=e.createElement("div");s.classList.add(On("c")),this.element.appendChild(s),this.contentsElement=s}}class zl extends qr{constructor(e,t){const i=new Nm,r=new Im(e,{empty:i.empty,viewProps:t.viewProps});super({blade:t.blade,rackController:new Wr({blade:t.blade,element:r.contentsElement,viewProps:t.viewProps}),view:r}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const s=this.rackController.rack;s.emitter.on("add",this.onRackAdd_),s.emitter.on("remove",this.onRackRemove_),this.tab=i}add(e,t){this.rackController.rack.add(e,t)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const t=e.bladeController;kl(this.view.itemsElement,t.itemController.view.element,e.index),t.itemController.viewProps.set("parent",this.viewProps),this.tab.add(t.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const t=e.bladeController;Kr(t.itemController.view.element),t.itemController.viewProps.set("parent",null),this.tab.remove(t.props.value("selected"))}}const Hl=ae({id:"tab",type:"blade",accept(n){const e=q(n,t=>({pages:t.required.array(t.required.object({title:t.required.string})),view:t.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(n){const e=new zl(n.document,{blade:n.blade,viewProps:n.viewProps});return n.params.pages.forEach(t=>{const i=new Jr(n.document,{blade:Qt(),itemProps:V.fromObject({selected:!1,title:t.title}),props:V.fromObject({selected:!1}),viewProps:Je.create()});e.add(i)}),e},api(n){return n.controller instanceof zl?new jm(n.controller,n.pool):n.controller instanceof Jr?new Bm(n.controller,n.pool):null}});function Fm(n,e){const t=n.accept(e.params);if(!t)return null;const i=q(e.params,r=>({disabled:r.optional.boolean,hidden:r.optional.boolean}));return n.controller({blade:Qt(),document:e.document,params:Object.assign(Object.assign({},t.params),{disabled:i==null?void 0:i.disabled,hidden:i==null?void 0:i.hidden}),viewProps:Je.create({disabled:i==null?void 0:i.disabled,hidden:i==null?void 0:i.hidden})})}class Qr extends Sn{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class $m{constructor(){this.disabled=!1,this.emitter=new X}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class Km{constructor(e,t){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new X,this.interval_=t,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class Rn{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((t,i)=>i.constrain(t),e)}}function _i(n,e){if(n instanceof e)return n;if(n instanceof Rn){const t=n.constraints.reduce((i,r)=>i||(r instanceof e?r:null),null);if(t)return t}return null}class Tn{constructor(e){this.values=V.fromObject({options:e})}constrain(e){const t=this.values.get("options");return t.length===0||t.filter(r=>r.value===e).length>0?e:t[0].value}}function Dn(n){var e;const t=Fr;if(Array.isArray(n))return(e=q({items:n},i=>({items:i.required.array(i.required.object({text:i.required.string,value:i.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof n=="object")return t.required.raw(n).value}function Zr(n){if(Array.isArray(n))return n;const e=[];return Object.keys(n).forEach(t=>{e.push({text:t,value:n[t]})}),e}function es(n){return U(n)?null:new Tn(Zr(n))}const ts=A("lst");class Um{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.element=e.createElement("div"),this.element.classList.add(ts()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("select");i.classList.add(ts("s")),t.viewProps.bindDisabled(i),this.element.appendChild(i),this.selectElement=i;const r=e.createElement("div");r.classList.add(ts("m")),r.appendChild(vi(e,"dropdown")),this.element.appendChild(r),t.value.emitter.on("change",this.onValueChange_),this.value_=t.value,Ne(this.props_,"options",s=>{Vl(this.selectElement),s.forEach(o=>{const l=e.createElement("option");l.textContent=o.text,this.selectElement.appendChild(l)}),this.update_()})}update_(){const e=this.props_.get("options").map(t=>t.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class ut{constructor(e,t){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new Um(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const t=e.currentTarget;this.value.rawValue=this.props.get("options")[t.selectedIndex].value}importProps(e){return ve(e,null,t=>({options:t.required.custom(Dn)}),t=>(this.props.set("options",Zr(t.options)),!0))}exportProps(){return be(null,{options:this.props.get("options")})}}const ql=A("pop");class zm{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(ql()),t.viewProps.bindClassModifiers(this.element),Xe(t.shows,Xt(this.element,ql(void 0,"v")))}}class Gl{constructor(e,t){this.shows=z(!1),this.viewProps=t.viewProps,this.view=new zm(e,{shows:this.shows,viewProps:this.viewProps})}}const Wl=A("txt");class Hm{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Wl()),t.viewProps.bindClassModifiers(this.element),this.props_=t.props,this.props_.emitter.on("change",this.onChange_);const i=e.createElement("input");i.classList.add(Wl("i")),i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onChange_),this.value_=t.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class jn{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=t.parser,this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new Hm(e,{props:t.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const i=e.currentTarget.value,r=this.parser_(i);U(r)||(this.value.rawValue=r),this.view.refresh()}}function qm(n){return String(n)}function Yl(n){return n==="false"?!1:!!n}function Xl(n){return qm(n)}function Gm(n){return e=>n.reduce((t,i)=>t!==null?t:i(e),null)}const Wm=he(0);function gi(n){return Wm(n)+"%"}function Jl(n){return String(n)}function ns(n){return n}function Zt({primary:n,secondary:e,forward:t,backward:i}){let r=!1;function s(o){r||(r=!0,o(),r=!1)}n.emitter.on("change",o=>{s(()=>{e.setRawValue(t(n.rawValue,e.rawValue),o.options)})}),e.emitter.on("change",o=>{s(()=>{n.setRawValue(i(n.rawValue,e.rawValue),o.options)}),s(()=>{e.setRawValue(t(n.rawValue,e.rawValue),o.options)})}),s(()=>{e.setRawValue(t(n.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function me(n,e){const t=n*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+t:e.downKey?-t:0}function Bn(n){return{altKey:n.altKey,downKey:n.key==="ArrowDown",shiftKey:n.shiftKey,upKey:n.key==="ArrowUp"}}function Qe(n){return{altKey:n.altKey,downKey:n.key==="ArrowLeft",shiftKey:n.shiftKey,upKey:n.key==="ArrowRight"}}function Ym(n){return n==="ArrowUp"||n==="ArrowDown"}function Ql(n){return Ym(n)||n==="ArrowLeft"||n==="ArrowRight"}function is(n,e){var t,i;const r=e.ownerDocument.defaultView,s=e.getBoundingClientRect();return{x:n.pageX-(((t=r&&r.scrollX)!==null&&t!==void 0?t:0)+s.left),y:n.pageY-(((i=r&&r.scrollY)!==null&&i!==void 0?i:0)+s.top)}}class Vt{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new X,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const t=this.elem_.getBoundingClientRect();return{bounds:{width:t.width,height:t.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var t;e.preventDefault(),(t=e.currentTarget)===null||t===void 0||t.focus();const i=this.elem_.ownerDocument;i.addEventListener("mousemove",this.onDocumentMouseMove_),i.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(is(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(is(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const t=this.elem_.ownerDocument;t.removeEventListener("mousemove",this.onDocumentMouseMove_),t.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(is(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const t=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchMove_(e){const t=e.targetTouches.item(0),i=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(t?{x:t.clientX-i.left,y:t.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=t}onTouchEnd_(e){var t;const i=(t=e.targetTouches.item(0))!==null&&t!==void 0?t:this.lastTouch_,r=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(i?{x:i.clientX-r.left,y:i.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const Pe=A("txt");class Xm{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Pe(),Pe(void 0,"num")),t.arrayPosition&&this.element.classList.add(Pe(void 0,t.arrayPosition)),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(Pe("i")),i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=t.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Pe()),this.inputElement.classList.add(Pe("i"));const r=e.createElement("div");r.classList.add(Pe("k")),this.element.appendChild(r),this.knobElement=r;const s=e.createElementNS(Be,"svg");s.classList.add(Pe("g")),this.knobElement.appendChild(s);const o=e.createElementNS(Be,"path");o.classList.add(Pe("gb")),s.appendChild(o),this.guideBodyElem_=o;const l=e.createElementNS(Be,"path");l.classList.add(Pe("gh")),s.appendChild(l),this.guideHeadElem_=l;const a=e.createElement("div");a.classList.add(A("tt")()),this.knobElement.appendChild(a),this.tooltipElem_=a,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(Pe(void 0,"drg"));return}this.element.classList.add(Pe(void 0,"drg"));const t=e.rawValue/this.props_.get("pointerScale"),i=t+(t>0?-1:t<0?1:0),r=Q(-i,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${i+r},0 L${i},4 L${i+r},8`,`M ${t},-1 L${t},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${t},4`);const s=this.props_.get("formatter");this.tooltipElem_.textContent=s(this.value.rawValue),this.tooltipElem_.style.left=`${t}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class Nn{constructor(e,t){var i;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=t.parser,this.props=t.props,this.sliderProps_=(i=t.sliderProps)!==null&&i!==void 0?i:null,this.value=t.value,this.viewProps=t.viewProps,this.dragging_=z(null),this.view=new Xm(e,{arrayPosition:t.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const r=new Vt(this.view.knobElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var t,i;const r=(t=this.sliderProps_)===null||t===void 0?void 0:t.get("min"),s=(i=this.sliderProps_)===null||i===void 0?void 0:i.get("max");let o=e;return r!==void 0&&(o=Math.max(o,r)),s!==void 0&&(o=Math.min(o,s)),o}onInputChange_(e){const i=e.currentTarget.value,r=this.parser_(i);U(r)||(this.value.rawValue=this.constrainValue_(r)),this.view.refresh()}onInputKeyDown_(e){const t=me(this.props.get("keyScale"),Bn(e));t!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+t),{forceEmit:!1,last:!1})}onInputKeyUp_(e){me(this.props.get("keyScale"),Bn(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const t=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+t*this.props.get("pointerScale"))}onPointerMove_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const t=this.computeDraggingValue_(e.data);t!==null&&(this.value.setRawValue(t,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const rs=A("sld");class Jm{constructor(e,t){this.onChange_=this.onChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(rs()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(rs("t")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.trackElement=i;const r=e.createElement("div");r.classList.add(rs("k")),this.trackElement.appendChild(r),this.knobElement=r,t.value.emitter.on("change",this.onChange_),this.value=t.value,this.update_()}update_(){const e=Q(I(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class Qm{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.props=t.props,this.view=new Jm(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vt(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){e.point&&this.value.setRawValue(I(Q(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),t)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=me(this.props.get("keyScale"),Qe(e));t!==0&&this.value.setRawValue(this.value.rawValue+t,{forceEmit:!1,last:!1})}onKeyUp_(e){me(this.props.get("keyScale"),Qe(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const ss=A("sldtxt");class Zm{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(ss());const i=e.createElement("div");i.classList.add(ss("s")),this.sliderView_=t.sliderView,i.appendChild(this.sliderView_.element),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(ss("t")),this.textView_=t.textView,r.appendChild(this.textView_.element),this.element.appendChild(r)}}class wi{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.sliderC_=new Qm(e,{props:t.sliderProps,value:t.value,viewProps:this.viewProps}),this.textC_=new Nn(e,{parser:t.parser,props:t.textProps,sliderProps:t.sliderProps,value:t.value,viewProps:t.viewProps}),this.view=new Zm(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return ve(e,null,t=>({max:t.required.number,min:t.required.number}),t=>{const i=this.sliderC_.props;return i.set("max",t.max),i.set("min",t.min),!0})}exportProps(){const e=this.sliderC_.props;return be(null,{max:e.get("max"),min:e.get("min")})}}function Zl(n){return{sliderProps:new V({keyScale:n.keyScale,max:n.max,min:n.min}),textProps:new V({formatter:z(n.formatter),keyScale:n.keyScale,pointerScale:z(n.pointerScale)})}}const ef={containerUnitSize:"cnt-usz"};function ea(n){return`--${ef[n]}`}function In(n){return Pl(n)}function ct(n){if(Dr(n))return q(n,In)}function Ze(n,e){if(!n)return;const t=[],i=wl(n,e);i&&t.push(i);const r=Cl(n);return r&&t.push(r),new Rn(t)}function tf(n){return n?n.major===Jt.major:!1}function ta(n){if(n==="inline"||n==="popup")return n}function Fn(n,e){n.write(e)}const Ci=A("ckb");class nf{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Ci()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("label");i.classList.add(Ci("l")),this.element.appendChild(i);const r=e.createElement("input");r.classList.add(Ci("i")),r.type="checkbox",i.appendChild(r),this.inputElement=r,t.viewProps.bindDisabled(this.inputElement);const s=e.createElement("div");s.classList.add(Ci("w")),i.appendChild(s);const o=vi(e,"check");s.appendChild(o),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class rf{constructor(e,t){this.onInputChange_=this.onInputChange_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new nf(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const t=e.currentTarget;this.value.rawValue=t.checked}}function sf(n){const e=[],t=es(n.options);return t&&e.push(t),new Rn(e)}const of=ae({id:"input-bool",type:"input",accept:(n,e)=>{if(typeof n!="boolean")return null;const t=q(e,i=>({options:i.optional.custom(Dn),readonly:i.optional.constant(!1)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Yl,constraint:n=>sf(n.params),writer:n=>Fn},controller:n=>{const e=n.document,t=n.value,i=n.constraint,r=i&&_i(i,Tn);return r?new ut(e,{props:new V({options:r.values.value("options")}),value:t,viewProps:n.viewProps}):new rf(e,{value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="boolean"?null:n.controller.valueController instanceof ut?new Qr(n.controller):null}}),St=A("col");class lf{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(St()),t.foldable.bindExpandedClass(this.element,St(void 0,"expanded")),Ne(t.foldable,"completed",Xt(this.element,St(void 0,"cpl")));const i=e.createElement("div");i.classList.add(St("h")),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(St("s")),i.appendChild(r),this.swatchElement=r;const s=e.createElement("div");if(s.classList.add(St("t")),i.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(St("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}function af(n,e,t){const i=Q(n/255,0,1),r=Q(e/255,0,1),s=Q(t/255,0,1),o=Math.max(i,r,s),l=Math.min(i,r,s),a=o-l;let u=0,c=0;const d=(l+o)/2;return a!==0&&(c=a/(1-Math.abs(o+l-1)),i===o?u=(r-s)/a:r===o?u=2+(s-i)/a:u=4+(i-r)/a,u=u/6+(u<0?1:0)),[u*360,c*100,d*100]}function uf(n,e,t){const i=(n%360+360)%360,r=Q(e/100,0,1),s=Q(t/100,0,1),o=(1-Math.abs(2*s-1))*r,l=o*(1-Math.abs(i/60%2-1)),a=s-o/2;let u,c,d;return i>=0&&i<60?[u,c,d]=[o,l,0]:i>=60&&i<120?[u,c,d]=[l,o,0]:i>=120&&i<180?[u,c,d]=[0,o,l]:i>=180&&i<240?[u,c,d]=[0,l,o]:i>=240&&i<300?[u,c,d]=[l,0,o]:[u,c,d]=[o,0,l],[(u+a)*255,(c+a)*255,(d+a)*255]}function cf(n,e,t){const i=Q(n/255,0,1),r=Q(e/255,0,1),s=Q(t/255,0,1),o=Math.max(i,r,s),l=Math.min(i,r,s),a=o-l;let u;a===0?u=0:o===i?u=60*(((r-s)/a%6+6)%6):o===r?u=60*((s-i)/a+2):u=60*((i-r)/a+4);const c=o===0?0:a/o,d=o;return[u,c*100,d*100]}function na(n,e,t){const i=bl(n,360),r=Q(e/100,0,1),s=Q(t/100,0,1),o=s*r,l=o*(1-Math.abs(i/60%2-1)),a=s-o;let u,c,d;return i>=0&&i<60?[u,c,d]=[o,l,0]:i>=60&&i<120?[u,c,d]=[l,o,0]:i>=120&&i<180?[u,c,d]=[0,o,l]:i>=180&&i<240?[u,c,d]=[0,l,o]:i>=240&&i<300?[u,c,d]=[l,0,o]:[u,c,d]=[o,0,l],[(u+a)*255,(c+a)*255,(d+a)*255]}function df(n,e,t){const i=t+e*(100-Math.abs(2*t-100))/200;return[n,i!==0?e*(100-Math.abs(2*t-100))/i:0,t+e*(100-Math.abs(2*t-100))/(2*100)]}function pf(n,e,t){const i=100-Math.abs(t*(200-e)/100-100);return[n,i!==0?e*t/i:0,t*(200-e)/(2*100)]}function Ie(n){return[n[0],n[1],n[2]]}function yi(n,e){return[n[0],n[1],n[2],e]}const hf={hsl:{hsl:(n,e,t)=>[n,e,t],hsv:df,rgb:uf},hsv:{hsl:pf,hsv:(n,e,t)=>[n,e,t],rgb:na},rgb:{hsl:af,hsv:cf,rgb:(n,e,t)=>[n,e,t]}};function en(n,e){return[e==="float"?1:n==="rgb"?255:360,e==="float"?1:n==="rgb"?255:100,e==="float"?1:n==="rgb"?255:100]}function mf(n,e){return n===e?e:bl(n,e)}function ia(n,e,t){var i;const r=en(e,t);return[e==="rgb"?Q(n[0],0,r[0]):mf(n[0],r[0]),Q(n[1],0,r[1]),Q(n[2],0,r[2]),Q((i=n[3])!==null&&i!==void 0?i:1,0,1)]}function ra(n,e,t,i){const r=en(e,t),s=en(e,i);return n.map((o,l)=>o/r[l]*s[l])}function sa(n,e,t){const i=ra(n,e.mode,e.type,"int"),r=hf[e.mode][t.mode](...i);return ra(r,t.mode,"int",t.type)}class O{static black(){return new O([0,0,0],"rgb")}constructor(e,t){this.type="int",this.mode=t,this.comps_=ia(e,t,this.type)}getComponents(e){return yi(sa(Ie(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const dt=A("colp");class ff{constructor(e,t){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(dt()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(dt("hsv"));const r=e.createElement("div");r.classList.add(dt("sv")),this.svPaletteView_=t.svPaletteView,r.appendChild(this.svPaletteView_.element),i.appendChild(r);const s=e.createElement("div");s.classList.add(dt("h")),this.hPaletteView_=t.hPaletteView,s.appendChild(this.hPaletteView_.element),i.appendChild(s),this.element.appendChild(i);const o=e.createElement("div");if(o.classList.add(dt("rgb")),this.textsView_=t.textsView,o.appendChild(this.textsView_.element),this.element.appendChild(o),t.alphaViews){this.alphaViews_={palette:t.alphaViews.palette,text:t.alphaViews.text};const l=e.createElement("div");l.classList.add(dt("a"));const a=e.createElement("div");a.classList.add(dt("ap")),a.appendChild(this.alphaViews_.palette.element),l.appendChild(a);const u=e.createElement("div");u.classList.add(dt("at")),u.appendChild(this.alphaViews_.text.element),l.appendChild(u),this.element.appendChild(l)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(t=>t.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function vf(n){return n==="int"?"int":n==="float"?"float":void 0}function os(n){return q(n,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(vf)}),expanded:e.optional.boolean,picker:e.optional.custom(ta),readonly:e.optional.constant(!1)}))}function Lt(n){return n?.1:1}function oa(n){var e;return(e=n.color)===null||e===void 0?void 0:e.type}class ls{constructor(e,t){this.type="float",this.mode=t,this.comps_=ia(e,t,this.type)}getComponents(e){return yi(sa(Ie(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const bf={int:(n,e)=>new O(n,e),float:(n,e)=>new ls(n,e)};function as(n,e,t){return bf[t](n,e)}function _f(n){return n.type==="float"}function gf(n){return n.type==="int"}function wf(n){const e=n.getComponents(),t=en(n.mode,"int");return new O([Math.round(I(e[0],0,1,0,t[0])),Math.round(I(e[1],0,1,0,t[1])),Math.round(I(e[2],0,1,0,t[2])),e[3]],n.mode)}function Cf(n){const e=n.getComponents(),t=en(n.mode,"int");return new ls([I(e[0],0,t[0],0,1),I(e[1],0,t[1],0,1),I(e[2],0,t[2],0,1),e[3]],n.mode)}function ue(n,e){if(n.type===e)return n;if(gf(n)&&e==="float")return Cf(n);if(_f(n)&&e==="int")return wf(n);throw G.shouldNeverHappen()}function yf(n,e){return n.alpha===e.alpha&&n.mode===e.mode&&n.notation===e.notation&&n.type===e.type}function xe(n,e){const t=n.match(/^(.+)%$/);return Math.min(t?parseFloat(t[1])*.01*e:parseFloat(n),e)}const Pf={deg:n=>n,grad:n=>n*360/400,rad:n=>n*360/(2*Math.PI),turn:n=>n*360};function la(n){const e=n.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(n);const t=parseFloat(e[1]),i=e[2];return Pf[i](t)}function aa(n){const e=n.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[xe(e[1],255),xe(e[2],255),xe(e[3],255)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function xf(n){const e=aa(n);return e?new O(e,"rgb"):null}function ua(n){const e=n.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[xe(e[1],255),xe(e[2],255),xe(e[3],255),xe(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function Ef(n){const e=ua(n);return e?new O(e,"rgb"):null}function ca(n){const e=n.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[la(e[1]),xe(e[2],100),xe(e[3],100)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function kf(n){const e=ca(n);return e?new O(e,"hsl"):null}function da(n){const e=n.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const t=[la(e[1]),xe(e[2],100),xe(e[3],100),xe(e[4],1)];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function Vf(n){const e=da(n);return e?new O(e,"hsl"):null}function pa(n){const e=n.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const t=n.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}function Sf(n){const e=pa(n);return e?new O(e,"rgb"):null}function ha(n){const e=n.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),I(parseInt(e[4]+e[4],16),0,255,0,1)];const t=n.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),I(parseInt(t[4],16),0,255,0,1)]:null}function Lf(n){const e=ha(n);return e?new O(e,"rgb"):null}function ma(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])?null:t}function fa(n){return e=>{const t=ma(e);return t?as(t,"rgb",n):null}}function va(n){const e=n.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const t=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])||isNaN(t[3])?null:t}function ba(n){return e=>{const t=va(e);return t?as(t,"rgb",n):null}}const Af=[{parser:pa,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:ha,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:aa,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:ua,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:ca,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:da,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:ma,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:va,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Mf(n){return Af.reduce((e,{parser:t,result:i})=>e||(t(n)?i:null),null)}function Of(n,e="int"){const t=Mf(n);return t?t.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},t),{type:"int"}):t.notation==="func"?Object.assign(Object.assign({},t),{type:e}):null:null}function $n(n){const e=[Sf,Lf,xf,Ef,kf,Vf];n==="int"&&e.push(fa("int"),ba("int")),n==="float"&&e.push(fa("float"),ba("float"));const t=Gm(e);return i=>{const r=t(i);return r?ue(r,n):null}}function Rf(n){const e=$n("int");if(typeof n!="string")return O.black();const t=e(n);return t??O.black()}function _a(n){const e=Q(Math.floor(n),0,255).toString(16);return e.length===1?`0${e}`:e}function us(n,e="#"){const t=Ie(n.getComponents("rgb")).map(_a).join("");return`${e}${t}`}function cs(n,e="#"){const t=n.getComponents("rgb"),i=[t[0],t[1],t[2],t[3]*255].map(_a).join("");return`${e}${i}`}function ga(n){const e=he(0),t=ue(n,"int");return`rgb(${Ie(t.getComponents("rgb")).map(r=>e(r)).join(", ")})`}function Pi(n){const e=he(2),t=he(0);return`rgba(${ue(n,"int").getComponents("rgb").map((s,o)=>(o===3?e:t)(s)).join(", ")})`}function Tf(n){const e=[he(0),gi,gi],t=ue(n,"int");return`hsl(${Ie(t.getComponents("hsl")).map((r,s)=>e[s](r)).join(", ")})`}function Df(n){const e=[he(0),gi,gi,he(2)];return`hsla(${ue(n,"int").getComponents("hsl").map((r,s)=>e[s](r)).join(", ")})`}function wa(n,e){const t=he(e==="float"?2:0),i=["r","g","b"],r=ue(n,e);return`{${Ie(r.getComponents("rgb")).map((o,l)=>`${i[l]}: ${t(o)}`).join(", ")}}`}function jf(n){return e=>wa(e,n)}function Ca(n,e){const t=he(2),i=he(e==="float"?2:0),r=["r","g","b","a"];return`{${ue(n,e).getComponents("rgb").map((l,a)=>{const u=a===3?t:i;return`${r[a]}: ${u(l)}`}).join(", ")}}`}function Bf(n){return e=>Ca(e,n)}const Nf=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:us},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:cs},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:ga},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:Pi},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:Tf},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:Df},...["int","float"].reduce((n,e)=>[...n,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:jf(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:Bf(e)}],[])];function ya(n){return Nf.reduce((e,t)=>e||(yf(t.format,n)?t.stringifier:null),null)}const Kn=A("apl");class If{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(Kn()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(Kn("b")),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(Kn("c")),i.appendChild(r),this.colorElem_=r;const s=e.createElement("div");s.classList.add(Kn("m")),this.element.appendChild(s),this.markerElem_=s;const o=e.createElement("div");o.classList.add(Kn("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}update_(){const e=this.value.rawValue,t=e.getComponents("rgb"),i=new O([t[0],t[1],t[2],0],"rgb"),r=new O([t[0],t[1],t[2],255],"rgb"),s=["to right",Pi(i),Pi(r)];this.colorElem_.style.background=`linear-gradient(${s.join(",")})`,this.previewElem_.style.backgroundColor=Pi(e);const o=I(t[3],0,1,0,100);this.markerElem_.style.left=`${o}%`}onValueChange_(){this.update_()}}class Ff{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new If(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=e.point.x/e.bounds.width,r=this.value.rawValue,[s,o,l]=r.getComponents("hsv");this.value.setRawValue(new O([s,o,l,i],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=me(Lt(!0),Qe(e));if(t===0)return;const i=this.value.rawValue,[r,s,o,l]=i.getComponents("hsv");this.value.setRawValue(new O([r,s,o,l+t],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){me(Lt(!0),Qe(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const tn=A("coltxt");function $f(n){const e=n.createElement("select"),t=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(t.reduce((i,r)=>{const s=n.createElement("option");return s.textContent=r.text,s.value=r.value,i.appendChild(s),i},n.createDocumentFragment())),e}class Kf{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(tn()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(tn("m")),this.modeElem_=$f(e),this.modeElem_.classList.add(tn("ms")),i.appendChild(this.modeSelectElement),t.viewProps.bindDisabled(this.modeElem_);const r=e.createElement("div");r.classList.add(tn("mm")),r.appendChild(vi(e,"dropdown")),i.appendChild(r),this.element.appendChild(i);const s=e.createElement("div");s.classList.add(tn("w")),this.element.appendChild(s),this.inputsElem_=s,this.inputViews_=t.inputViews,this.applyInputViews_(),Xe(t.mode,o=>{this.modeElem_.value=o})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){Vl(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(t=>{const i=e.createElement("div");i.classList.add(tn("c")),i.appendChild(t.element),this.inputsElem_.appendChild(i)})}}function Uf(n){return he(n==="float"?2:0)}function zf(n,e,t){const i=en(n,e)[t];return new xn({min:0,max:i})}function Hf(n,e,t){return new Nn(n,{arrayPosition:t===0?"fst":t===2?"lst":"mid",parser:e.parser,props:V.fromObject({formatter:Uf(e.colorType),keyScale:Lt(!1),pointerScale:e.colorType==="float"?.01:1}),value:z(0,{constraint:zf(e.colorMode,e.colorType,t)}),viewProps:e.viewProps})}function qf(n,e){const t={colorMode:e.colorMode,colorType:e.colorType,parser:We,viewProps:e.viewProps};return[0,1,2].map(i=>{const r=Hf(n,t,i);return Zt({primary:e.value,secondary:r.value,forward(s){return ue(s,e.colorType).getComponents(e.colorMode)[i]},backward(s,o){const l=e.colorMode,u=ue(s,e.colorType).getComponents(l);u[i]=o;const c=as(yi(Ie(u),u[3]),l,e.colorType);return ue(c,"int")}}),r})}function Gf(n,e){const t=new jn(n,{parser:$n("int"),props:V.fromObject({formatter:us}),value:z(O.black()),viewProps:e.viewProps});return Zt({primary:e.value,secondary:t.value,forward:i=>new O(Ie(i.getComponents()),i.mode),backward:(i,r)=>new O(yi(Ie(r.getComponents(i.mode)),i.getComponents()[3]),i.mode)}),[t]}function Wf(n){return n!=="hex"}class Yf{constructor(e,t){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=t.colorType,this.value=t.value,this.viewProps=t.viewProps,this.colorMode=z(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new Kf(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const t=this.colorMode.rawValue;return Wf(t)?qf(e,{colorMode:t,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):Gf(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const t=e.currentTarget;this.colorMode.rawValue=t.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(i=>i.view)}}const ds=A("hpl");class Xf{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(ds()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("div");i.classList.add(ds("c")),this.element.appendChild(i);const r=e.createElement("div");r.classList.add(ds("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const e=this.value.rawValue,[t]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=ga(new O([t,100,100],"hsv"));const i=I(t,0,360,0,100);this.markerElem_.style.left=`${i}%`}onValueChange_(){this.update_()}}class Jf{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Xf(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=I(Q(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),r=this.value.rawValue,[,s,o,l]=r.getComponents("hsv");this.value.setRawValue(new O([i,s,o,l],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const t=me(Lt(!1),Qe(e));if(t===0)return;const i=this.value.rawValue,[r,s,o,l]=i.getComponents("hsv");this.value.setRawValue(new O([r+t,s,o,l],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){me(Lt(!1),Qe(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const ps=A("svp"),Pa=64;class Qf{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(ps()),t.viewProps.bindClassModifiers(this.element),t.viewProps.bindTabIndex(this.element);const i=e.createElement("canvas");i.height=Pa,i.width=Pa,i.classList.add(ps("c")),this.element.appendChild(i),this.canvasElement=i;const r=e.createElement("div");r.classList.add(ps("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const e=Qh(this.canvasElement);if(!e)return;const i=this.value.rawValue.getComponents("hsv"),r=this.canvasElement.width,s=this.canvasElement.height,o=e.getImageData(0,0,r,s),l=o.data;for(let c=0;c<s;c++)for(let d=0;d<r;d++){const p=I(d,0,r,0,100),h=I(c,0,s,100,0),m=na(i[0],p,h),b=(c*r+d)*4;l[b]=m[0],l[b+1]=m[1],l[b+2]=m[2],l[b+3]=255}e.putImageData(o,0,0);const a=I(i[1],0,100,0,100);this.markerElem_.style.left=`${a}%`;const u=I(i[2],0,100,100,0);this.markerElem_.style.top=`${u}%`}onValueChange_(){this.update_()}}class Zf{constructor(e,t){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.view=new Qf(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vt(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=I(e.point.x,0,e.bounds.width,0,100),r=I(e.point.y,0,e.bounds.height,100,0),[s,,,o]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new O([s,i,r,o],"hsv"),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){Ql(e.key)&&e.preventDefault();const[t,i,r,s]=this.value.rawValue.getComponents("hsv"),o=Lt(!1),l=me(o,Qe(e)),a=me(o,Bn(e));l===0&&a===0||this.value.setRawValue(new O([t,i+l,r+a,s],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const t=Lt(!1),i=me(t,Qe(e)),r=me(t,Bn(e));i===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class ev{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.hPaletteC_=new Jf(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new Zf(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=t.supportsAlpha?{palette:new Ff(e,{value:this.value,viewProps:this.viewProps}),text:new Nn(e,{parser:We,props:V.fromObject({pointerScale:.01,keyScale:.1,formatter:he(2)}),value:z(0,{constraint:new xn({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Zt({primary:this.value,secondary:this.alphaIcs_.text.value,forward:i=>i.getComponents()[3],backward:(i,r)=>{const s=i.getComponents();return s[3]=r,new O(s,i.mode)}}),this.textsC_=new Yf(e,{colorType:t.colorType,value:this.value,viewProps:this.viewProps}),this.view=new ff(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:t.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const hs=A("colsw");class tv{constructor(e,t){this.onValueChange_=this.onValueChange_.bind(this),t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.element=e.createElement("div"),this.element.classList.add(hs()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(hs("sw")),this.element.appendChild(i),this.swatchElem_=i;const r=e.createElement("button");r.classList.add(hs("b")),t.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=cs(e)}onValueChange_(){this.update_()}}class nv{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new tv(e,{value:this.value,viewProps:this.viewProps})}}class ms{constructor(e,t){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=An.create(t.expanded),this.swatchC_=new nv(e,{value:this.value,viewProps:this.viewProps});const i=this.swatchC_.view.buttonElement;i.addEventListener("blur",this.onButtonBlur_),i.addEventListener("click",this.onButtonClick_),this.textC_=new jn(e,{parser:t.parser,props:V.fromObject({formatter:t.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new lf(e,{foldable:this.foldable_,pickerLayout:t.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=t.pickerLayout==="popup"?new Gl(e,{viewProps:this.viewProps}):null;const r=new ev(e,{colorType:t.colorType,supportsAlpha:t.supportsAlpha,value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach(s=>{s.addEventListener("blur",this.onPopupChildBlur_),s.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(r.view.element),Zt({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:s=>s,backward:(s,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Yr(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=Sl(e);i&&t.contains(i)||i&&i===this.swatchC_.view.buttonElement&&!$r(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function iv(n){return Ie(n.getComponents("rgb")).reduce((e,t)=>e<<8|Math.floor(t)&255,0)}function rv(n){return n.getComponents("rgb").reduce((e,t,i)=>{const r=Math.floor(i===3?t*255:t)&255;return e<<8|r},0)>>>0}function sv(n){return new O([n>>16&255,n>>8&255,n&255],"rgb")}function ov(n){return new O([n>>24&255,n>>16&255,n>>8&255,I(n&255,0,255,0,1)],"rgb")}function lv(n){return typeof n!="number"?O.black():sv(n)}function av(n){return typeof n!="number"?O.black():ov(n)}function xi(n,e){return typeof n!="object"||U(n)?!1:e in n&&typeof n[e]=="number"}function xa(n){return xi(n,"r")&&xi(n,"g")&&xi(n,"b")}function Ea(n){return xa(n)&&xi(n,"a")}function ka(n){return xa(n)}function fs(n,e){if(n.mode!==e.mode||n.type!==e.type)return!1;const t=n.getComponents(),i=e.getComponents();for(let r=0;r<t.length;r++)if(t[r]!==i[r])return!1;return!0}function Va(n){return"a"in n?[n.r,n.g,n.b,n.a]:[n.r,n.g,n.b]}function uv(n){const e=ya(n);return e?(t,i)=>{Fn(t,e(i))}:null}function cv(n){const e=n?rv:iv;return(t,i)=>{Fn(t,e(i))}}function dv(n,e,t){const r=ue(e,t).toRgbaObject();n.writeProperty("r",r.r),n.writeProperty("g",r.g),n.writeProperty("b",r.b),n.writeProperty("a",r.a)}function pv(n,e,t){const r=ue(e,t).toRgbaObject();n.writeProperty("r",r.r),n.writeProperty("g",r.g),n.writeProperty("b",r.b)}function hv(n,e){return(t,i)=>{n?dv(t,i,e):pv(t,i,e)}}function mv(n){var e;return!!(!((e=n==null?void 0:n.color)===null||e===void 0)&&e.alpha)}function fv(n){return n?e=>cs(e,"0x"):e=>us(e,"0x")}function vv(n){return"color"in n||n.view==="color"}const bv=ae({id:"input-color-number",type:"input",accept:(n,e)=>{if(typeof n!="number"||!vv(e))return null;const t=os(e);return t?{initialValue:n,params:Object.assign(Object.assign({},t),{supportsAlpha:mv(e)})}:null},binding:{reader:n=>n.params.supportsAlpha?av:lv,equals:fs,writer:n=>cv(n.params.supportsAlpha)},controller:n=>{var e,t;return new ms(n.document,{colorType:"int",expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:fv(n.params.supportsAlpha),parser:$n("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n.params.supportsAlpha,value:n.value,viewProps:n.viewProps})}});function _v(n,e){if(!ka(n))return ue(O.black(),e);if(e==="int"){const t=Va(n);return new O(t,"rgb")}if(e==="float"){const t=Va(n);return new ls(t,"rgb")}return ue(O.black(),"int")}function gv(n){return Ea(n)}function wv(n){return e=>{const t=_v(e,n);return ue(t,"int")}}function Cv(n,e){return t=>n?Ca(t,e):wa(t,e)}const yv=ae({id:"input-color-object",type:"input",accept:(n,e)=>{var t;if(!ka(n))return null;const i=os(e);return i?{initialValue:n,params:Object.assign(Object.assign({},i),{colorType:(t=oa(e))!==null&&t!==void 0?t:"int"})}:null},binding:{reader:n=>wv(n.params.colorType),equals:fs,writer:n=>hv(gv(n.initialValue),n.params.colorType)},controller:n=>{var e,t;const i=Ea(n.initialValue);return new ms(n.document,{colorType:n.params.colorType,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:Cv(i,n.params.colorType),parser:$n("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:i,value:n.value,viewProps:n.viewProps})}}),Pv=ae({id:"input-color-string",type:"input",accept:(n,e)=>{if(typeof n!="string"||e.view==="text")return null;const t=Of(n,oa(e));if(!t)return null;const i=ya(t);if(!i)return null;const r=os(e);return r?{initialValue:n,params:Object.assign(Object.assign({},r),{format:t,stringifier:i})}:null},binding:{reader:()=>Rf,equals:fs,writer:n=>{const e=uv(n.params.format);if(!e)throw G.notBindable();return e}},controller:n=>{var e,t;return new ms(n.document,{colorType:n.params.format.type,expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,formatter:n.params.stringifier,parser:$n("int"),pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",supportsAlpha:n.params.format.alpha,value:n.value,viewProps:n.viewProps})}});class vs{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const t=this.asm_.toComponents(e).map((i,r)=>{var s,o;return(o=(s=this.components[r])===null||s===void 0?void 0:s.constrain(i))!==null&&o!==void 0?o:i});return this.asm_.fromComponents(t)}}const Sa=A("pndtxt");class xv{constructor(e,t){this.textViews=t.textViews,this.element=e.createElement("div"),this.element.classList.add(Sa()),this.textViews.forEach(i=>{const r=e.createElement("div");r.classList.add(Sa("a")),r.appendChild(i.element),this.element.appendChild(r)})}}function Ev(n,e,t){return new Nn(n,{arrayPosition:t===0?"fst":t===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[t].textProps,value:z(0,{constraint:e.axes[t].constraint}),viewProps:e.viewProps})}class bs{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.acs_=t.axes.map((i,r)=>Ev(e,t,r)),this.acs_.forEach((i,r)=>{Zt({primary:this.value,secondary:i.value,forward:s=>t.assembly.toComponents(s)[r],backward:(s,o)=>{const l=t.assembly.toComponents(s);return l[r]=o,t.assembly.fromComponents(l)}})}),this.view=new xv(e,{textViews:this.acs_.map(i=>i.view)})}get textControllers(){return this.acs_}}class kv extends Sn{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function Vv(n,e){const t=[],i=wl(n,e);i&&t.push(i);const r=Cl(n);r&&t.push(r);const s=es(n.options);return s&&t.push(s),new Rn(t)}const Sv=ae({id:"input-number",type:"input",accept:(n,e)=>{if(typeof n!="number")return null;const t=q(e,i=>Object.assign(Object.assign({},Pl(i)),{options:i.optional.custom(Dn),readonly:i.optional.constant(!1)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>fl,constraint:n=>Vv(n.params,n.initialValue),writer:n=>Fn},controller:n=>{const e=n.value,t=n.constraint,i=t&&_i(t,Tn);if(i)return new ut(n.document,{props:new V({options:i.values.value("options")}),value:e,viewProps:n.viewProps});const r=yl(n.params,e.rawValue),s=t&&_i(t,xn);return s?new wi(n.document,Object.assign(Object.assign({},Zl(Object.assign(Object.assign({},r),{keyScale:z(r.keyScale),max:s.values.value("max"),min:s.values.value("min")}))),{parser:We,value:e,viewProps:n.viewProps})):new Nn(n.document,{parser:We,props:V.fromObject(r),value:e,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="number"?null:n.controller.valueController instanceof wi?new kv(n.controller):n.controller.valueController instanceof ut?new Qr(n.controller):null}});class pt{constructor(e=0,t=0){this.x=e,this.y=t}getComponents(){return[this.x,this.y]}static isObject(e){if(U(e))return!1;const t=e.x,i=e.y;return!(typeof t!="number"||typeof i!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y}toObject(){return{x:this.x,y:this.y}}}const La={toComponents:n=>n.getComponents(),fromComponents:n=>new pt(...n)},nn=A("p2d");class Lv{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(nn()),t.viewProps.bindClassModifiers(this.element),Xe(t.expanded,Xt(this.element,nn(void 0,"expanded")));const i=e.createElement("div");i.classList.add(nn("h")),this.element.appendChild(i);const r=e.createElement("button");r.classList.add(nn("b")),r.appendChild(vi(e,"p2dpad")),t.viewProps.bindDisabled(r),i.appendChild(r),this.buttonElement=r;const s=e.createElement("div");if(s.classList.add(nn("t")),i.appendChild(s),this.textElement=s,t.pickerLayout==="inline"){const o=e.createElement("div");o.classList.add(nn("p")),this.element.appendChild(o),this.pickerElement=o}else this.pickerElement=null}}const ht=A("p2dp");class Av{constructor(e,t){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=t.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(ht()),t.layout==="popup"&&this.element.classList.add(ht(void 0,"p")),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("div");i.classList.add(ht("p")),t.viewProps.bindTabIndex(i),this.element.appendChild(i),this.padElement=i;const r=e.createElementNS(Be,"svg");r.classList.add(ht("g")),this.padElement.appendChild(r),this.svgElem_=r;const s=e.createElementNS(Be,"line");s.classList.add(ht("ax")),s.setAttributeNS(null,"x1","0"),s.setAttributeNS(null,"y1","50%"),s.setAttributeNS(null,"x2","100%"),s.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(s);const o=e.createElementNS(Be,"line");o.classList.add(ht("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);const l=e.createElementNS(Be,"line");l.classList.add(ht("l")),l.setAttributeNS(null,"x1","50%"),l.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(l),this.lineElem_=l;const a=e.createElement("div");a.classList.add(ht("m")),this.padElement.appendChild(a),this.markerElem_=a,t.value.emitter.on("change",this.onValueChange_),this.value=t.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,t]=this.value.rawValue.getComponents(),i=this.props_.get("max"),r=I(e,-i,+i,0,100),s=I(t,-i,+i,0,100),o=this.props_.get("invertsY")?100-s:s;this.lineElem_.setAttributeNS(null,"x2",`${r}%`),this.lineElem_.setAttributeNS(null,"y2",`${o}%`),this.markerElem_.style.left=`${r}%`,this.markerElem_.style.top=`${o}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Aa(n,e,t){return[me(e[0],Qe(n)),me(e[1],Bn(n))*(t?1:-1)]}class Mv{constructor(e,t){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.view=new Av(e,{layout:t.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Vt(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,t){if(!e.point)return;const i=this.props.get("max"),r=I(e.point.x,0,e.bounds.width,-i,+i),s=I(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-i,+i);this.value.setRawValue(new pt(r,s),t)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){Ql(e.key)&&e.preventDefault();const[t,i]=Aa(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&i===0||this.value.setRawValue(new pt(this.value.rawValue.x+t,this.value.rawValue.y+i),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[t,i]=Aa(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));t===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class Ov{constructor(e,t){var i,r;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=t.value,this.viewProps=t.viewProps,this.foldable_=An.create(t.expanded),this.popC_=t.pickerLayout==="popup"?new Gl(e,{viewProps:this.viewProps}):null;const s=new Mv(e,{layout:t.pickerLayout,props:new V({invertsY:z(t.invertsY),max:z(t.max),xKeyScale:t.axes[0].textProps.value("keyScale"),yKeyScale:t.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});s.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=s,this.textC_=new bs(e,{assembly:La,axes:t.axes,parser:t.parser,value:this.value,viewProps:this.viewProps}),this.view=new Lv(e,{expanded:this.foldable_.value("expanded"),pickerLayout:t.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("blur",this.onPadButtonBlur_),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Zt({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,l)=>l})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),Yr(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const t=this.view.element,i=e.relatedTarget;(!i||!t.contains(i))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const t=this.popC_.view.element,i=Sl(e);i&&t.contains(i)||i&&i===this.view.buttonElement&&!$r(t.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function Rv(n){return pt.isObject(n)?new pt(n.x,n.y):new pt}function Tv(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y)}function Dv(n,e){return new vs({assembly:La,components:[Ze(Object.assign(Object.assign({},n),n.x),e.x),Ze(Object.assign(Object.assign({},n),n.y),e.y)]})}function Ma(n,e){var t,i;if(!U(n.min)||!U(n.max))return Math.max(Math.abs((t=n.min)!==null&&t!==void 0?t:0),Math.abs((i=n.max)!==null&&i!==void 0?i:0));const r=_l(n);return Math.max(Math.abs(r)*10,Math.abs(e)*10)}function jv(n,e){var t,i;const r=Ma(Pt(n,(t=n.x)!==null&&t!==void 0?t:{}),e.x),s=Ma(Pt(n,(i=n.y)!==null&&i!==void 0?i:{}),e.y);return Math.max(r,s)}function Bv(n){if(!("y"in n))return!1;const e=n.y;return e&&"inverted"in e?!!e.inverted:!1}const Nv=ae({id:"input-point2d",type:"input",accept:(n,e)=>{if(!pt.isObject(n))return null;const t=q(e,i=>Object.assign(Object.assign({},In(i)),{expanded:i.optional.boolean,picker:i.optional.custom(ta),readonly:i.optional.constant(!1),x:i.optional.custom(ct),y:i.optional.object(Object.assign(Object.assign({},In(i)),{inverted:i.optional.boolean}))}));return t?{initialValue:n,params:t}:null},binding:{reader:()=>Rv,constraint:n=>Dv(n.params,n.initialValue),equals:pt.equals,writer:()=>Tv},controller:n=>{var e,t;const i=n.document,r=n.value,s=n.constraint,o=[n.params.x,n.params.y];return new Ov(i,{axes:r.rawValue.getComponents().map((l,a)=>{var u;return Ir({constraint:s.components[a],initialValue:l,params:Pt(n.params,(u=o[a])!==null&&u!==void 0?u:{})})}),expanded:(e=n.params.expanded)!==null&&e!==void 0?e:!1,invertsY:Bv(n.params),max:jv(n.params,r.rawValue),parser:We,pickerLayout:(t=n.params.picker)!==null&&t!==void 0?t:"popup",value:r,viewProps:n.viewProps})}});class rn{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.z=i}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(U(e))return!1;const t=e.x,i=e.y,r=e.z;return!(typeof t!="number"||typeof i!="number"||typeof r!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const Oa={toComponents:n=>n.getComponents(),fromComponents:n=>new rn(...n)};function Iv(n){return rn.isObject(n)?new rn(n.x,n.y,n.z):new rn}function Fv(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z)}function $v(n,e){return new vs({assembly:Oa,components:[Ze(Object.assign(Object.assign({},n),n.x),e.x),Ze(Object.assign(Object.assign({},n),n.y),e.y),Ze(Object.assign(Object.assign({},n),n.z),e.z)]})}const Kv=ae({id:"input-point3d",type:"input",accept:(n,e)=>{if(!rn.isObject(n))return null;const t=q(e,i=>Object.assign(Object.assign({},In(i)),{readonly:i.optional.constant(!1),x:i.optional.custom(ct),y:i.optional.custom(ct),z:i.optional.custom(ct)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Iv,constraint:n=>$v(n.params,n.initialValue),equals:rn.equals,writer:n=>Fv},controller:n=>{const e=n.value,t=n.constraint,i=[n.params.x,n.params.y,n.params.z];return new bs(n.document,{assembly:Oa,axes:e.rawValue.getComponents().map((r,s)=>{var o;return Ir({constraint:t.components[s],initialValue:r,params:Pt(n.params,(o=i[s])!==null&&o!==void 0?o:{})})}),parser:We,value:e,viewProps:n.viewProps})}});class sn{constructor(e=0,t=0,i=0,r=0){this.x=e,this.y=t,this.z=i,this.w=r}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(U(e))return!1;const t=e.x,i=e.y,r=e.z,s=e.w;return!(typeof t!="number"||typeof i!="number"||typeof r!="number"||typeof s!="number")}static equals(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z&&e.w===t.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const Ra={toComponents:n=>n.getComponents(),fromComponents:n=>new sn(...n)};function Uv(n){return sn.isObject(n)?new sn(n.x,n.y,n.z,n.w):new sn}function zv(n,e){n.writeProperty("x",e.x),n.writeProperty("y",e.y),n.writeProperty("z",e.z),n.writeProperty("w",e.w)}function Hv(n,e){return new vs({assembly:Ra,components:[Ze(Object.assign(Object.assign({},n),n.x),e.x),Ze(Object.assign(Object.assign({},n),n.y),e.y),Ze(Object.assign(Object.assign({},n),n.z),e.z),Ze(Object.assign(Object.assign({},n),n.w),e.w)]})}const qv=ae({id:"input-point4d",type:"input",accept:(n,e)=>{if(!sn.isObject(n))return null;const t=q(e,i=>Object.assign(Object.assign({},In(i)),{readonly:i.optional.constant(!1),w:i.optional.custom(ct),x:i.optional.custom(ct),y:i.optional.custom(ct),z:i.optional.custom(ct)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Uv,constraint:n=>Hv(n.params,n.initialValue),equals:sn.equals,writer:n=>zv},controller:n=>{const e=n.value,t=n.constraint,i=[n.params.x,n.params.y,n.params.z,n.params.w];return new bs(n.document,{assembly:Ra,axes:e.rawValue.getComponents().map((r,s)=>{var o;return Ir({constraint:t.components[s],initialValue:r,params:Pt(n.params,(o=i[s])!==null&&o!==void 0?o:{})})}),parser:We,value:e,viewProps:n.viewProps})}});function Gv(n){const e=[],t=es(n.options);return t&&e.push(t),new Rn(e)}const Wv=ae({id:"input-string",type:"input",accept:(n,e)=>{if(typeof n!="string")return null;const t=q(e,i=>({readonly:i.optional.constant(!1),options:i.optional.custom(Dn)}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Jl,constraint:n=>Gv(n.params),writer:n=>Fn},controller:n=>{const e=n.document,t=n.value,i=n.constraint,r=i&&_i(i,Tn);return r?new ut(e,{props:new V({options:r.values.value("options")}),value:t,viewProps:n.viewProps}):new jn(e,{parser:s=>s,props:V.fromObject({formatter:ns}),value:t,viewProps:n.viewProps})},api(n){return typeof n.controller.value.rawValue!="string"?null:n.controller.valueController instanceof ut?new Qr(n.controller):null}}),Un={monitor:{defaultInterval:200,defaultRows:3}},Ta=A("mll");class Yv{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(Ta()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("textarea");i.classList.add(Ta("i")),i.style.height=`calc(var(${ea("containerUnitSize")}) * ${t.rows})`,i.readOnly=!0,t.viewProps.bindDisabled(i),this.element.appendChild(i),this.textareaElem_=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.textareaElem_,t=e.scrollTop===e.scrollHeight-e.clientHeight,i=[];this.value.rawValue.forEach(r=>{r!==void 0&&i.push(this.formatter_(r))}),e.textContent=i.join(`
`),t&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class _s{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Yv(e,{formatter:t.formatter,rows:t.rows,value:this.value,viewProps:this.viewProps})}}const Da=A("sgl");class Xv{constructor(e,t){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=t.formatter,this.element=e.createElement("div"),this.element.classList.add(Da()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("input");i.classList.add(Da("i")),i.readOnly=!0,i.type="text",t.viewProps.bindDisabled(i),this.element.appendChild(i),this.inputElement=i,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}update_(){const e=this.value.rawValue,t=e[e.length-1];this.inputElement.value=t!==void 0?this.formatter_(t):""}onValueUpdate_(){this.update_()}}class gs{constructor(e,t){this.value=t.value,this.viewProps=t.viewProps,this.view=new Xv(e,{formatter:t.formatter,value:this.value,viewProps:this.viewProps})}}const Jv=ae({id:"monitor-bool",type:"monitor",accept:(n,e)=>{if(typeof n!="boolean")return null;const t=q(e,i=>({readonly:i.required.constant(!0),rows:i.optional.number}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Yl},controller:n=>{var e;return n.value.rawValue.length===1?new gs(n.document,{formatter:Xl,value:n.value,viewProps:n.viewProps}):new _s(n.document,{formatter:Xl,rows:(e=n.params.rows)!==null&&e!==void 0?e:Un.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}});class Qv extends Sn{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const mt=A("grl");class Zv{constructor(e,t){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(mt()),t.viewProps.bindClassModifiers(this.element),this.formatter_=t.formatter,this.props_=t.props,this.cursor_=t.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const i=e.createElementNS(Be,"svg");i.classList.add(mt("g")),i.style.height=`calc(var(${ea("containerUnitSize")}) * ${t.rows})`,this.element.appendChild(i),this.svgElem_=i;const r=e.createElementNS(Be,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;const s=e.createElement("div");s.classList.add(mt("t"),A("tt")()),this.element.appendChild(s),this.tooltipElem_=s,t.value.emitter.on("change",this.onValueUpdate_),this.value=t.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const{clientWidth:e,clientHeight:t}=this.element,i=this.value.rawValue.length-1,r=this.props_.get("min"),s=this.props_.get("max"),o=[];this.value.rawValue.forEach((d,p)=>{if(d===void 0)return;const h=I(p,0,i,0,e),m=I(d,r,s,t,0);o.push([h,m].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const l=this.tooltipElem_,a=this.value.rawValue[this.cursor_.rawValue];if(a===void 0){l.classList.remove(mt("t","a"));return}const u=I(this.cursor_.rawValue,0,i,0,e),c=I(a,r,s,t,0);l.style.left=`${u}px`,l.style.top=`${c}px`,l.textContent=`${this.formatter_(a)}`,l.classList.contains(mt("t","a"))||(l.classList.add(mt("t","a"),mt("t","in")),fi(l),l.classList.remove(mt("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class ja{constructor(e,t){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=t.props,this.value=t.value,this.viewProps=t.viewProps,this.cursor_=z(-1),this.view=new Zv(e,{cursor:this.cursor_,formatter:t.formatter,rows:t.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!$r(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const i=new Vt(this.view.element);i.emitter.on("down",this.onGraphPointerDown_),i.emitter.on("move",this.onGraphPointerMove_),i.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return ve(e,null,t=>({max:t.required.number,min:t.required.number}),t=>(this.props.set("max",t.max),this.props.set("min",t.min),!0))}exportProps(){return be(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const{clientWidth:t}=this.view.element;this.cursor_.rawValue=Math.floor(I(e.offsetX,0,t,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(I(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function ws(n){return U(n.format)?he(2):n.format}function eb(n){var e;return n.value.rawValue.length===1?new gs(n.document,{formatter:ws(n.params),value:n.value,viewProps:n.viewProps}):new _s(n.document,{formatter:ws(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:Un.monitor.defaultRows,value:n.value,viewProps:n.viewProps})}function tb(n){var e,t,i;return new ja(n.document,{formatter:ws(n.params),rows:(e=n.params.rows)!==null&&e!==void 0?e:Un.monitor.defaultRows,props:V.fromObject({max:(t=n.params.max)!==null&&t!==void 0?t:100,min:(i=n.params.min)!==null&&i!==void 0?i:0}),value:n.value,viewProps:n.viewProps})}function Ba(n){return n.view==="graph"}const nb=ae({id:"monitor-number",type:"monitor",accept:(n,e)=>{if(typeof n!="number")return null;const t=q(e,i=>({format:i.optional.function,max:i.optional.number,min:i.optional.number,readonly:i.required.constant(!0),rows:i.optional.number,view:i.optional.string}));return t?{initialValue:n,params:t}:null},binding:{defaultBufferSize:n=>Ba(n)?64:1,reader:n=>fl},controller:n=>Ba(n.params)?tb(n):eb(n),api:n=>n.controller.valueController instanceof ja?new Qv(n.controller):null}),ib=ae({id:"monitor-string",type:"monitor",accept:(n,e)=>{if(typeof n!="string")return null;const t=q(e,i=>({multiline:i.optional.boolean,readonly:i.required.constant(!0),rows:i.optional.number}));return t?{initialValue:n,params:t}:null},binding:{reader:n=>Jl},controller:n=>{var e;const t=n.value;return t.rawValue.length>1||n.params.multiline?new _s(n.document,{formatter:ns,rows:(e=n.params.rows)!==null&&e!==void 0?e:Un.monitor.defaultRows,value:t,viewProps:n.viewProps}):new gs(n.document,{formatter:ns,value:t,viewProps:n.viewProps})}});class rb{constructor(){this.map_=new Map}get(e){var t;return(t=this.map_.get(e))!==null&&t!==void 0?t:null}has(e){return this.map_.has(e)}add(e,t){return this.map_.set(e,t),e.viewProps.handleDispose(()=>{this.map_.delete(e)}),t}}class sb{constructor(e){this.target=e.target,this.reader_=e.reader,this.writer_=e.writer}read(){return this.reader_(this.target.read())}write(e){this.writer_(this.target,e)}inject(e){this.write(this.reader_(e))}}function ob(n,e){var t;const i=n.accept(e.target.read(),e.params);if(U(i))return null;const r={target:e.target,initialValue:i.initialValue,params:i.params},s=q(e.params,d=>({disabled:d.optional.boolean,hidden:d.optional.boolean,label:d.optional.string,tag:d.optional.string})),o=n.binding.reader(r),l=n.binding.constraint?n.binding.constraint(r):void 0,a=new sb({reader:o,target:e.target,writer:n.binding.writer(r)}),u=new zh(z(o(i.initialValue),{constraint:l,equals:n.binding.equals}),a),c=n.controller({constraint:l,document:e.document,initialValue:i.initialValue,params:i.params,value:u,viewProps:Je.create({disabled:s==null?void 0:s.disabled,hidden:s==null?void 0:s.hidden})});return new sm(e.document,{blade:Qt(),props:V.fromObject({label:"label"in e.params?(t=s==null?void 0:s.label)!==null&&t!==void 0?t:null:e.target.key}),tag:s==null?void 0:s.tag,value:u,valueController:c})}class lb{constructor(e){this.target=e.target,this.reader_=e.reader}read(){return this.reader_(this.target.read())}}function ab(n,e){return e===0?new $m:new Km(n,e??Un.monitor.defaultInterval)}function ub(n,e){var t,i,r;const s=n.accept(e.target.read(),e.params);if(U(s))return null;const o={target:e.target,initialValue:s.initialValue,params:s.params},l=q(e.params,p=>({bufferSize:p.optional.number,disabled:p.optional.boolean,hidden:p.optional.boolean,interval:p.optional.number,label:p.optional.string})),a=n.binding.reader(o),u=(i=(t=l==null?void 0:l.bufferSize)!==null&&t!==void 0?t:n.binding.defaultBufferSize&&n.binding.defaultBufferSize(s.params))!==null&&i!==void 0?i:1,c=new cm({binding:new lb({reader:a,target:e.target}),bufferSize:u,ticker:ab(e.document,l==null?void 0:l.interval)}),d=n.controller({document:e.document,params:s.params,value:c,viewProps:Je.create({disabled:l==null?void 0:l.disabled,hidden:l==null?void 0:l.hidden})});return d.viewProps.bindDisabled(c.ticker),d.viewProps.handleDispose(()=>{c.ticker.dispose()}),new pm(e.document,{blade:Qt(),props:V.fromObject({label:"label"in e.params?(r=l==null?void 0:l.label)!==null&&r!==void 0?r:null:e.target.key}),value:c,valueController:d})}class cb{constructor(e){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=e}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e,t){if(!tf(t.core))throw G.notCompatible(e,t.id);t.type==="blade"?this.pluginsMap_.blades.unshift(t):t.type==="input"?this.pluginsMap_.inputs.unshift(t):t.type==="monitor"&&this.pluginsMap_.monitors.unshift(t)}createInput_(e,t,i){return this.pluginsMap_.inputs.reduce((r,s)=>r??ob(s,{document:e,target:t,params:i}),null)}createMonitor_(e,t,i){return this.pluginsMap_.monitors.reduce((r,s)=>r??ub(s,{document:e,params:i,target:t}),null)}createBinding(e,t,i){const r=t.read();if(U(r))throw new G({context:{key:t.key},type:"nomatchingcontroller"});const s=this.createInput_(e,t,i);if(s)return s;const o=this.createMonitor_(e,t,i);if(o)return o;throw new G({context:{key:t.key},type:"nomatchingcontroller"})}createBlade(e,t){const i=this.pluginsMap_.blades.reduce((r,s)=>r??Fm(s,{document:e,params:t}),null);if(!i)throw new G({type:"nomatchingview",context:{params:t}});return i}createInputBindingApi_(e){const t=this.pluginsMap_.inputs.reduce((i,r)=>{var s,o;return i||((o=(s=r.api)===null||s===void 0?void 0:s.call(r,{controller:e}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(e,t??new Sn(e))}createMonitorBindingApi_(e){const t=this.pluginsMap_.monitors.reduce((i,r)=>{var s,o;return i||((o=(s=r.api)===null||s===void 0?void 0:s.call(r,{controller:e}))!==null&&o!==void 0?o:null)},null);return this.apiCache_.add(e,t??new Sn(e))}createBindingApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(om(e))return this.createInputBindingApi_(e);if(hm(e))return this.createMonitorBindingApi_(e);throw G.shouldNeverHappen()}createApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(rm(e))return this.createBindingApi(e);const t=this.pluginsMap_.blades.reduce((i,r)=>i??r.api({controller:e,pool:this}),null);if(!t)throw G.shouldNeverHappen();return this.apiCache_.add(e,t)}}const db=new rb;function pb(){const n=new cb(db);return[Nv,Kv,qv,Wv,Sv,Pv,yv,bv,of,Jv,ib,nb,_m,Mm,Hl].forEach(e=>{n.register("core",e)}),n}class hb extends xt{constructor(e){super(e),this.emitter_=new X,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new Vn(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)}),this}}class mb extends xt{}class fb extends xt{constructor(e){super(e),this.emitter_=new X,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new Vn(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)}),this}}class vb extends xt{constructor(e){super(e),this.emitter_=new X,this.controller.value.emitter.on("change",t=>{this.emitter_.emit("change",new Vn(this,t.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(e){this.controller.valueController.props.set("formatter",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,t){const i=t.bind(this);return this.emitter_.on(e,r=>{i(r)}),this}}const bb=function(){return{id:"list",type:"blade",core:Jt,accept(n){const e=q(n,t=>({options:t.required.custom(Dn),value:t.required.raw,view:t.required.constant("list"),label:t.optional.string}));return e?{params:e}:null},controller(n){const e=new Tn(Zr(n.params.options)),t=z(n.params.value,{constraint:e}),i=new ut(n.document,{props:new V({options:e.values.value("options")}),value:t,viewProps:n.viewProps});return new kt(n.document,{blade:n.blade,props:V.fromObject({label:n.params.label}),value:t,valueController:i})},api(n){return!(n.controller instanceof kt)||!(n.controller.valueController instanceof ut)?null:new hb(n.controller)}}}();class _b extends Il{constructor(e,t){super(e,t)}get element(){return this.controller.view.element}}class gb extends Xr{constructor(e,t){super(e,{expanded:t.expanded,blade:t.blade,props:t.props,root:!0,viewProps:t.viewProps})}}const Na=A("spr");class wb{constructor(e,t){this.element=e.createElement("div"),this.element.classList.add(Na()),t.viewProps.bindClassModifiers(this.element);const i=e.createElement("hr");i.classList.add(Na("r")),this.element.appendChild(i)}}class Ia extends bi{constructor(e,t){super(Object.assign(Object.assign({},t),{view:new wb(e,{viewProps:t.viewProps})}))}}const Cb={id:"separator",type:"blade",core:Jt,accept(n){const e=q(n,t=>({view:t.required.constant("separator")}));return e?{params:e}:null},controller(n){return new Ia(n.document,{blade:n.blade,viewProps:n.viewProps})},api(n){return n.controller instanceof Ia?new mb(n.controller):null}},yb={id:"slider",type:"blade",core:Jt,accept(n){const e=q(n,t=>({max:t.required.number,min:t.required.number,view:t.required.constant("slider"),format:t.optional.function,label:t.optional.string,value:t.optional.number}));return e?{params:e}:null},controller(n){var e,t;const i=(e=n.params.value)!==null&&e!==void 0?e:0,r=new xn({max:n.params.max,min:n.params.min}),s=z(i,{constraint:r}),o=new wi(n.document,Object.assign(Object.assign({},Zl({formatter:(t=n.params.format)!==null&&t!==void 0?t:Fh,keyScale:z(1),max:r.values.value("max"),min:r.values.value("min"),pointerScale:gl(n.params,i)})),{parser:We,value:s,viewProps:n.viewProps}));return new kt(n.document,{blade:n.blade,props:V.fromObject({label:n.params.label}),value:s,valueController:o})},api(n){return!(n.controller instanceof kt)||!(n.controller.valueController instanceof wi)?null:new fb(n.controller)}},Pb=function(){return{id:"text",type:"blade",core:Jt,accept(n){const e=q(n,t=>({parse:t.required.function,value:t.required.raw,view:t.required.constant("text"),format:t.optional.function,label:t.optional.string}));return e?{params:e}:null},controller(n){var e;const t=z(n.params.value),i=new jn(n.document,{parser:n.params.parse,props:V.fromObject({formatter:(e=n.params.format)!==null&&e!==void 0?e:r=>String(r)}),value:t,viewProps:n.viewProps});return new kt(n.document,{blade:n.blade,props:V.fromObject({label:n.params.label}),value:t,valueController:i})},api(n){return!(n.controller instanceof kt)||!(n.controller.valueController instanceof jn)?null:new vb(n.controller)}}}();function xb(n){const e=n.createElement("div");return e.classList.add(A("dfw")()),n.body&&n.body.appendChild(e),e}function Eb(n,e,t){if(n.querySelector(`style[data-tp-style=${e}]`))return;const i=n.createElement("style");i.dataset.tpStyle=e,i.textContent=t,n.head.appendChild(i)}let kb=class extends _b{constructor(e){var t,i;const r=e??{},s=(t=r.document)!==null&&t!==void 0?t:Jh(),o=pb(),l=new gb(s,{expanded:r.expanded,blade:Qt(),props:V.fromObject({title:r.title}),viewProps:Je.create()});super(l,o),this.pool_=o,this.containerElem_=(i=r.container)!==null&&i!==void 0?i:xb(s),this.containerElem_.appendChild(this.element),this.doc_=s,this.usesDefaultWrapper_=!r.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw G.alreadyDisposed();return this.doc_}dispose(){const e=this.containerElem_;if(!e)throw G.alreadyDisposed();if(this.usesDefaultWrapper_){const t=e.parentElement;t&&t.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){e.css&&Eb(this.document,`plugin-${e.id}`,e.css),("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach(i=>{this.pool_.register(e.id,i)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1*var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(4px + var(--cnt-usz) + var(--cnt-hp));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(var(--cnt-hp) + (var(--cnt-usz) + 4px - 6px)/2 - 2px);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(var(--cnt-vp) + 2px);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1*var(--cnt-hp));position:absolute;right:calc(-1*var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz)*3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz)*3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1*var(--cnt-hp));right:calc(-1*var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;position:relative;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(var(--bld-hp) - 5px);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(4px + var(--cnt-usz) + var(--cnt-hp));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1*var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[bb,Cb,yb,Hl,Pb]})}};new Bl("4.0.2");function Vb(n){let e,t;return e=new yt({props:{keysAdd:["containerVerticalPadding","containerUnitSize"],theme:n[2]}}),{c(){j(e.$$.fragment)},m(i,r){R(e,i,r),t=!0},p(i,r){const s={};r&4&&(s.theme=i[2]),e.$set(s)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){T(e,i)}}}function Sb(n){return{c:M,m:M,p:M,i:M,o:M,d:M}}function Lb(n){let e,t,i,r;const s=[Ob,Mb],o=[];function l(c,d){return c[1]===void 0?0:1}e=l(n),t=o[e]=s[e](n);const a=n[11].default,u=Se(a,n,n[10],null);return{c(){t.c(),i=Gn(),u&&u.c()},m(c,d){o[e].m(c,d),K(c,i,d),u&&u.m(c,d),r=!0},p(c,d){let p=e;e=l(c),e===p?o[e].p(c,d):(It(),C(o[p],1,1,()=>{o[p]=null}),Ft(),t=o[e],t?t.p(c,d):(t=o[e]=s[e](c),t.c()),g(t,1),t.m(i.parentNode,i)),u&&u.p&&(!r||d&1024)&&Ae(u,a,c,c[10],r?Le(a,c[10],d,null):Me(c[10]),null)},i(c){r||(g(t),g(u,c),r=!0)},o(c){C(t),C(u,c),r=!1},d(c){c&&F(i),o[e].d(c),u&&u.d(c)}}}function Ab(n){let e;const t=n[11].default,i=Se(t,n,n[10],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s&1024)&&Ae(i,t,r,r[10],e?Le(t,r[10],s,null):Me(r[10]),null)},i(r){e||(g(i,r),e=!0)},o(r){C(i,r),e=!1},d(r){i&&i.d(r)}}}function Mb(n){let e,t;return e=new yt({props:{keysAdd:["containerVerticalPadding","containerVerticalPadding","containerVerticalPadding","containerUnitSize"],theme:n[2]}}),{c(){j(e.$$.fragment)},m(i,r){R(e,i,r),t=!0},p(i,r){const s={};r&4&&(s.theme=i[2]),e.$set(s)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){T(e,i)}}}function Ob(n){let e,t;return e=new yt({props:{keysAdd:["containerVerticalPadding"],theme:n[2]}}),{c(){j(e.$$.fragment)},m(i,r){R(e,i,r),t=!0},p(i,r){const s={};r&4&&(s.theme=i[2]),e.$set(s)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){T(e,i)}}}function Rb(n){let e,t,i,r;const s=[Ab,Lb,Sb,Vb],o=[];function l(a,u){return 0}return e=l(),t=o[e]=s[e](n),{c(){t.c(),i=ce()},m(a,u){o[e].m(a,u),K(a,i,u),r=!0},p(a,[u]){let c=e;e=l(),e===c?o[e].p(a,u):(It(),C(o[c],1,1,()=>{o[c]=null}),Ft(),t=o[e],t?t.p(a,u):(t=o[e]=s[e](a),t.c()),g(t,1),t.m(i.parentNode,i))},i(a){r||(g(t),r=!0)},o(a){C(t),r=!1},d(a){a&&F(i),o[e].d(a)}}}function Tb(n,e,t){let i,r,{$$slots:s={},$$scope:o}=e,{title:l=void 0}=e,{userExpandable:a=!0}=e,{expanded:u=!0}=e,{theme:c=void 0}=e,{scale:d=1}=e,{userCreatedPane:p=!0}=e,{paneRef:h=void 0}=e;const m=dl();an(n,m,y=>t(12,i=y));const b=Ue("parentStore");an(n,b,y=>t(13,r=y));let v=[];Di("registerPlugin",y=>{h===void 0?console.warn('`paneRef is undefined, failed to register plugin "${plugin.id}"'):v.includes(y.id)||(h==null||h.registerPlugin(y),v.push(y.id))}),Di("userCreatedPane",p),r!==void 0&&console.warn("<Panes> must not be nested");let w=u;ru(m,i=new kb({expanded:u,title:l}),i),i.on("fold",()=>{t(9,w=i.expanded)}),h=i,Di("parentStore",m),Dt(()=>{i.dispose()});function W(y){if(h)if(y===1)h.element.style.removeProperty("transform-origin"),h.element.style.removeProperty("transform"),h.element.style.removeProperty("width");else{const Fe=Math.max(0,y);t(5,h.element.style.transformOrigin="0 0",h),t(5,h.element.style.transform=`scale(${Fe})`,h),t(5,h.element.style.width=`${100/Fe}%`,h)}}function P(){h&&t(5,h.expanded=w,h),t(0,u=w)}return n.$$set=y=>{"title"in y&&t(1,l=y.title),"userExpandable"in y&&t(6,a=y.userExpandable),"expanded"in y&&t(0,u=y.expanded),"theme"in y&&t(2,c=y.theme),"scale"in y&&t(7,d=y.scale),"userCreatedPane"in y&&t(8,p=y.userCreatedPane),"paneRef"in y&&t(5,h=y.paneRef),"$$scope"in y&&t(10,o=y.$$scope)},n.$$.update=()=>{n.$$.dirty&34&&h&&l&&t(5,h.title=l,h),n.$$.dirty&160&&h&&W(d),n.$$.dirty&96&&h&&ih(a,h.element,"tp-rotv_b","tp-rotv_m"),n.$$.dirty&36&&h&&eh(h.element,c),n.$$.dirty&33&&h&&t(9,w=u),n.$$.dirty&544&&h&&P()},[u,l,c,m,b,h,a,d,p,w,o,s]}class Cs extends se{constructor(e){super(),re(this,e,Tb,Rb,ne,{title:1,userExpandable:6,expanded:0,theme:2,scale:7,userCreatedPane:8,paneRef:5})}}function Db(n){let e;const t=n[6].default,i=Se(t,n,n[10],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s&1024)&&Ae(i,t,r,r[10],e?Le(t,r[10],s,null):Me(r[10]),null)},i(r){e||(g(i,r),e=!0)},o(r){C(i,r),e=!1},d(r){i&&i.d(r)}}}function jb(n){let e,t,i,r,s;const o=[{theme:n[2]},at(n[5],"position")];function l(c){n[7](c)}function a(c){n[8](c)}let u={$$slots:{default:[Db]},$$scope:{ctx:n}};for(let c=0;c<o.length;c+=1)u=k(u,o[c]);return n[0]!==void 0&&(u.expanded=n[0]),n[3]!==void 0&&(u.paneRef=n[3]),t=new Cs({props:u}),E.push(()=>L(t,"expanded",l)),E.push(()=>L(t,"paneRef",a)),{c(){e=Ve("div"),j(t.$$.fragment),Y(e,"width",n[1]===void 0?null:`${n[1]}px`)},m(c,d){K(c,e,d),R(t,e,null),n[9](e),s=!0},p(c,[d]){const p=d&36?ge(o,[d&4&&{theme:c[2]},d&32&&we(at(c[5],"position"))]):{};d&1024&&(p.$$scope={dirty:d,ctx:c}),!i&&d&1&&(i=!0,p.expanded=c[0],S(()=>i=!1)),!r&&d&8&&(r=!0,p.paneRef=c[3],S(()=>r=!1)),t.$set(p),d&2&&Y(e,"width",c[1]===void 0?null:`${c[1]}px`)},i(c){s||(g(t.$$.fragment,c),s=!0)},o(c){C(t.$$.fragment,c),s=!1},d(c){c&&F(e),T(t),n[9](null)}}}function Bb(n,e,t){const i=["expanded","width","theme"];let r=Z(e,i),{$$slots:s={},$$scope:o}=e,{expanded:l=void 0}=e,{width:a=void 0}=e,{theme:u={baseBorderRadius:"0px",baseShadowColor:"hsla(0, 0%, 0%, 0)"}}=e,c,d;Tt(()=>{if(c){const b=c.element.parentElement;d.append(c.element),b==null||b.remove()}else console.warn("paneRef is undefined")});function p(b){l=b,t(0,l)}function h(b){c=b,t(3,c)}function m(b){E[b?"unshift":"push"](()=>{d=b,t(4,d)})}return n.$$set=b=>{e=k(k({},e),ke(b)),t(5,r=Z(e,i)),"expanded"in b&&t(0,l=b.expanded),"width"in b&&t(1,a=b.width),"theme"in b&&t(2,u=b.theme),"$$scope"in b&&t(10,o=b.$$scope)},[l,a,u,c,d,r,s,p,h,m,o]}class Ei extends se{constructor(e){super(),re(this,e,Bb,jb,ne,{expanded:0,width:1,theme:2})}}function Nb(n){let e,t;return e=new Ei({props:{theme:n[7],userCreatedPane:!1,$$slots:{default:[Fb]},$$scope:{ctx:n}}}),{c(){j(e.$$.fragment)},m(i,r){R(e,i,r),t=!0},p(i,r){const s={};r&128&&(s.theme=i[7]),r&16777343&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){T(e,i)}}}function Ib(n){let e,t,i,r;const s=[Kb,$b],o=[];function l(a,u){return 0}return e=l(),t=o[e]=s[e](n),{c(){t.c(),i=ce()},m(a,u){o[e].m(a,u),K(a,i,u),r=!0},p(a,u){t.p(a,u)},i(a){r||(g(t),r=!0)},o(a){C(t),r=!1},d(a){a&&F(i),o[e].d(a)}}}function Fb(n){let e,t,i,r,s,o,l,a,u;function c(w){n[14](w)}function d(w){n[15](w)}function p(w){n[16](w)}function h(w){n[17](w)}function m(w){n[18](w)}function b(w){n[19](w)}function v(w){n[20](w)}let _={};return n[1]!==void 0&&(_.disabled=n[1]),n[5]!==void 0&&(_.key=n[5]),n[2]!==void 0&&(_.label=n[2]),n[0]!==void 0&&(_.object=n[0]),n[3]!==void 0&&(_.options=n[3]),n[6]!==void 0&&(_.plugin=n[6]),n[4]!==void 0&&(_.ref=n[4]),e=new Fa({props:_}),E.push(()=>L(e,"disabled",c)),E.push(()=>L(e,"key",d)),E.push(()=>L(e,"label",p)),E.push(()=>L(e,"object",h)),E.push(()=>L(e,"options",m)),E.push(()=>L(e,"plugin",b)),E.push(()=>L(e,"ref",v)),{c(){j(e.$$.fragment)},m(w,W){R(e,w,W),u=!0},p(w,W){const P={};!t&&W&2&&(t=!0,P.disabled=w[1],S(()=>t=!1)),!i&&W&32&&(i=!0,P.key=w[5],S(()=>i=!1)),!r&&W&4&&(r=!0,P.label=w[2],S(()=>r=!1)),!s&&W&1&&(s=!0,P.object=w[0],S(()=>s=!1)),!o&&W&8&&(o=!0,P.options=w[3],S(()=>o=!1)),!l&&W&64&&(l=!0,P.plugin=w[6],S(()=>l=!1)),!a&&W&16&&(a=!0,P.ref=w[4],S(()=>a=!1)),e.$set(P)},i(w){u||(g(e.$$.fragment,w),u=!0)},o(w){C(e.$$.fragment,w),u=!1},d(w){T(e,w)}}}function $b(n){let e,t;return e=new yt({props:{keysAdd:["containerVerticalPadding","containerUnitSize"],theme:n[7]}}),{c(){j(e.$$.fragment)},m(i,r){R(e,i,r),t=!0},p(i,r){const s={};r&128&&(s.theme=i[7]),e.$set(s)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){T(e,i)}}}function Kb(n){let e;return{c(){e=Ve("div"),Y(e,"display","none")},m(t,i){K(t,e,i),n[13](e)},p:M,i:M,o:M,d(t){t&&F(e),n[13](null)}}}function Ub(n){let e,t,i,r;const s=[Ib,Nb],o=[];function l(a,u){return a[9]?0:1}return e=l(n),t=o[e]=s[e](n),{c(){t.c(),i=ce()},m(a,u){o[e].m(a,u),K(a,i,u),r=!0},p(a,[u]){t.p(a,u)},i(a){r||(g(t),r=!0)},o(a){C(t),r=!1},d(a){a&&F(i),o[e].d(a)}}}function zb(n,e,t){let i,{object:r}=e,{key:s}=e,{disabled:o=!1}=e,{label:l=void 0}=e,{options:a=void 0}=e,{theme:u=void 0}=e,{ref:c=void 0}=e,{plugin:d=void 0}=e;const p=Ue("registerPlugin"),h=Ue("parentStore");an(n,h,x=>t(12,i=x));const m=Ue("userCreatedPane");let b,v,_;function w(){b&&b.dispose(),d!==void 0&&p(d),t(10,b=i.addBinding(r,s,{index:_,label:l,...a,disabled:o})),t(4,c=b),b.on("change",()=>{t(0,r)})}Tt(()=>{t(11,_=v?Rr(v):0)}),Dt(()=>{b==null||b.dispose()});function W(x){E[x?"unshift":"push"](()=>{v=x,t(8,v)})}function P(x){o=x,t(1,o)}function y(x){s=x,t(5,s)}function Fe(x){l=x,t(2,l)}function Vi(x){r=x,t(0,r)}function At(x){a=x,t(3,a)}function Si(x){d=x,t(6,d)}function Ee(x){c=x,t(4,c)}return n.$$set=x=>{"object"in x&&t(0,r=x.object),"key"in x&&t(5,s=x.key),"disabled"in x&&t(1,o=x.disabled),"label"in x&&t(2,l=x.label),"options"in x&&t(3,a=x.options),"theme"in x&&t(7,u=x.theme),"ref"in x&&t(4,c=x.ref),"plugin"in x&&t(6,d=x.plugin)},n.$$.update=()=>{n.$$.dirty&1026&&b!==void 0&&t(10,b.disabled=o,b),n.$$.dirty&1028&&b!==void 0&&t(10,b.label=l,b),n.$$.dirty&1040,n.$$.dirty&6152&&i!==void 0&&_!==void 0&&w(),n.$$.dirty&1025&&b!==void 0&&b.refresh(),n.$$.dirty&4224&&u&&i&&(m||!Mr(i))&&console.warn("Set theme on the <Pane> component, not on its children! (Check nested <Binding> components for a theme prop.)")},[r,o,l,a,c,s,d,u,v,h,b,_,i,W,P,y,Fe,Vi,At,Si,Ee]}class Fa extends se{constructor(e){super(),re(this,e,zb,Ub,ne,{object:0,key:5,disabled:1,label:2,options:3,theme:7,ref:4,plugin:6})}}function Hb(n){let e,t,i,r;const s=[{key:n[3]},{options:n[1]},n[4]];function o(u){n[6](u)}function l(u){n[7](u)}let a={};for(let u=0;u<s.length;u+=1)a=k(a,s[u]);return n[2]!==void 0&&(a.object=n[2]),n[0]!==void 0&&(a.ref=n[0]),e=new Fa({props:a}),E.push(()=>L(e,"object",o)),E.push(()=>L(e,"ref",l)),{c(){j(e.$$.fragment)},m(u,c){R(e,u,c),r=!0},p(u,[c]){const d=c&26?ge(s,[c&8&&{key:u[3]},c&2&&{options:u[1]},c&16&&we(u[4])]):{};!t&&c&4&&(t=!0,d.object=u[2],S(()=>t=!1)),!i&&c&1&&(i=!0,d.ref=u[0],S(()=>i=!1)),e.$set(d)},i(u){r||(g(e.$$.fragment,u),r=!0)},o(u){C(e.$$.fragment,u),r=!1},d(u){T(e,u)}}}function qb(n,e,t){let i;const r=["value","ref","options"];let s=Z(e,r),{value:o}=e,{ref:l=void 0}=e,{options:a=void 0}=e;const u=Symbol("key");function c(){return o}function d(){t(2,i[u]=o,i)}function p(m){i=m,t(2,i)}function h(m){l=m,t(0,l)}return n.$$set=m=>{e=k(k({},e),ke(m)),t(4,s=Z(e,r)),"value"in m&&t(5,o=m.value),"ref"in m&&t(0,l=m.ref),"options"in m&&t(1,a=m.options)},n.$$.update=()=>{n.$$.dirty&4&&t(5,o=i[u]),n.$$.dirty&32&&d()},t(2,i={[u]:c()}),[l,a,i,u,s,o,p,h]}class $a extends se{constructor(e){super(),re(this,e,qb,Hb,ne,{value:5,ref:0,options:1})}}function Gb(n){let e,t,i,r;const s=[{options:n[2]},n[3]];function o(u){n[5](u)}function l(u){n[6](u)}let a={};for(let u=0;u<s.length;u+=1)a=k(a,s[u]);return n[1]!==void 0&&(a.value=n[1]),n[0]!==void 0&&(a.ref=n[0]),e=new $a({props:a}),E.push(()=>L(e,"value",o)),E.push(()=>L(e,"ref",l)),{c(){j(e.$$.fragment)},m(u,c){R(e,u,c),r=!0},p(u,[c]){const d=c&12?ge(s,[c&4&&{options:u[2]},c&8&&we(u[3])]):{};!t&&c&2&&(t=!0,d.value=u[1],S(()=>t=!1)),!i&&c&1&&(i=!0,d.ref=u[0],S(()=>i=!1)),e.$set(d)},i(u){r||(g(e.$$.fragment,u),r=!0)},o(u){C(e.$$.fragment,u),r=!1},d(u){T(e,u)}}}function Wb(n,e,t){const i=["options","ref","value"];let r=Z(e,i),{options:s=void 0}=e,{ref:o=void 0}=e,{value:l}=e,a;function u(d){l=d,t(1,l)}function c(d){o=d,t(0,o)}return n.$$set=d=>{e=k(k({},e),ke(d)),t(3,r=Z(e,i)),"options"in d&&t(4,s=d.options),"ref"in d&&t(0,o=d.ref),"value"in d&&t(1,l=d.value)},n.$$.update=()=>{n.$$.dirty&16&&t(2,a={...s,readonly:!1})},[o,l,a,r,s,u,c]}class Yb extends se{constructor(e){super(),re(this,e,Wb,Gb,ne,{options:4,ref:0,value:1})}}function Xb(n){let e,t,i,r;const s=[n[2]];function o(u){n[4](u)}function l(u){n[5](u)}let a={};for(let u=0;u<s.length;u+=1)a=k(a,s[u]);return n[0]!==void 0&&(a.value=n[0]),n[1]!==void 0&&(a.ref=n[1]),e=new Yb({props:a}),E.push(()=>L(e,"value",o)),E.push(()=>L(e,"ref",l)),{c(){j(e.$$.fragment)},m(u,c){R(e,u,c),r=!0},p(u,[c]){const d=c&4?ge(s,[we(u[2])]):{};!t&&c&1&&(t=!0,d.value=u[0],S(()=>t=!1)),!i&&c&2&&(i=!0,d.ref=u[1],S(()=>i=!1)),e.$set(d)},i(u){r||(g(e.$$.fragment,u),r=!0)},o(u){C(e.$$.fragment,u),r=!1},d(u){T(e,u)}}}function Jb(n,e,t){const i=["value","live"];let r=Z(e,i),{value:s}=e,{live:o=!0}=e,l;Dt(()=>{u(o??!0,!0)});function a(p){p.target&&t(0,s=p.target.value)}function u(p,h=!1){let m=l==null?void 0:l.controller.valueController.view.element.querySelector("input");m&&(m.removeEventListener("input",a),!h&&p&&m.addEventListener("input",a))}function c(p){s=p,t(0,s)}function d(p){l=p,t(1,l)}return n.$$set=p=>{e=k(k({},e),ke(p)),t(2,r=Z(e,i)),"value"in p&&t(0,s=p.value),"live"in p&&t(3,o=p.live)},n.$$.update=()=>{n.$$.dirty&10&&l&&o!==void 0&&u(o)},[s,l,r,o,c,d]}class Qb extends se{constructor(e){super(),re(this,e,Jb,Xb,ne,{value:0,live:3})}}function Zb(n){let e,t,i;const r=[n[1]];function s(l){n[3](l)}let o={};for(let l=0;l<r.length;l+=1)o=k(o,r[l]);return n[0]!==void 0&&(o.value=n[0]),e=new $a({props:o}),E.push(()=>L(e,"value",s)),{c(){j(e.$$.fragment)},m(l,a){R(e,l,a),i=!0},p(l,a){const u=a&2?ge(r,[we(l[1])]):{};!t&&a&1&&(t=!0,u.value=l[0],S(()=>t=!1)),e.$set(u)},i(l){i||(g(e.$$.fragment,l),i=!0)},o(l){C(e.$$.fragment,l),i=!1},d(l){T(e,l)}}}function e_(n){let e,t,i;const r=[n[1]];function s(l){n[2](l)}let o={};for(let l=0;l<r.length;l+=1)o=k(o,r[l]);return n[0]!==void 0&&(o.value=n[0]),e=new Qb({props:o}),E.push(()=>L(e,"value",s)),{c(){j(e.$$.fragment)},m(l,a){R(e,l,a),i=!0},p(l,a){const u=a&2?ge(r,[we(l[1])]):{};!t&&a&1&&(t=!0,u.value=l[0],S(()=>t=!1)),e.$set(u)},i(l){i||(g(e.$$.fragment,l),i=!0)},o(l){C(e.$$.fragment,l),i=!1},d(l){T(e,l)}}}function t_(n){let e,t,i,r;const s=[e_,Zb],o=[];function l(a,u){return typeof a[0]=="string"?0:1}return e=l(n),t=o[e]=s[e](n),{c(){t.c(),i=ce()},m(a,u){o[e].m(a,u),K(a,i,u),r=!0},p(a,[u]){let c=e;e=l(a),e===c?o[e].p(a,u):(It(),C(o[c],1,1,()=>{o[c]=null}),Ft(),t=o[e],t?t.p(a,u):(t=o[e]=s[e](a),t.c()),g(t,1),t.m(i.parentNode,i))},i(a){r||(g(t),r=!0)},o(a){C(t),r=!1},d(a){a&&F(i),o[e].d(a)}}}function n_(n,e,t){const i=["value"];let r=Z(e,i),{value:s}=e;function o(a){s=a,t(0,s)}function l(a){s=a,t(0,s)}return n.$$set=a=>{e=k(k({},e),ke(a)),t(1,r=Z(e,i)),"value"in a&&t(0,s=a.value)},[s,r,o,l]}class i_ extends se{constructor(e){super(),re(this,e,n_,t_,ne,{value:0})}}function r_(n){let e,t;return e=new Ei({props:{theme:n[3],userCreatedPane:!1,$$slots:{default:[o_]},$$scope:{ctx:n}}}),{c(){j(e.$$.fragment)},m(i,r){R(e,i,r),t=!0},p(i,r){const s={};r&8&&(s.theme=i[3]),r&16391&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){T(e,i)}}}function s_(n){let e,t,i,r;const s=[a_,l_],o=[];function l(a,u){return 0}return e=l(),t=o[e]=s[e](n),{c(){t.c(),i=ce()},m(a,u){o[e].m(a,u),K(a,i,u),r=!0},p(a,u){t.p(a,u)},i(a){r||(g(t),r=!0)},o(a){C(t),r=!1},d(a){a&&F(i),o[e].d(a)}}}function o_(n){let e,t;return e=new ys({props:{disabled:n[2],label:n[1],title:n[0]}}),e.$on("click",n[10]),{c(){j(e.$$.fragment)},m(i,r){R(e,i,r),t=!0},p(i,r){const s={};r&4&&(s.disabled=i[2]),r&2&&(s.label=i[1]),r&1&&(s.title=i[0]),e.$set(s)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){T(e,i)}}}function l_(n){let e,t;return e=new yt({props:{keysAdd:["containerUnitSize","containerVerticalPadding"],theme:n[3]}}),{c(){j(e.$$.fragment)},m(i,r){R(e,i,r),t=!0},p(i,r){const s={};r&8&&(s.theme=i[3]),e.$set(s)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){T(e,i)}}}function a_(n){let e;return{c(){e=Ve("div"),Y(e,"display","none")},m(t,i){K(t,e,i),n[9](e)},p:M,i:M,o:M,d(t){t&&F(e),n[9](null)}}}function u_(n){let e,t,i,r;const s=[s_,r_],o=[];function l(a,u){return a[5]?0:1}return e=l(n),t=o[e]=s[e](n),{c(){t.c(),i=ce()},m(a,u){o[e].m(a,u),K(a,i,u),r=!0},p(a,[u]){t.p(a,u)},i(a){r||(g(t),r=!0)},o(a){C(t),r=!1},d(a){a&&F(i),o[e].d(a)}}}function c_(n,e,t){let i,{title:r="Button"}=e,{label:s=void 0}=e,{disabled:o=!1}=e,{theme:l=void 0}=e;const a=Ue("parentStore");an(n,a,_=>t(8,i=_));const u=Ue("userCreatedPane"),c=vu();let d,p,h;function m(){p&&p.dispose(),t(6,p=i.addButton({disabled:o,index:h,label:s,title:r})),p.on("click",()=>{c("click")})}Tt(()=>{t(7,h=d?Rr(d):0)}),Dt(()=>{p==null||p.dispose()});function b(_){E[_?"unshift":"push"](()=>{d=_,t(4,d)})}function v(_){bu.call(this,n,_)}return n.$$set=_=>{"title"in _&&t(0,r=_.title),"label"in _&&t(1,s=_.label),"disabled"in _&&t(2,o=_.disabled),"theme"in _&&t(3,l=_.theme)},n.$$.update=()=>{n.$$.dirty&65&&p&&t(6,p.title=r,p),n.$$.dirty&66&&p&&t(6,p.label=s,p),n.$$.dirty&68&&p&&t(6,p.disabled=o,p),n.$$.dirty&448&&h!==void 0&&i&&!p&&m(),n.$$.dirty&264&&l&&i&&(u||!Mr(i))&&console.warn("Set theme on the <Pane> component, not on its children! (Check nested <Button> components for a theme prop.)")},[r,s,o,l,d,a,p,h,i,b,v]}class ys extends se{constructor(e){super(),re(this,e,c_,u_,ne,{title:0,label:1,disabled:2,theme:3})}}function d_(n){let e,t;return e=new Ei({props:{theme:n[4],userCreatedPane:!1,$$slots:{default:[h_]},$$scope:{ctx:n}}}),{c(){j(e.$$.fragment)},m(i,r){R(e,i,r),t=!0},p(i,r){const s={};r&16&&(s.theme=i[4]),r&262159&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){T(e,i)}}}function p_(n){let e,t,i,r;const s=[f_,m_],o=[];function l(a,u){return 0}return e=l(),t=o[e]=s[e](n),{c(){t.c(),i=ce()},m(a,u){o[e].m(a,u),K(a,i,u),r=!0},p(a,u){t.p(a,u)},i(a){r||(g(t),r=!0)},o(a){C(t),r=!1},d(a){a&&F(i),o[e].d(a)}}}function h_(n){let e,t,i,r,s,o;function l(p){n[11](p)}function a(p){n[12](p)}function u(p){n[13](p)}function c(p){n[14](p)}let d={};return n[1]!==void 0&&(d.disabled=n[1]),n[0]!==void 0&&(d.options=n[0]),n[3]!==void 0&&(d.plugin=n[3]),n[2]!==void 0&&(d.ref=n[2]),e=new Ka({props:d}),E.push(()=>L(e,"disabled",l)),E.push(()=>L(e,"options",a)),E.push(()=>L(e,"plugin",u)),E.push(()=>L(e,"ref",c)),{c(){j(e.$$.fragment)},m(p,h){R(e,p,h),o=!0},p(p,h){const m={};!t&&h&2&&(t=!0,m.disabled=p[1],S(()=>t=!1)),!i&&h&1&&(i=!0,m.options=p[0],S(()=>i=!1)),!r&&h&8&&(r=!0,m.plugin=p[3],S(()=>r=!1)),!s&&h&4&&(s=!0,m.ref=p[2],S(()=>s=!1)),e.$set(m)},i(p){o||(g(e.$$.fragment,p),o=!0)},o(p){C(e.$$.fragment,p),o=!1},d(p){T(e,p)}}}function m_(n){let e,t;return e=new yt({props:{keysAdd:["containerVerticalPadding"],theme:n[4]}}),{c(){j(e.$$.fragment)},m(i,r){R(e,i,r),t=!0},p(i,r){const s={};r&16&&(s.theme=i[4]),e.$set(s)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){T(e,i)}}}function f_(n){let e;return{c(){e=Ve("div"),Y(e,"display","none")},m(t,i){K(t,e,i),n[10](e)},p:M,i:M,o:M,d(t){t&&F(e),n[10](null)}}}function v_(n){let e,t,i,r;const s=[p_,d_],o=[];function l(a,u){return a[6]?0:1}return e=l(n),t=o[e]=s[e](n),{c(){t.c(),i=ce()},m(a,u){o[e].m(a,u),K(a,i,u),r=!0},p(a,[u]){t.p(a,u)},i(a){r||(g(t),r=!0)},o(a){C(t),r=!1},d(a){a&&F(i),o[e].d(a)}}}function b_(n,e,t){let i,{options:r}=e,{disabled:s=!1}=e,{theme:o=void 0}=e,{ref:l=void 0}=e,{plugin:a=void 0}=e;const u=Ue("registerPlugin"),c=Ue("parentStore");an(n,c,y=>t(9,i=y));const d=Ue("userCreatedPane");let p,h,m;function b(){m&&m.dispose(),a!==void 0&&u(a),t(8,m=i.addBlade({index:h,...r,disabled:s})),t(2,l=m)}Tt(()=>{t(7,h=p?Rr(p):0)}),Dt(()=>{m==null||m.dispose()});function v(y){E[y?"unshift":"push"](()=>{p=y,t(5,p)})}function _(y){s=y,t(1,s)}function w(y){r=y,t(0,r)}function W(y){a=y,t(3,a)}function P(y){l=y,t(2,l)}return n.$$set=y=>{"options"in y&&t(0,r=y.options),"disabled"in y&&t(1,s=y.disabled),"theme"in y&&t(4,o=y.theme),"ref"in y&&t(2,l=y.ref),"plugin"in y&&t(3,a=y.plugin)},n.$$.update=()=>{n.$$.dirty&258&&m&&t(8,m.disabled=s,m),n.$$.dirty&260,n.$$.dirty&641&&i&&h!==void 0&&b(),n.$$.dirty&528&&o&&i&&(d||!Mr(i))&&console.warn("Set theme on the <Pane> component, not on its children! (Check nested <Blade> components for a theme prop.)")},[r,s,l,a,o,p,c,h,m,i,v,_,w,W,P]}class Ka extends se{constructor(e){super(),re(this,e,b_,v_,ne,{options:0,disabled:1,theme:4,ref:2,plugin:3})}}function __(n){let e,t;return e=new yt({props:{extra:2,keysAdd:["containerVerticalPadding"],theme:n[2].theme}}),{c(){j(e.$$.fragment)},m(i,r){R(e,i,r),t=!0},p(i,r){const s={};r&4&&(s.theme=i[2].theme),e.$set(s)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){T(e,i)}}}function g_(n){let e,t;const i=[{options:n[0]},n[1]];let r={};for(let s=0;s<i.length;s+=1)r=k(r,i[s]);return e=new Ka({props:r}),{c(){j(e.$$.fragment)},m(s,o){R(e,s,o),t=!0},p(s,o){const l=o&3?ge(i,[o&1&&{options:s[0]},o&2&&we(s[1])]):{};e.$set(l)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){C(e.$$.fragment,s),t=!1},d(s){T(e,s)}}}function w_(n){let e,t,i,r;const s=[g_,__],o=[];function l(a,u){return 0}return e=l(),t=o[e]=s[e](n),{c(){t.c(),i=ce()},m(a,u){o[e].m(a,u),K(a,i,u),r=!0},p(a,[u]){t.p(a,u)},i(a){r||(g(t),r=!0)},o(a){C(t),r=!1},d(a){a&&F(i),o[e].d(a)}}}function C_(n,e,t){const i=[];let r=Z(e,i);const s={view:"separator"};return n.$$set=o=>{t(2,e=k(k({},e),ke(o))),t(1,r=Z(e,i))},e=ke(e),[s,r,e]}class y_ extends se{constructor(e){super(),re(this,e,C_,w_,ne,{})}}var Ps={local:{},session:{}};function P_(n){return n==="local"?localStorage:sessionStorage}function xs(n,e,t){var i,r;const s=(i=t==null?void 0:t.serializer)!=null?i:JSON,o=(r=t==null?void 0:t.storage)!=null?r:"local",l=typeof window<"u"&&typeof document<"u",a=l?P_(o):null;function u(c,d){a==null||a.setItem(c,s.stringify(d))}if(!Ps[o][n]){const c=dl(e,h=>{const m=a==null?void 0:a.getItem(n);if(m&&h(s.parse(m)),l&&o=="local"){const b=v=>{v.key===n&&h(v.newValue?s.parse(v.newValue):null)};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)}}),{subscribe:d,set:p}=c;Ps[o][n]={set(h){u(n,h),p(h)},update(h){return c.update(m=>{const b=h(m);return u(n,b),b})},subscribe:d}}return Ps[o][n]}const{window:x_}=su;function E_(n){ou(n,"svelte-1imixqv","div.draggable-container.svelte-1imixqv{position:fixed;z-index:auto;padding:20px;transition:width 0.2s ease}div.draggable-container.svelte-1imixqv:active{transition:width 0s ease}div.draggable-container.svelte-1imixqv div.tp-rotv_t{cursor:grab;overflow:hidden;height:100%;text-overflow:ellipsis}div.draggable-container.not-collapsable.svelte-1imixqv div.tp-rotv_t{margin-left:-28px;padding-left:28px}div.draggable-container.not-resizable.svelte-1imixqv div.tp-rotv_t{margin-right:-28px;padding-right:28px}div.draggable-container.svelte-1imixqv div.tp-lblv_l{white-space:nowrap}div.draggable-container.svelte-1imixqv div.tp-rotv_t:active{cursor:grabbing}div.draggable-container.svelte-1imixqv div.tp-rotv_m{right:unset;left:0;margin:auto calc((var(--cnt-usz) + (var(--cnt-hp)) - 6px) / 2)}div.draggable-container.svelte-1imixqv div.tp-custom-width-handle{cursor:col-resize;position:absolute;top:0;right:0;aspect-ratio:1;height:100%;font-size:1.5em;color:var(--tp-container-fg);opacity:0.5}")}function k_(n){let e;const t=n[25].default,i=Se(t,n,n[32],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s[1]&2)&&Ae(i,t,r,r[32],e?Le(t,r[32],s,null):Me(r[32]),null)},i(r){e||(g(i,r),e=!0)},o(r){C(i,r),e=!1},d(r){i&&i.d(r)}}}function V_(n){let e,t,i,r,s,o=`${n[1]}px`,l=`${n[2]}px`,a=`${n[3]}px`,u,c,d;const p=[{scale:n[7]},{title:n[6]},at(n[16],"position")];function h(v){n[26](v)}function m(v){n[27](v)}let b={$$slots:{default:[k_]},$$scope:{ctx:n}};for(let v=0;v<p.length;v+=1)b=k(b,p[v]);return n[0]!==void 0&&(b.expanded=n[0]),n[10]!==void 0&&(b.paneRef=n[10]),t=new Cs({props:b}),E.push(()=>L(t,"expanded",h)),E.push(()=>L(t,"paneRef",m)),{c(){e=Ve("div"),j(t.$$.fragment),cu(e,"class","svelte-tweakpane-ui draggable-container svelte-1imixqv"),Xn(()=>n[29].call(e)),Yn(e,"not-collapsable",!n[5]),Yn(e,"not-resizable",!n[4]),Y(e,"left",o),Y(e,"padding",n[8]),Y(e,"top",l),Y(e,"width",a),Y(e,"z-index",n[14])},m(v,_){K(v,e,_),R(t,e,null),n[28](e),s=hu(e,n[29].bind(e)),u=!0,c||(d=[un(x_,"resize",n[15]),un(e,"focus",n[30],!0),un(e,"pointerdown",n[31],!0)],c=!0)},p(v,_){const w=_[0]&65728?ge(p,[_[0]&128&&{scale:v[7]},_[0]&64&&{title:v[6]},_[0]&65536&&we(at(v[16],"position"))]):{};_[1]&2&&(w.$$scope={dirty:_,ctx:v}),!i&&_[0]&1&&(i=!0,w.expanded=v[0],S(()=>i=!1)),!r&&_[0]&1024&&(r=!0,w.paneRef=v[10],S(()=>r=!1)),t.$set(w),(!u||_[0]&32)&&Yn(e,"not-collapsable",!v[5]),(!u||_[0]&16)&&Yn(e,"not-resizable",!v[4]),_[0]&2&&o!==(o=`${v[1]}px`)&&Y(e,"left",o),_[0]&256&&Y(e,"padding",v[8]),_[0]&4&&l!==(l=`${v[2]}px`)&&Y(e,"top",l),_[0]&8&&a!==(a=`${v[3]}px`)&&Y(e,"width",a),_[0]&16384&&Y(e,"z-index",v[14])},i(v){u||(g(t.$$.fragment,v),u=!0)},o(v){C(t.$$.fragment,v),u=!1},d(v){v&&F(e),T(t),n[28](null),s(),c=!1,Ot(d)}}}const ki="svelte-tweakpane-ui-draggable-position-",S_="1",on=[];let Es=1e3;function L_(n,e,t){let i;const r=["storePositionLocally","localStoreId","expanded","collapseChildrenToFit","x","y","width","resizable","userExpandable","minWidth","maxWidth","title","scale","padding"];let s=Z(e,r),o,l=M,a=()=>(l(),l=Ti(h,f=>t(40,o=f)),h);n.$$.on_destroy.push(()=>l());let{$$slots:u={},$$scope:c}=e,{storePositionLocally:d=!0}=e,{localStoreId:p=S_}=e,h;d&&a(h=xs(`${ki}${p}`,{x:0,y:0,expanded:!0,width:350}));let{expanded:m=(o==null?void 0:o.expanded)??!0}=e,{collapseChildrenToFit:b=!1}=e,{x:v=(o==null?void 0:o.x)??0}=e,{y:_=(o==null?void 0:o.y)??0}=e,{width:w=(o==null?void 0:o.width)??256}=e,{resizable:W=!0}=e,{userExpandable:P=!0}=e,{minWidth:y=200}=e,{maxWidth:Fe=600}=e,{title:Vi="Tweakpane"}=e,{scale:At=1}=e,{padding:Si="0"}=e,Ee,x,_e,te,zn,Mt,Hn,$e,ft,Ss=Es;function ag(){p!==void 0&&(on.includes(p)&&console.warn('Multiple instances of <Pane> with `mode="draggable"` and `storePositionLocally=true` detected. You must explicitly set unique localStoreId property on each component to avoid collisions.'),on.push(p))}function ug(){p&&(on.splice(on.indexOf(p),1),localStorage.removeItem(`${ki}${p}`))}function cg(f){f!==void 0&&h!==void 0&&m!==void 0&&w!==void 0&&v!==void 0&&_!==void 0&&a(t(9,h=xs(`${ki}${p}`,{x:v,y:_,expanded:m,width:w})))}function Ga(){if(v!==void 0&&_!==void 0&&w!==void 0){const f=$e,et=ft;t(23,$e=document.documentElement.clientWidth),t(24,ft=document.documentElement.clientHeight);const Ke=$e-f,qn=ft-et,_g=(v+w/2)/$e,gg=(_+Mt/2)/ft;!Number.isNaN(Ke)&&_g>=.5&&t(1,v+=Ke),!Number.isNaN(qn)&&gg>=.5&&t(2,_+=qn)}}const Li=f=>{f.stopPropagation()};let Wa=0,Ls=0,Ya=0,As=0;const Ai=f=>{f.stopPropagation(),f.target&&w!==void 0&&f.target===te&&t(3,w=w<i?i:y)},Mi=f=>{v!==void 0&&_!==void 0&&f.button===0&&f.target instanceof HTMLElement&&(As=0,f.target.setPointerCapture(f.pointerId),f.target.addEventListener("pointermove",Oi),f.target.addEventListener("pointerup",Ri),Wa=w??0,Ls=v-f.pageX,Ya=_-f.pageY)},Oi=f=>{f.target instanceof HTMLElement&&w!==void 0&&y!==void 0&&v!==void 0&&_!==void 0&&(f.target===_e?(As+=Math.hypot(f.movementX,f.movementY),t(1,v=f.pageX+Ls),t(2,_=f.pageY+Ya)):f.target===te&&t(3,w=Or(f.pageX+Ls+Wa-v,y,i)))},Ri=f=>{f.stopImmediatePropagation(),f.target instanceof HTMLElement&&(f.target.releasePointerCapture(f.pointerId),f.target.removeEventListener("pointermove",Oi),f.target.removeEventListener("pointerup",Ri),f.target===_e&&As<3&&P&&t(10,Ee.expanded=!Ee.expanded,Ee))},Xa=f=>{f.preventDefault()};Tt(()=>{var f;Ga(),Ee?x.append(Ee.element):console.warn("no pane ref in draggable"),x.addEventListener("touchmove",Xa,{passive:!1}),_e=x.querySelector(".tp-rotv_t"),_e.addEventListener("click",Li),_e.addEventListener("dblclick",Ai),_e.addEventListener("pointerdown",Mi),te=(f=_e.parentElement)==null?void 0:f.appendChild(document.createElement("div")),te&&(te.className="tp-custom-width-handle",te.textContent="↔",te.addEventListener("click",Li),te.addEventListener("dblclick",Ai),te.addEventListener("pointerdown",Mi))}),Dt(()=>{_e&&(_e.removeEventListener("click",Li),_e.removeEventListener("dblclick",Ai),_e.removeEventListener("pointerdown",Mi),_e.removeEventListener("pointermove",Oi),_e.removeEventListener("pointerup",Ri)),te&&(te.removeEventListener("click",Li),te.removeEventListener("dblclick",Ai),te.removeEventListener("pointerdown",Mi),te.removeEventListener("pointermove",Oi),te.removeEventListener("pointerup",Ri)),x&&x.removeEventListener("touchmove",Xa),p!==void 0&&on.splice(on.indexOf(p),1)});function dg(f){te&&(te.style.display=f?"block":"none")}function Ja(f,et=Number.MAX_SAFE_INTEGER){if(et>0)for(const Ke of f)if("expanded"in Ke)Ke.expanded&&(et--,Ke.expanded=!1),"children"in Ke&&Ja(Ke.children,et);else{const qn=sh(Ke);qn&&rh(Ke)&&(et--,qn.click())}}function pg(f){m=f,t(0,m)}function hg(f){Ee=f,t(10,Ee)}function mg(f){E[f?"unshift":"push"](()=>{x=f,t(11,x)})}function fg(){zn=this.clientHeight,Hn=this.clientWidth,t(12,zn),t(13,Hn)}const vg=()=>{t(14,Ss=++Es)},bg=()=>{t(14,Ss=++Es)};return n.$$set=f=>{e=k(k({},e),ke(f)),t(16,s=Z(e,r)),"storePositionLocally"in f&&t(17,d=f.storePositionLocally),"localStoreId"in f&&t(18,p=f.localStoreId),"expanded"in f&&t(0,m=f.expanded),"collapseChildrenToFit"in f&&t(19,b=f.collapseChildrenToFit),"x"in f&&t(1,v=f.x),"y"in f&&t(2,_=f.y),"width"in f&&t(3,w=f.width),"resizable"in f&&t(4,W=f.resizable),"userExpandable"in f&&t(5,P=f.userExpandable),"minWidth"in f&&t(20,y=f.minWidth),"maxWidth"in f&&t(21,Fe=f.maxWidth),"title"in f&&t(6,Vi=f.title),"scale"in f&&t(7,At=f.scale),"padding"in f&&t(8,Si=f.padding),"$$scope"in f&&t(32,c=f.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&1040&&Ee&&W&&dg(W),n.$$.dirty[0]&6272&&x)if(At===void 0||At===1)t(22,Mt=zn);else{const f=window.getComputedStyle(x),et=Number.parseFloat(f.paddingTop)+Number.parseFloat(f.paddingBottom);t(22,Mt=(zn-et)*At+et)}n.$$.dirty[0]&33039374&&Mt!==void 0&&$e!==void 0&&ft!==void 0&&v!==void 0&&_!==void 0&&w!==void 0&&y!==void 0&&Fe!==void 0&&(b&&Mt>ft&&Ja(Ee.children),t(1,v=Or(v,0,Math.max(0,$e-Hn))),t(2,_=Or(_,0,Math.max(0,ft-Mt))),$e<Hn&&t(3,w=Math.max(y,Math.min(Fe,$e)))),n.$$.dirty[0]&10485762&&(i=Math.min(Fe??600,$e-(v??0))),n.$$.dirty[0]&393216&&d&&ag(),n.$$.dirty[0]&393216&&!d&&ug(),n.$$.dirty[0]&262144&&p!==`${ki}${p}`&&cg(p),n.$$.dirty[0]&393743&&d&&p!==void 0&&v!==void 0&&_!==void 0&&w!==void 0&&m!==void 0&&(h==null||h.set({x:v,y:_,expanded:m,width:w}))},[m,v,_,w,W,P,Vi,At,Si,h,Ee,x,zn,Hn,Ss,Ga,s,d,p,b,y,Fe,Mt,$e,ft,u,pg,hg,mg,fg,vg,bg,c]}class A_ extends se{constructor(e){super(),re(this,e,L_,V_,ne,{storePositionLocally:17,localStoreId:18,expanded:0,collapseChildrenToFit:19,x:1,y:2,width:3,resizable:4,userExpandable:5,minWidth:20,maxWidth:21,title:6,scale:7,padding:8},E_,[-1,-1])}}function M_(n){let e;const t=n[8].default,i=Se(t,n,n[11],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s&2048)&&Ae(i,t,r,r[11],e?Le(t,r[11],s,null):Me(r[11]),null)},i(r){e||(g(i,r),e=!0)},o(r){C(i,r),e=!1},d(r){i&&i.d(r)}}}function O_(n){let e,t,i,r,s;const o=[{title:n[1]},at(n[3],"position")];function l(c){n[9](c)}function a(c){n[10](c)}let u={$$slots:{default:[M_]},$$scope:{ctx:n}};for(let c=0;c<o.length;c+=1)u=k(u,o[c]);return n[0]!==void 0&&(u.expanded=n[0]),n[2]!==void 0&&(u.paneRef=n[2]),t=new Cs({props:u}),E.push(()=>L(t,"expanded",l)),E.push(()=>L(t,"paneRef",a)),{c(){e=Ve("div"),j(t.$$.fragment),Y(e,"display","none")},m(c,d){K(c,e,d),R(t,e,null),s=!0},p(c,[d]){const p=d&10?ge(o,[d&2&&{title:c[1]},d&8&&we(at(c[3],"position"))]):{};d&2048&&(p.$$scope={dirty:d,ctx:c}),!i&&d&1&&(i=!0,p.expanded=c[0],S(()=>i=!1)),!r&&d&4&&(r=!0,p.paneRef=c[2],S(()=>r=!1)),t.$set(p)},i(c){s||(g(t.$$.fragment,c),s=!0)},o(c){C(t.$$.fragment,c),s=!1},d(c){c&&F(e),T(t)}}}function R_(n,e,t){const i=["expanded","x","y","width","title"];let r=Z(e,i),{$$slots:s={},$$scope:o}=e,{expanded:l=void 0}=e,{x:a=void 0}=e,{y:u=void 0}=e,{width:c=void 0}=e,{title:d="Tweakpane"}=e,p,h;function m(v){l=v,t(0,l)}function b(v){p=v,t(2,p)}return n.$$set=v=>{e=k(k({},e),ke(v)),t(3,r=Z(e,i)),"expanded"in v&&t(0,l=v.expanded),"x"in v&&t(4,a=v.x),"y"in v&&t(5,u=v.y),"width"in v&&t(6,c=v.width),"title"in v&&t(1,d=v.title),"$$scope"in v&&t(11,o=v.$$scope)},n.$$.update=()=>{n.$$.dirty&4&&p!==void 0&&p.element.parentElement&&t(7,h=p.element.parentElement),n.$$.dirty&144&&h!==void 0&&a!==void 0&&(h.style.setProperty("right","unset"),h.style.setProperty("left",`${a}px`)),n.$$.dirty&160&&h!==void 0&&u!==void 0&&h.style.setProperty("top",`${u}px`),n.$$.dirty&192&&h!==void 0&&c!==void 0&&h.style.setProperty("width",`${c}px`)},[l,d,p,r,a,u,c,h,s,m,b,o]}class T_ extends se{constructor(e){super(),re(this,e,R_,O_,ne,{expanded:0,x:4,y:5,width:6,title:1})}}function D_(n){let e,t,i,r;const s=[I_,N_],o=[];function l(a,u){return 0}return e=l(),t=o[e]=s[e](n),{c(){t.c(),i=ce()},m(a,u){o[e].m(a,u),K(a,i,u),r=!0},p(a,u){t.p(a,u)},i(a){r||(g(t),r=!0)},o(a){C(t),r=!1},d(a){a&&F(i),o[e].d(a)}}}function j_(n){let e,t,i;const r=[{width:n[1]},at(n[5],"storePositionLocally")];function s(l){n[11](l)}let o={$$slots:{default:[$_]},$$scope:{ctx:n}};for(let l=0;l<r.length;l+=1)o=k(o,r[l]);return n[0]!==void 0&&(o.expanded=n[0]),e=new Ei({props:o}),E.push(()=>L(e,"expanded",s)),{c(){j(e.$$.fragment)},m(l,a){R(e,l,a),i=!0},p(l,a){const u=a&34?ge(r,[a&2&&{width:l[1]},a&32&&we(at(l[5],"storePositionLocally"))]):{};a&32768&&(u.$$scope={dirty:a,ctx:l}),!t&&a&1&&(t=!0,u.expanded=l[0],S(()=>t=!1)),e.$set(u)},i(l){i||(g(e.$$.fragment,l),i=!0)},o(l){C(e.$$.fragment,l),i=!1},d(l){T(e,l)}}}function B_(n){let e,t,i,r;const s=[U_,K_],o=[];function l(a,u){return 0}return e=l(),t=o[e]=s[e](n),{c(){t.c(),i=ce()},m(a,u){o[e].m(a,u),K(a,i,u),r=!0},p(a,u){t.p(a,u)},i(a){r||(g(t),r=!0)},o(a){C(t),r=!1},d(a){a&&F(i),o[e].d(a)}}}function N_(n){let e,t;const i=n[6].default,r=Se(i,n,n[15],null);return{c(){e=Ve("div"),r&&r.c(),Y(e,"display","none")},m(s,o){K(s,e,o),r&&r.m(e,null),t=!0},p(s,o){r&&r.p&&(!t||o&32768)&&Ae(r,i,s,s[15],t?Le(i,s[15],o,null):Me(s[15]),null)},i(s){t||(g(r,s),t=!0)},o(s){C(r,s),t=!1},d(s){s&&F(e),r&&r.d(s)}}}function I_(n){let e,t,i,r,s;const o=[{width:n[1]},n[5]];function l(d){n[12](d)}function a(d){n[13](d)}function u(d){n[14](d)}let c={$$slots:{default:[F_]},$$scope:{ctx:n}};for(let d=0;d<o.length;d+=1)c=k(c,o[d]);return n[0]!==void 0&&(c.expanded=n[0]),n[2]!==void 0&&(c.x=n[2]),n[3]!==void 0&&(c.y=n[3]),e=new T_({props:c}),E.push(()=>L(e,"expanded",l)),E.push(()=>L(e,"x",a)),E.push(()=>L(e,"y",u)),{c(){j(e.$$.fragment)},m(d,p){R(e,d,p),s=!0},p(d,p){const h=p&34?ge(o,[p&2&&{width:d[1]},p&32&&we(d[5])]):{};p&32768&&(h.$$scope={dirty:p,ctx:d}),!t&&p&1&&(t=!0,h.expanded=d[0],S(()=>t=!1)),!i&&p&4&&(i=!0,h.x=d[2],S(()=>i=!1)),!r&&p&8&&(r=!0,h.y=d[3],S(()=>r=!1)),e.$set(h)},i(d){s||(g(e.$$.fragment,d),s=!0)},o(d){C(e.$$.fragment,d),s=!1},d(d){T(e,d)}}}function F_(n){let e;const t=n[6].default,i=Se(t,n,n[15],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s&32768)&&Ae(i,t,r,r[15],e?Le(t,r[15],s,null):Me(r[15]),null)},i(r){e||(g(i,r),e=!0)},o(r){C(i,r),e=!1},d(r){i&&i.d(r)}}}function $_(n){let e;const t=n[6].default,i=Se(t,n,n[15],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s&32768)&&Ae(i,t,r,r[15],e?Le(t,r[15],s,null):Me(r[15]),null)},i(r){e||(g(i,r),e=!0)},o(r){C(i,r),e=!1},d(r){i&&i.d(r)}}}function K_(n){let e,t;const i=n[6].default,r=Se(i,n,n[15],null);return{c(){e=Ve("div"),r&&r.c(),Y(e,"display","none")},m(s,o){K(s,e,o),r&&r.m(e,null),t=!0},p(s,o){r&&r.p&&(!t||o&32768)&&Ae(r,i,s,s[15],t?Le(i,s[15],o,null):Me(s[15]),null)},i(s){t||(g(r,s),t=!0)},o(s){C(r,s),t=!1},d(s){s&&F(e),r&&r.d(s)}}}function U_(n){let e,t,i,r,s,o;const l=[n[5]];function a(h){n[7](h)}function u(h){n[8](h)}function c(h){n[9](h)}function d(h){n[10](h)}let p={$$slots:{default:[z_]},$$scope:{ctx:n}};for(let h=0;h<l.length;h+=1)p=k(p,l[h]);return n[0]!==void 0&&(p.expanded=n[0]),n[1]!==void 0&&(p.width=n[1]),n[2]!==void 0&&(p.x=n[2]),n[3]!==void 0&&(p.y=n[3]),e=new A_({props:p}),E.push(()=>L(e,"expanded",a)),E.push(()=>L(e,"width",u)),E.push(()=>L(e,"x",c)),E.push(()=>L(e,"y",d)),{c(){j(e.$$.fragment)},m(h,m){R(e,h,m),o=!0},p(h,m){const b=m&32?ge(l,[we(h[5])]):{};m&32768&&(b.$$scope={dirty:m,ctx:h}),!t&&m&1&&(t=!0,b.expanded=h[0],S(()=>t=!1)),!i&&m&2&&(i=!0,b.width=h[1],S(()=>i=!1)),!r&&m&4&&(r=!0,b.x=h[2],S(()=>r=!1)),!s&&m&8&&(s=!0,b.y=h[3],S(()=>s=!1)),e.$set(b)},i(h){o||(g(e.$$.fragment,h),o=!0)},o(h){C(e.$$.fragment,h),o=!1},d(h){T(e,h)}}}function z_(n){let e;const t=n[6].default,i=Se(t,n,n[15],null);return{c(){i&&i.c()},m(r,s){i&&i.m(r,s),e=!0},p(r,s){i&&i.p&&(!e||s&32768)&&Ae(i,t,r,r[15],e?Le(t,r[15],s,null):Me(r[15]),null)},i(r){e||(g(i,r),e=!0)},o(r){C(i,r),e=!1},d(r){i&&i.d(r)}}}function H_(n){let e,t,i,r;const s=[B_,j_,D_],o=[];function l(a,u){return a[4]===void 0||a[4]==="draggable"?0:a[4]==="inline"?1:a[4]==="fixed"?2:-1}return~(e=l(n))&&(t=o[e]=s[e](n)),{c(){t&&t.c(),i=ce()},m(a,u){~e&&o[e].m(a,u),K(a,i,u),r=!0},p(a,[u]){let c=e;e=l(a),e===c?~e&&o[e].p(a,u):(t&&(It(),C(o[c],1,1,()=>{o[c]=null}),Ft()),~e?(t=o[e],t?t.p(a,u):(t=o[e]=s[e](a),t.c()),g(t,1),t.m(i.parentNode,i)):t=null)},i(a){r||(g(t),r=!0)},o(a){C(t),r=!1},d(a){a&&F(i),~e&&o[e].d(a)}}}function q_(n,e,t){const i=["expanded","position","width","x","y"];let r=Z(e,i),{$$slots:s={},$$scope:o}=e,{expanded:l=void 0}=e,{position:a=void 0}=e,{width:u=void 0}=e,{x:c=void 0}=e,{y:d=void 0}=e;fu(()=>{(e.position==="inline"||e.position==="fixed")&&(t(2,c=e.x),t(3,d=e.y),t(1,u=e.width),t(0,l=e.expanded))});function p(P){l=P,t(0,l)}function h(P){u=P,t(1,u)}function m(P){c=P,t(2,c)}function b(P){d=P,t(3,d)}function v(P){l=P,t(0,l)}function _(P){l=P,t(0,l)}function w(P){c=P,t(2,c)}function W(P){d=P,t(3,d)}return n.$$set=P=>{t(16,e=k(k({},e),ke(P))),t(5,r=Z(e,i)),"expanded"in P&&t(0,l=P.expanded),"position"in P&&t(4,a=P.position),"width"in P&&t(1,u=P.width),"x"in P&&t(2,c=P.x),"y"in P&&t(3,d=P.y),"$$scope"in P&&t(15,o=P.$$scope)},e=ke(e),[l,u,c,d,a,r,s,p,h,m,b,v,_,w,W,o]}class G_ extends se{constructor(e){super(),re(this,e,q_,H_,ne,{expanded:0,position:4,width:1,x:2,y:3})}}function Ua(n,e,t){const i=n.slice();i[4]=e[t],i[7]=e,i[8]=t;const r=window.getComputedStyle(document.documentElement).getPropertyValue(i[4]);i[5]=r;const s=ks(i[5]);return i[6]=s,i}function za(n){let e,t,i=Ns(Object.keys(n[1])),r=[];for(let o=0;o<i.length;o+=1)r[o]=Ha(Ua(n,i,o));const s=o=>C(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=ce()},m(o,l){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(o,l);K(o,e,l),t=!0},p(o,l){if(l&2){i=Ns(Object.keys(o[1]));let a;for(a=0;a<i.length;a+=1){const u=Ua(o,i,a);r[a]?(r[a].p(u,l),g(r[a],1)):(r[a]=Ha(u),r[a].c(),g(r[a],1),r[a].m(e.parentNode,e))}for(It(),a=i.length;a<r.length;a+=1)s(a);Ft()}},i(o){if(!t){for(let l=0;l<i.length;l+=1)g(r[l]);t=!0}},o(o){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)C(r[l]);t=!1},d(o){o&&F(e),uu(r,o)}}}function Ha(n){let e,t,i;function r(o){n[3](o,n[4])}let s={label:`${qa(n[4])}${n[6]?` (${n[6]})`:""}`};return n[1][n[4]]!==void 0&&(s.value=n[1][n[4]]),e=new i_({props:s}),E.push(()=>L(e,"value",r)),{c(){j(e.$$.fragment)},m(o,l){R(e,o,l),i=!0},p(o,l){n=o;const a={};l&2&&(a.label=`${qa(n[4])}${n[6]?` (${n[6]})`:""}`),!t&&l&2&&(t=!0,a.value=n[1][n[4]],S(()=>t=!1)),e.$set(a)},i(o){i||(g(e.$$.fragment,o),i=!0)},o(o){C(e.$$.fragment,o),i=!1},d(o){T(e,o)}}}function W_(n){let e,t,i,r,s,o,l,a=n[0]&&za(n);return t=new y_({}),r=new ys({props:{title:"Copy"}}),r.$on("click",n[2]),o=new ys({props:{title:"Reset"}}),o.$on("click",Q_),{c(){a&&a.c(),e=Gn(),j(t.$$.fragment),i=Gn(),j(r.$$.fragment),s=Gn(),j(o.$$.fragment)},m(u,c){a&&a.m(u,c),K(u,e,c),R(t,u,c),K(u,i,c),R(r,u,c),K(u,s,c),R(o,u,c),l=!0},p(u,c){u[0]?a?(a.p(u,c),c&1&&g(a,1)):(a=za(u),a.c(),g(a,1),a.m(e.parentNode,e)):a&&(It(),C(a,1,1,()=>{a=null}),Ft())},i(u){l||(g(a),g(t.$$.fragment,u),g(r.$$.fragment,u),g(o.$$.fragment,u),l=!0)},o(u){C(a),C(t.$$.fragment,u),C(r.$$.fragment,u),C(o.$$.fragment,u),l=!1},d(u){u&&(F(e),F(i),F(s)),a&&a.d(u),T(t,u),T(r,u),T(o,u)}}}function Y_(n){let e,t;return e=new G_({props:{title:"Tweakpane CSS",$$slots:{default:[W_]},$$scope:{ctx:n}}}),{c(){j(e.$$.fragment)},m(i,r){R(e,i,r),t=!0},p(i,[r]){const s={};r&515&&(s.$$scope={dirty:r,ctx:i}),e.$set(s)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){C(e.$$.fragment,i),t=!1},d(i){T(e,i)}}}function X_(n){const e=Number.parseFloat(n);return isNaN(e)?n:e}async function J_(n){try{await navigator.clipboard.writeText(n),console.log(`[tweakpane-css] Copied to clipboard:
${n}`)}catch(e){console.error(`[tweakpane-css] Failed to copy text: ${e}`)}}function qa(n){return n.replace("--","").replaceAll("-"," ").replaceAll(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())}function ks(n){if(isNaN(Number.parseFloat(n)))return"";const e=/^(-?[\d.]+)\s?([%a-z]*)$/i.exec(n);return e!=null&&e[2]?e[2]:""}function Q_(){console.log("[tweakpane-css] Clearing changes to CSS Variables"),typeof localStorage<"u"&&(localStorage.removeItem("css"),location.reload())}function Z_(n,e,t){let i,r=M,s=()=>(r(),r=Ti(o,u=>t(1,i=u)),o);n.$$.on_destroy.push(()=>r());let o;Tt(()=>{const u=[...document.styleSheets].flatMap(c=>[...c.cssRules]).filter(c=>c instanceof CSSStyleRule&&c.selectorText===":root").flatMap(c=>[...c.style]).filter(c=>c.startsWith("--"));s(t(0,o=xs("css",u.reduce((c,d)=>(c[d]=X_(window.getComputedStyle(document.documentElement).getPropertyValue(d)),c),{}))));for(const c of Object.keys(o))u.includes(c)||delete i[c]});function l(){const u=Object.entries(i).map(([c,d])=>{const p=ks(window.getComputedStyle(document.documentElement).getPropertyValue(c));return`	${c}: ${d}${p?`${p}`:""};
`});J_(`:root {
${u.join("")}}`)}function a(u,c){n.$$.not_equal(i[c],u)&&(i[c]=u,o.set(i))}return n.$$.update=()=>{if(n.$$.dirty&3&&o)for(const u of Object.keys(i)){const c=ks(window.getComputedStyle(document.documentElement).getPropertyValue(u));document.documentElement.style.setProperty(u,`${i[u]}${c?`${c}`:""}`)}},[o,i,l,a]}class eg extends se{constructor(e){super(),re(this,e,Z_,Y_,ne,{})}}const tg=Symbol("null");let ng=0;class ig extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[e]=arguments;if(e!=null){if(typeof e[Symbol.iterator]!="function")throw new TypeError(typeof e+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[t,i]of e)this.set(t,i)}}_getPublicKeys(e,t=!1){if(!Array.isArray(e))throw new TypeError("The keys parameter must be an array");const i=this._getPrivateKey(e,t);let r;return i&&this._publicKeys.has(i)?r=this._publicKeys.get(i):t&&(r=[...e],this._publicKeys.set(i,r)),{privateKey:i,publicKey:r}}_getPrivateKey(e,t=!1){const i=[];for(let r of e){r===null&&(r=tg);const s=typeof r=="object"||typeof r=="function"?"_objectHashes":typeof r=="symbol"?"_symbolHashes":!1;if(!s)i.push(r);else if(this[s].has(r))i.push(this[s].get(r));else if(t){const o=`@@mkm-ref-${ng++}@@`;this[s].set(r,o),i.push(o)}else return!1}return JSON.stringify(i)}set(e,t){const{publicKey:i}=this._getPublicKeys(e,!0);return super.set(i,t)}get(e){const{publicKey:t}=this._getPublicKeys(e);return super.get(t)}has(e){const{publicKey:t}=this._getPublicKeys(e);return super.has(t)}delete(e){const{publicKey:t,privateKey:i}=this._getPublicKeys(e);return!!(t&&super.delete(t)&&this._publicKeys.delete(i))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}function rg(){const n={};return n.promise=new Promise((e,t)=>{n.resolve=e,n.reject=t}),n}const Vs=new ig,sg=n=>["interactive","complete"].includes((n.ownerDocument??n).readyState);function og(n,{target:e=document,stopOnDomReady:t=!0,waitForChildren:i=!0,timeout:r=Number.POSITIVE_INFINITY,predicate:s}={}){const o=[n,t,r,i,e],l=Vs.get(o);if(l)return l;let a;const u=rg(),{promise:c}=u;Vs.set(o,c);const d=p=>{cancelAnimationFrame(a),Vs.delete(o,c),u.resolve(p)};return r!==Number.POSITIVE_INFINITY&&setTimeout(d,r),function p(){const h=lg({target:e,selector:n,predicate:s});if(sg(e)&&(t||h)){d(h??void 0);return}let m=h;for(;m;){if(!i||m.nextSibling){d(h);return}m=m.parentElement}a=requestAnimationFrame(p)}(),Object.assign(c,{stop:()=>d()})}function lg({target:n,selector:e,predicate:t}={}){return t?[...n.querySelectorAll(e)].find(r=>t(r)):n.querySelector(e)}if(typeof localStorage<"u"){const n=localStorage.getItem("css");n&&Object.entries(JSON.parse(n)).forEach(([e,t])=>{const i=(r=>{var s;return isNaN(parseFloat(r))?"":((s=r.match(/^-?[\d.]+\s?([a-z%]*)$/i))==null?void 0:s[1])||""})(window.getComputedStyle(document.documentElement).getPropertyValue(e));document.documentElement.style.setProperty(e,`${t}${i?`${i}`:""}`)})}og("body").then(n=>{new eg({target:n})})})();
